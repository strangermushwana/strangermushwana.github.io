import{A as yT,B as vT,C as Mn,D as wi,E as hh,F as ou,G as Ty,H as _T,I as wT,J as se,K as cn,L as vt,M as Sy,N as ET,O as au,P as Ee,Q as fn,R as fh,S as Ay,T as Rn,U as Ei,V as bs,W as ph,X as IT,Y as Hn,Z as It,a as z,b as xe,c as cT,d as Cy,e as N,f as uT,g as ah,h as lT,i as dT,j,k as Oo,l as ch,m as hT,n as fT,o as Et,p as uh,q as su,r as Dy,s as pT,t as cr,u as by,v as lh,w as gT,x as mT,y as dh,z as dt}from"./chunk-F2A7JWNJ.js";var CT=null;var xy=1,DT=Symbol("SIGNAL");function Pe(t){let e=CT;return CT=t,e}var bT={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function TL(t){if(!(Ny(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===xy)){if(!t.producerMustRecompute(t)&&!My(t)){t.dirty=!1,t.lastCleanEpoch=xy;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=xy}}function TT(t){return t&&(t.nextProducerIndex=0),Pe(t)}function ST(t,e){if(Pe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ny(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ry(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function My(t){gh(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(TL(n),r!==n.version))return!0}return!1}function AT(t){if(gh(t),Ny(t))for(let e=0;e<t.producerNode.length;e++)Ry(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ry(t,e){if(SL(t),gh(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Ry(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];gh(i),i.producerIndexOfThis[r]=e}}function Ny(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function gh(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function SL(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function AL(){throw new Error}var xL=AL;function xT(t){xL=t}function ae(t){return typeof t=="function"}function Fo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var mh=Fo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ts(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var it=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(s){e=s instanceof mh?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{MT(s)}catch(o){e=e??[],o instanceof mh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new mh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)MT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ts(n,e)}remove(e){let{_finalizers:n}=this;n&&Ts(n,e),e instanceof t&&e._removeParent(this)}};it.EMPTY=(()=>{let t=new it;return t.closed=!0,t})();var Py=it.EMPTY;function yh(t){return t instanceof it||t&&"closed"in t&&ae(t.remove)&&ae(t.add)&&ae(t.unsubscribe)}function MT(t){ae(t)?t():t.unsubscribe()}var Gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Vo={setTimeout(t,e,...n){let{delegate:r}=Vo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Vo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function vh(t){Vo.setTimeout(()=>{let{onUnhandledError:e}=Gn;if(e)e(t);else throw t})}function Ss(){}var RT=ky("C",void 0,void 0);function NT(t){return ky("E",void 0,t)}function PT(t){return ky("N",t,void 0)}function ky(t,e,n){return{kind:t,value:e,error:n}}var As=null;function Lo(t){if(Gn.useDeprecatedSynchronousErrorHandling){let e=!As;if(e&&(As={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=As;if(As=null,n)throw r}}else t()}function kT(t){Gn.useDeprecatedSynchronousErrorHandling&&As&&(As.errorThrown=!0,As.error=t)}var xs=class extends it{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yh(e)&&e.add(this)):this.destination=NL}static create(e,n,r){return new Hr(e,n,r)}next(e){this.isStopped?Fy(PT(e),this):this._next(e)}error(e){this.isStopped?Fy(NT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Fy(RT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ML=Function.prototype.bind;function Oy(t,e){return ML.call(t,e)}var Vy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){_h(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){_h(r)}else _h(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_h(n)}}},Hr=class extends xs{constructor(e,n,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Gn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Oy(e.next,s),error:e.error&&Oy(e.error,s),complete:e.complete&&Oy(e.complete,s)}):i=e}this.destination=new Vy(i)}};function _h(t){Gn.useDeprecatedSynchronousErrorHandling?kT(t):vh(t)}function RL(t){throw t}function Fy(t,e){let{onStoppedNotification:n}=Gn;n&&Vo.setTimeout(()=>n(t,e))}var NL={closed:!0,next:Ss,error:RL,complete:Ss};var jo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Mt(t){return t}function Ly(...t){return jy(t)}function jy(t){return t.length===0?Mt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var pe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=kL(n)?n:new Hr(n,r,i);return Lo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=OT(r),new r((i,s)=>{let o=new Hr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[jo](){return this}pipe(...n){return jy(n)(this)}toPromise(n){return n=OT(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function OT(t){var e;return(e=t??Gn.Promise)!==null&&e!==void 0?e:Promise}function PL(t){return t&&ae(t.next)&&ae(t.error)&&ae(t.complete)}function kL(t){return t&&t instanceof xs||PL(t)&&yh(t)}function Uy(t){return ae(t?.lift)}function ue(t){return e=>{if(Uy(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(t,e,n,r,i){return new By(t,e,n,r,i)}var By=class extends xs{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Uo(){return ue((t,e)=>{let n=null;t._refCount++;let r=ce(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Bo=class extends pe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Uy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new it;let n=this.getSubject();e.add(this.source.subscribe(ce(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=it.EMPTY)}return e}refCount(){return Uo()(this)}};var FT=Fo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ke=(()=>{class t extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new wh(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new FT}next(n){Lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Py:(this.currentObservers=null,s.push(n),new it(()=>{this.currentObservers=null,Ts(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new pe;return n.source=this,n}}return t.create=(e,n)=>new wh(e,n),t})(),wh=class extends Ke{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Py}};var Rt=class extends Ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var cu={now(){return(cu.delegate||Date).now()},delegate:void 0};var Eh=class extends Ke{constructor(e=1/0,n=1/0,r=cu){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ih=class extends it{constructor(e,n){super()}schedule(e,n=0){return this}};var uu={setInterval(t,e,...n){let{delegate:r}=uu;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=uu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var $o=class extends Ih{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return uu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&uu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ts(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var qo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};qo.now=cu.now;var Ho=class extends qo{constructor(e,n=qo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ms=new Ho($o);var Ch=class extends $o{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Dh=class extends Ho{};var $y=new Dh(Ch);var Qt=new pe(t=>t.complete());function VT(t){return t&&ae(t.schedule)}function qy(t){return t[t.length-1]}function Go(t){return ae(qy(t))?t.pop():void 0}function ur(t){return VT(qy(t))?t.pop():void 0}function LT(t,e){return typeof qy(t)=="number"?t.pop():e}var bh=t=>t&&typeof t.length=="number"&&typeof t!="function";function Th(t){return ae(t?.then)}function Sh(t){return ae(t[jo])}function Ah(t){return Symbol.asyncIterator&&ae(t?.[Symbol.asyncIterator])}function xh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function OL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Mh=OL();function Rh(t){return ae(t?.[Mh])}function Nh(t){return lT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ah(n.read());if(i)return yield ah(void 0);yield yield ah(r)}}finally{n.releaseLock()}})}function Ph(t){return ae(t?.getReader)}function Le(t){if(t instanceof pe)return t;if(t!=null){if(Sh(t))return FL(t);if(bh(t))return VL(t);if(Th(t))return LL(t);if(Ah(t))return jT(t);if(Rh(t))return jL(t);if(Ph(t))return UL(t)}throw xh(t)}function FL(t){return new pe(e=>{let n=t[jo]();if(ae(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VL(t){return new pe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function LL(t){return new pe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,vh)})}function jL(t){return new pe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function jT(t){return new pe(e=>{BL(t,e).catch(n=>e.error(n))})}function UL(t){return jT(Nh(t))}function BL(t,e){var n,r,i,s;return uT(this,void 0,void 0,function*(){try{for(n=dT(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function un(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Nn(t,e=0){return ue((n,r)=>{n.subscribe(ce(r,i=>un(r,t,()=>r.next(i),e),()=>un(r,t,()=>r.complete(),e),i=>un(r,t,()=>r.error(i),e)))})}function zn(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function UT(t,e){return Le(t).pipe(zn(e),Nn(e))}function BT(t,e){return Le(t).pipe(zn(e),Nn(e))}function $T(t,e){return new pe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function qT(t,e){return new pe(n=>{let r;return un(n,e,()=>{r=t[Mh](),un(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function kh(t,e){if(!t)throw new Error("Iterable cannot be null");return new pe(n=>{un(n,e,()=>{let r=t[Symbol.asyncIterator]();un(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function HT(t,e){return kh(Nh(t),e)}function GT(t,e){if(t!=null){if(Sh(t))return UT(t,e);if(bh(t))return $T(t,e);if(Th(t))return BT(t,e);if(Ah(t))return kh(t,e);if(Rh(t))return qT(t,e);if(Ph(t))return HT(t,e)}throw xh(t)}function De(t,e){return e?GT(t,e):Le(t)}function X(...t){let e=ur(t);return De(t,e)}function zo(t,e){let n=ae(t)?t:()=>t,r=i=>i.error(n());return new pe(e?i=>e.schedule(r,0,i):r)}function Hy(t){return!!t&&(t instanceof pe||ae(t.lift)&&ae(t.subscribe))}var Gr=Fo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Z(t,e){return ue((n,r)=>{let i=0;n.subscribe(ce(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:$L}=Array;function qL(t,e){return $L(e)?t(...e):t(e)}function Oh(t){return Z(e=>qL(t,e))}var{isArray:HL}=Array,{getPrototypeOf:GL,prototype:zL,keys:WL}=Object;function Fh(t){if(t.length===1){let e=t[0];if(HL(e))return{args:e,keys:null};if(KL(e)){let n=WL(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function KL(t){return t&&typeof t=="object"&&GL(t)===zL}function Vh(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function lu(...t){let e=ur(t),n=Go(t),{args:r,keys:i}=Fh(t);if(r.length===0)return De([],e);let s=new pe(QL(r,e,i?o=>Vh(i,o):Mt));return n?s.pipe(Oh(n)):s}function QL(t,e,n=Mt){return r=>{zT(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)zT(e,()=>{let l=De(t[c],e),d=!1;l.subscribe(ce(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function zT(t,e,n){t?un(n,t,e):e()}function WT(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},y=D=>l<r?E(D):c.push(D),E=D=>{s&&e.next(D),l++;let S=!1;Le(n(D,d++)).subscribe(ce(e,k=>{i?.(k),s?y(k):e.next(k)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let k=c.shift();o?un(e,o,()=>E(k)):E(k)}g()}catch(k){e.error(k)}}))};return t.subscribe(ce(e,y,()=>{f=!0,g()})),()=>{a?.()}}function ht(t,e,n=1/0){return ae(e)?ht((r,i)=>Z((s,o)=>e(r,s,i,o))(Le(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>WT(r,i,t,n)))}function Ii(t=1/0){return ht(Mt,t)}function KT(){return Ii(1)}function Wo(...t){return KT()(De(t,ur(t)))}function Lh(t){return new pe(e=>{Le(t()).subscribe(e)})}function Gy(...t){let e=Go(t),{args:n,keys:r}=Fh(t),i=new pe(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;Le(n[d]).subscribe(ce(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?Vh(r,a):a),s.complete())}))}});return e?i.pipe(Oh(e)):i}function Ko(...t){let e=ur(t),n=LT(t,1/0),r=t;return r.length?r.length===1?Le(r[0]):Ii(n)(De(r,e)):Qt}function Ct(t,e){return ue((n,r)=>{let i=0;n.subscribe(ce(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Ci(t){return ue((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ce(n,void 0,void 0,o=>{s=Le(t(o,Ci(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function QT(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(ce(o,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Di(t,e){return ae(e)?ht(t,e,1):ht(t,1)}function bi(t){return ue((e,n)=>{let r=!1;e.subscribe(ce(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function zr(t){return t<=0?()=>Qt:ue((e,n)=>{let r=0;e.subscribe(ce(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function zy(t){return Z(()=>t)}function du(t,e=Mt){return t=t??YL,ue((n,r)=>{let i,s=!0;n.subscribe(ce(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function YL(t,e){return t===e}function jh(t=ZL){return ue((e,n)=>{let r=!1;e.subscribe(ce(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function ZL(){return new Gr}function Qo(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function pn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ct((i,s)=>t(i,s,r)):Mt,zr(1),n?bi(e):jh(()=>new Gr))}function Yo(t){return t<=0?()=>Qt:ue((e,n)=>{let r=[];e.subscribe(ce(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Wy(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ct((i,s)=>t(i,s,r)):Mt,Yo(1),n?bi(e):jh(()=>new Gr))}function hu(){return ue((t,e)=>{let n,r=!1;t.subscribe(ce(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function lr(t,e){return ue(QT(t,e,arguments.length>=2,!0))}function fu(t={}){let{connector:e=()=>new Ke,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),o=c=void 0,d=f=!1},E=()=>{let D=o;y(),D?.unsubscribe()};return ue((D,S)=>{l++,!f&&!d&&g();let k=c=c??e();S.add(()=>{l--,l===0&&!f&&!d&&(a=Ky(E,i))}),k.subscribe(S),!o&&l>0&&(o=new Hr({next:$=>k.next($),error:$=>{f=!0,g(),a=Ky(y,n,$),k.error($)},complete:()=>{d=!0,g(),a=Ky(y,r),k.complete()}}),Le(D).subscribe(o))})(s)}}function Ky(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Hr({next:()=>{r.unsubscribe(),t()}});return Le(e(...n)).subscribe(r)}function Uh(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,fu({connector:()=>new Eh(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Qy(t){return ue((e,n)=>{let r=!1,i=0;e.subscribe(ce(n,s=>(r||(r=!t(s,i++)))&&n.next(s)))})}function Rs(...t){let e=ur(t);return ue((n,r)=>{(e?Wo(t,n,e):Wo(t,n)).subscribe(r)})}function ze(t,e){return ue((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ce(r,c=>{i?.unsubscribe();let l=0,d=s++;Le(t(c,d)).subscribe(i=ce(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Bh(t,e){return ae(e)?ze(()=>t,e):ze(()=>t)}function Zo(t){return ue((e,n)=>{Le(t).subscribe(ce(n,()=>n.complete(),Ss)),!n.closed&&e.subscribe(n)})}function $e(t,e,n){let r=ae(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ce(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Mt}function Yy(...t){let e=Go(t);return ue((n,r)=>{let i=t.length,s=new Array(i),o=t.map(()=>!1),a=!1;for(let c=0;c<i;c++)Le(t[c]).subscribe(ce(r,l=>{s[c]=l,!a&&!o[c]&&(o[c]=!0,(a=o.every(Mt))&&(o=null))},Ss));n.subscribe(ce(r,c=>{if(a){let l=[c,...s];r.next(e?e(...l):l)}}))})}var PS="https://g.co/ng/security#xss",re=class extends Error{constructor(e,n){super(If(e,n)),this.code=e}};function If(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Su(t){return{toString:t}.toString()}var $h="__parameters__";function JL(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function kS(t,e,n){return Su(()=>{let r=JL(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty($h)?c[$h]:Object.defineProperty(c,$h,{value:[]})[$h];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ns=globalThis;function je(t){for(let e in t)if(t[e]===je)return e;throw Error("Could not find renamed property on target object.")}function XL(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Zt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Zt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function YT(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var e2=je({__forward_ref__:je});function ha(t){return t.__forward_ref__=ha,t.toString=function(){return Zt(this())},t}function Yt(t){return OS(t)?t():t}function OS(t){return typeof t=="function"&&t.hasOwnProperty(e2)&&t.__forward_ref__===ha}function ee(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Jt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Cf(t){return ZT(t,VS)||ZT(t,LS)}function FS(t){return Cf(t)!==null}function ZT(t,e){return t.hasOwnProperty(e)?t[e]:null}function t2(t){let e=t&&(t[VS]||t[LS]);return e||null}function JT(t){return t&&(t.hasOwnProperty(XT)||t.hasOwnProperty(n2))?t[XT]:null}var VS=je({\u0275prov:je}),XT=je({\u0275inj:je}),LS=je({ngInjectableDef:je}),n2=je({ngInjectorDef:je}),W=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function jS(t){return t&&!!t.\u0275providers}var r2=je({\u0275cmp:je}),i2=je({\u0275dir:je}),s2=je({\u0275pipe:je}),o2=je({\u0275mod:je}),Xh=je({\u0275fac:je}),gu=je({__NG_ELEMENT_ID__:je}),eS=je({__NG_ENV_ID__:je});function Xv(t){return typeof t=="string"?t:t==null?"":String(t)}function a2(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Xv(t)}function c2(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new re(-200,t)}function e_(t,e){throw new re(-201,!1)}var ve=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ve||{}),pv;function US(){return pv}function Pn(t){let e=pv;return pv=t,e}function BS(t,e,n){let r=Cf(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ve.Optional)return null;if(e!==void 0)return e;e_(t,"Injector")}var u2={},mu=u2,gv="__NG_DI_FLAG__",ef="ngTempTokenPath",l2="ngTokenPath",d2=/\n/gm,h2="\u0275",tS="__source",na;function f2(){return na}function Ti(t){let e=na;return na=t,e}function p2(t,e=ve.Default){if(na===void 0)throw new re(-203,!1);return na===null?BS(t,void 0,e):na.get(t,e&ve.Optional?null:void 0,e)}function V(t,e=ve.Default){return(US()||p2)(Yt(t),e)}function U(t,e=ve.Default){return V(t,Df(e))}function Df(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function mv(t){let e=[];for(let n=0;n<t.length;n++){let r=Yt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,s=ve.Default;for(let o=0;o<r.length;o++){let a=r[o],c=g2(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(V(i,s))}else e.push(V(r))}return e}function $S(t,e){return t[gv]=e,t.prototype[gv]=e,t}function g2(t){return t[gv]}function m2(t,e,n,r){let i=t[ef];throw e[tS]&&i.unshift(e[tS]),t.message=y2(`
`+t.message,i,n,r),t[l2]=i,t[ef]=null,t}function y2(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==h2?t.slice(2):t;let i=Zt(e);if(Array.isArray(e))i=e.map(Zt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Zt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(d2,`
  `)}`}var Au=$S(kS("Optional"),8);var qS=$S(kS("SkipSelf"),4);function ia(t,e){let n=t.hasOwnProperty(Xh);return n?t[Xh]:null}function t_(t,e){t.forEach(n=>Array.isArray(n)?t_(n,e):e(n))}function HS(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function tf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function v2(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function _2(t,e,n){let r=xu(t,e);return r>=0?t[r|1]=n:(r=~r,v2(t,r,e,n)),r}function Zy(t,e){let n=xu(t,e);if(n>=0)return t[n|1]}function xu(t,e){return w2(t,e,1)}function w2(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var sa={},gn=[],ks=new W(""),GS=new W("",-1),zS=new W(""),nf=class{get(e,n=mu){if(n===mu){let r=new Error(`NullInjectorError: No provider for ${Zt(e)}!`);throw r.name="NullInjectorError",r}return n}},WS=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(WS||{}),fr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(fr||{}),Nt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Nt||{});function E2(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function yv(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];I2(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function KS(t){return t===3||t===4||t===6}function I2(t){return t.charCodeAt(0)===64}function yu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?nS(t,n,i,null,e[++r]):nS(t,n,i,null,null))}}return t}function nS(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var QS="ng-template";function C2(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&E2(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(n_(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function n_(t){return t.type===4&&t.value!==QS}function D2(t,e,n){let r=t.type===4&&!n?QS:t.value;return e===r}function b2(t,e,n){let r=4,i=t.attrs,s=i!==null?A2(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Wn(r)&&!Wn(c))return!1;if(o&&Wn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!D2(t,c,n)||c===""&&e.length===1){if(Wn(r))return!1;o=!0}}else if(r&8){if(i===null||!C2(t,i,c,n)){if(Wn(r))return!1;o=!0}}else{let l=e[++a],d=T2(c,i,n_(t),n);if(d===-1){if(Wn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Wn(r))return!1;o=!0}}}}return Wn(r)||o}function Wn(t){return(t&1)===0}function T2(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return x2(e,t)}function S2(t,e,n=!1){for(let r=0;r<e.length;r++)if(b2(t,e[r],n))return!0;return!1}function A2(t){for(let e=0;e<t.length;e++){let n=t[e];if(KS(n))return e}return t.length}function x2(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function rS(t,e){return t?":not("+e.trim()+")":e}function M2(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Wn(o)&&(e+=rS(s,i),i=""),r=o,s=s||!Wn(r);n++}return i!==""&&(e+=rS(s,i)),e}function R2(t){return t.map(M2).join(",")}function N2(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Wn(i))break;i=s}r++}return{attrs:e,classes:n}}function $t(t){return Su(()=>{let e=eA(t),n=xe(z({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===WS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||fr.Emulated,styles:t.styles||gn,_:null,schemas:t.schemas||null,tView:null,id:""});tA(n);let r=t.dependencies;return n.directiveDefs=sS(r,!1),n.pipeDefs=sS(r,!0),n.id=O2(n),n})}function P2(t){return Ai(t)||YS(t)}function k2(t){return t!==null}function Xt(t){return Su(()=>({type:t.type,bootstrap:t.bootstrap||gn,declarations:t.declarations||gn,imports:t.imports||gn,exports:t.exports||gn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function iS(t,e){if(t==null)return sa;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Nt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Nt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function en(t){return Su(()=>{let e=eA(t);return tA(e),e})}function Ai(t){return t[r2]||null}function YS(t){return t[i2]||null}function ZS(t){return t[s2]||null}function JS(t){let e=Ai(t)||YS(t)||ZS(t);return e!==null?e.standalone:!1}function XS(t,e){let n=t[o2]||null;if(!n&&e===!0)throw new Error(`Type ${Zt(t)} does not have '\u0275mod' property.`);return n}function eA(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||sa,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||gn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:iS(t.inputs,e),outputs:iS(t.outputs),debugInfo:null}}function tA(t){t.features?.forEach(e=>e(t))}function sS(t,e){if(!t)return null;let n=e?ZS:P2;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(k2)}function O2(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Bs(t){return{\u0275providers:t}}function r_(...t){return{\u0275providers:nA(!0,t),\u0275fromNgModule:!0}}function nA(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return t_(e,o=>{let a=o;vv(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&rA(i,s),n}function rA(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];i_(i,s=>{e(s,r)})}}function vv(t,e,n,r){if(t=Yt(t),!t)return!1;let i=null,s=JT(t),o=!s&&Ai(t);if(!s&&!o){let c=t.ngModule;if(s=JT(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)vv(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{t_(s.imports,d=>{vv(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&rA(l,e)}if(!a){let l=ia(i)||(()=>new i);e({provide:i,useFactory:l,deps:gn},i),e({provide:zS,useValue:i,multi:!0},i),e({provide:ks,useValue:()=>V(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;i_(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function i_(t,e){for(let n of t)jS(n)&&(n=n.\u0275providers),Array.isArray(n)?i_(n,e):e(n)}var F2=je({provide:String,useValue:je});function iA(t){return t!==null&&typeof t=="object"&&F2 in t}function V2(t){return!!(t&&t.useExisting)}function L2(t){return!!(t&&t.useFactory)}function oa(t){return typeof t=="function"}function j2(t){return!!t.useClass}var bf=new W(""),Kh={},U2={},Jy;function s_(){return Jy===void 0&&(Jy=new nf),Jy}var ln=class{},vu=class extends ln{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wv(e,o=>this.processProvider(o)),this.records.set(GS,Jo(void 0,this)),i.has("environment")&&this.records.set(ln,Jo(void 0,this));let s=this.records.get(bf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(zS,gn,ve.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Pe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Ti(this),r=Pn(void 0),i;try{return e()}finally{Ti(n),Pn(r)}}get(e,n=mu,r=ve.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(eS))return e[eS](this);r=Df(r);let i,s=Ti(this),o=Pn(void 0);try{if(!(r&ve.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=G2(e)&&Cf(e);l&&this.injectableDefInScope(l)?c=Jo(_v(e),Kh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ve.Self?s_():this.parent;return n=r&ve.Optional&&n===mu?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ef]=a[ef]||[]).unshift(Zt(e)),s)throw a;return m2(a,e,"R3InjectorError",this.source)}else throw a}finally{Pn(o),Ti(s)}}resolveInjectorInitializers(){let e=Pe(null),n=Ti(this),r=Pn(void 0),i;try{let s=this.get(ks,gn,ve.Self);for(let o of s)o()}finally{Ti(n),Pn(r),Pe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Zt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(e){e=Yt(e);let n=oa(e)?e:Yt(e&&e.provide),r=$2(e);if(!oa(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Jo(void 0,Kh,!0),i.factory=()=>mv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Pe(null);try{return n.value===Kh&&(n.value=U2,n.value=n.factory()),typeof n.value=="object"&&n.value&&H2(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Pe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Yt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function _v(t){let e=Cf(t),n=e!==null?e.factory:ia(t);if(n!==null)return n;if(t instanceof W)throw new re(204,!1);if(t instanceof Function)return B2(t);throw new re(204,!1)}function B2(t){if(t.length>0)throw new re(204,!1);let n=t2(t);return n!==null?()=>n.factory(t):()=>new t}function $2(t){if(iA(t))return Jo(void 0,t.useValue);{let e=sA(t);return Jo(e,Kh)}}function sA(t,e,n){let r;if(oa(t)){let i=Yt(t);return ia(i)||_v(i)}else if(iA(t))r=()=>Yt(t.useValue);else if(L2(t))r=()=>t.useFactory(...mv(t.deps||[]));else if(V2(t))r=()=>V(Yt(t.useExisting));else{let i=Yt(t&&(t.useClass||t.provide));if(q2(t))r=()=>new i(...mv(t.deps));else return ia(i)||_v(i)}return r}function Jo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function q2(t){return!!t.deps}function H2(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function G2(t){return typeof t=="function"||typeof t=="object"&&t instanceof W}function wv(t,e){for(let n of t)Array.isArray(n)?wv(n,e):n&&jS(n)?wv(n.\u0275providers,e):e(n)}function gr(t,e){t instanceof vu&&t.assertNotDestroyed();let n,r=Ti(t),i=Pn(void 0);try{return e()}finally{Ti(r),Pn(i)}}function oA(){return US()!==void 0||f2()!=null}function z2(t){if(!oA())throw new re(-203,!1)}function W2(t){return typeof t=="function"}var yn=0,Ie=1,oe=2,Pt=3,Kn=4,Xn=5,Qn=6,_u=7,Yn=8,aa=9,Zn=10,tt=11,wu=12,oS=13,fa=14,kn=15,Tf=16,Xo=17,ca=18,Sf=19,aA=20,Si=21,Xy=22,Os=23,vn=25,cA=1,Eu=6,Kr=7,rf=8,sf=9,mn=10,o_=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(o_||{});function Wr(t){return Array.isArray(t)&&typeof t[cA]=="object"}function mr(t){return Array.isArray(t)&&t[cA]===!0}function uA(t){return(t.flags&4)!==0}function Mu(t){return t.componentOffset>-1}function a_(t){return(t.flags&1)===1}function xi(t){return!!t.template}function lA(t){return(t[oe]&512)!==0}var Ev=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function dA(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ri(){return hA}function hA(t){return t.type.prototype.ngOnChanges&&(t.setInput=Q2),K2}Ri.ngInherit=!0;function K2(){let t=pA(this),e=t?.current;if(e){let n=t.previous;if(n===sa)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Q2(t,e,n,r,i){let s=this.declaredInputs[r],o=pA(t)||Y2(t,{previous:sa,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Ev(l&&l.currentValue,n,c===sa),dA(t,e,i,n)}var fA="__ngSimpleChanges__";function pA(t){return t[fA]||null}function Y2(t,e){return t[fA]=e}var aS=null;var dr=function(t,e,n){aS?.(t,e,n)},gA="svg",Z2="math",J2=!1;function X2(){return J2}function Jn(t){for(;Array.isArray(t);)t=t[yn];return t}function ej(t,e){return Jn(e[t])}function _n(t,e){return Jn(e[t.index])}function mA(t,e){return t.data[e]}function Ni(t,e){let n=e[t];return Wr(n)?n:n[yn]}function c_(t){return(t[oe]&128)===128}function tj(t){return mr(t[Pt])}function of(t,e){return e==null?null:t[e]}function yA(t){t[Xo]=0}function nj(t){t[oe]&1024||(t[oe]|=1024,c_(t)&&Iu(t))}function rj(t,e){for(;t>0;)e=e[fa],t--;return e}function u_(t){return!!(t[oe]&9216||t[Os]?.dirty)}function Iv(t){t[Zn].changeDetectionScheduler?.notify(1),u_(t)?Iu(t):t[oe]&64&&(X2()?(t[oe]|=1024,Iu(t)):t[Zn].changeDetectionScheduler?.notify())}function Iu(t){t[Zn].changeDetectionScheduler?.notify();let e=Cu(t);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!c_(e)));)e=Cu(e)}function vA(t,e){if((t[oe]&256)===256)throw new re(911,!1);t[Si]===null&&(t[Si]=[]),t[Si].push(e)}function ij(t,e){if(t[Si]===null)return;let n=t[Si].indexOf(e);n!==-1&&t[Si].splice(n,1)}function Cu(t){let e=t[Pt];return mr(e)?e[Pt]:e}var ge={lFrame:xA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function sj(){return ge.lFrame.elementDepthCount}function oj(){ge.lFrame.elementDepthCount++}function aj(){ge.lFrame.elementDepthCount--}function _A(){return ge.bindingsEnabled}function Ru(){return ge.skipHydrationRootTNode!==null}function cj(t){return ge.skipHydrationRootTNode===t}function uj(t){ge.skipHydrationRootTNode=t}function lj(){ge.skipHydrationRootTNode=null}function Qe(){return ge.lFrame.lView}function er(){return ge.lFrame.tView}function wA(t){return ge.lFrame.contextLView=t,t[Yn]}function EA(t){return ge.lFrame.contextLView=null,t}function wn(){let t=IA();for(;t!==null&&t.type===64;)t=t.parent;return t}function IA(){return ge.lFrame.currentTNode}function dj(){let t=ge.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Nu(t,e){let n=ge.lFrame;n.currentTNode=t,n.isParent=e}function CA(){return ge.lFrame.isParent}function hj(){ge.lFrame.isParent=!1}function DA(){let t=ge.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function fj(t){return ge.lFrame.bindingIndex=t}function bA(){return ge.lFrame.bindingIndex++}function pj(t){let e=ge.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function gj(){return ge.lFrame.inI18n}function mj(t,e){let n=ge.lFrame;n.bindingIndex=n.bindingRootIndex=t,Cv(e)}function yj(){return ge.lFrame.currentDirectiveIndex}function Cv(t){ge.lFrame.currentDirectiveIndex=t}function vj(t){let e=ge.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function TA(t){ge.lFrame.currentQueryIndex=t}function _j(t){let e=t[Ie];return e.type===2?e.declTNode:e.type===1?t[Xn]:null}function SA(t,e,n){if(n&ve.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ve.Host);)if(i=_j(s),i===null||(s=s[fa],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ge.lFrame=AA();return r.currentTNode=e,r.lView=t,!0}function l_(t){let e=AA(),n=t[Ie];ge.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function AA(){let t=ge.lFrame,e=t===null?null:t.child;return e===null?xA(t):e}function xA(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function MA(){let t=ge.lFrame;return ge.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var RA=MA;function d_(){let t=MA();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function wj(t){return(ge.lFrame.contextLView=rj(t,ge.lFrame.contextLView))[Yn]}function Pu(){return ge.lFrame.selectedIndex}function Fs(t){ge.lFrame.selectedIndex=t}function NA(){let t=ge.lFrame;return mA(t.tView,t.selectedIndex)}function yr(){ge.lFrame.currentNamespace=gA}function vr(){Ej()}function Ej(){ge.lFrame.currentNamespace=null}function PA(){return ge.lFrame.currentNamespace}var kA=!0;function h_(){return kA}function _r(t){kA=t}function Ij(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=hA(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function f_(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Qh(t,e,n){OA(t,e,3,n)}function Yh(t,e,n,r){(t[oe]&3)===n&&OA(t,e,n,r)}function ev(t,e){let n=t[oe];(n&3)===e&&(n&=16383,n+=1,t[oe]=n)}function OA(t,e,n,r){let i=r!==void 0?t[Xo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Xo]+=65536),(a<s||s==-1)&&(Cj(t,n,e,c),t[Xo]=(t[Xo]&4294901760)+c+2),c++}function cS(t,e){dr(4,t,e);let n=Pe(null);try{e.call(t)}finally{Pe(n),dr(5,t,e)}}function Cj(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[oe]>>14<t[Xo]>>16&&(t[oe]&3)===e&&(t[oe]+=16384,cS(a,s)):cS(a,s)}var ra=-1,Vs=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Dj(t){return t instanceof Vs}function bj(t){return(t.flags&8)!==0}function Tj(t){return(t.flags&16)!==0}function FA(t){return t!==ra}function af(t){return t&32767}function Sj(t){return t>>16}function cf(t,e){let n=Sj(t),r=e;for(;n>0;)r=r[fa],n--;return r}var Dv=!0;function uS(t){let e=Dv;return Dv=t,e}var Aj=256,VA=Aj-1,LA=5,xj=0,hr={};function Mj(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(gu)&&(r=n[gu]),r==null&&(r=n[gu]=xj++);let i=r&VA,s=1<<i;e.data[t+(i>>LA)]|=s}function uf(t,e){let n=jA(t,e);if(n!==-1)return n;let r=e[Ie];r.firstCreatePass&&(t.injectorIndex=e.length,tv(r.data,t),tv(e,null),tv(r.blueprint,null));let i=p_(t,e),s=t.injectorIndex;if(FA(i)){let o=af(i),a=cf(i,e),c=a[Ie].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function tv(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jA(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function p_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=HA(i),r===null)return ra;if(n++,i=i[fa],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ra}function bv(t,e,n){Mj(t,e,n)}function Rj(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(KS(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function UA(t,e,n){if(n&ve.Optional||t!==void 0)return t;e_(e,"NodeInjector")}function BA(t,e,n,r){if(n&ve.Optional&&r===void 0&&(r=null),!(n&(ve.Self|ve.Host))){let i=t[aa],s=Pn(void 0);try{return i?i.get(e,r,n&ve.Optional):BS(e,r,n&ve.Optional)}finally{Pn(s)}}return UA(r,e,n)}function $A(t,e,n,r=ve.Default,i){if(t!==null){if(e[oe]&2048&&!(r&ve.Self)){let o=Fj(t,e,n,r,hr);if(o!==hr)return o}let s=qA(t,e,n,r,hr);if(s!==hr)return s}return BA(e,n,r,i)}function qA(t,e,n,r,i){let s=kj(n);if(typeof s=="function"){if(!SA(e,t,r))return r&ve.Host?UA(i,n,r):BA(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ve.Optional))e_(n);else return o}finally{RA()}}else if(typeof s=="number"){let o=null,a=jA(t,e),c=ra,l=r&ve.Host?e[kn][Xn]:null;for((a===-1||r&ve.SkipSelf)&&(c=a===-1?p_(t,e):e[a+8],c===ra||!dS(r,!1)?a=-1:(o=e[Ie],a=af(c),e=cf(c,e)));a!==-1;){let d=e[Ie];if(lS(s,a,d.data)){let f=Nj(a,e,n,o,r,l);if(f!==hr)return f}c=e[a+8],c!==ra&&dS(r,e[Ie].data[a+8]===l)&&lS(s,a,e)?(o=d,a=af(c),e=cf(c,e)):a=-1}}return i}function Nj(t,e,n,r,i,s){let o=e[Ie],a=o.data[t+8],c=r==null?Mu(a)&&Dv:r!=o&&(a.type&3)!==0,l=i&ve.Host&&s===a,d=Pj(a,o,n,c,l);return d!==null?ua(e,o,d,a):hr}function Pj(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let E=o[y];if(y<c&&n===E||y>=c&&E.type===n)return y}if(i){let y=o[c];if(y&&xi(y)&&y.type===n)return c}return null}function ua(t,e,n,r){let i=t[n],s=e.data;if(Dj(i)){let o=i;o.resolving&&c2(a2(s[n]));let a=uS(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Pn(o.injectImpl):null,d=SA(t,r,ve.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Ij(n,s[n],e)}finally{l!==null&&Pn(l),uS(a),o.resolving=!1,RA()}}return i}function kj(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(gu)?t[gu]:void 0;return typeof e=="number"?e>=0?e&VA:Oj:e}function lS(t,e,n){let r=1<<t;return!!(n[e+(t>>LA)]&r)}function dS(t,e){return!(t&ve.Self)&&!(t&ve.Host&&e)}var Ps=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return $A(this._tNode,this._lView,e,Df(r),n)}};function Oj(){return new Ps(wn(),Qe())}function ku(t){return Su(()=>{let e=t.prototype.constructor,n=e[Xh]||Tv(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Xh]||Tv(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Tv(t){return OS(t)?()=>{let e=Tv(Yt(t));return e&&e()}:ia(t)}function Fj(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[oe]&2048&&!(o[oe]&512);){let a=qA(s,o,n,r|ve.Self,hr);if(a!==hr)return a;let c=s.parent;if(!c){let l=o[aA];if(l){let d=l.get(n,hr,r);if(d!==hr)return d}c=HA(o),o=o[fa]}s=c}return i}function HA(t){let e=t[Ie],n=e.type;return n===2?e.declTNode:n===1?t[Xn]:null}function g_(t){return Rj(wn(),t)}function hS(t,e=null,n=null,r){let i=GA(t,e,n,r);return i.resolveInjectorInitializers(),i}function GA(t,e=null,n=null,r,i=new Set){let s=[n||gn,r_(t)];return r=r||(typeof t=="object"?void 0:Zt(t)),new vu(s,e||s_(),r||null,i)}var wr=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return hS({name:""},i,r,"");{let s=r.name??"";return hS({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=mu,e.NULL=new nf,e.\u0275prov=ee({token:e,providedIn:"any",factory:()=>V(GS)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Vj="ngOriginalError";function nv(t){return t[Vj]}var pr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&nv(e);for(;n&&nv(n);)n=nv(n);return n||null}},zA=new W("",{providedIn:"root",factory:()=>U(pr).handleError.bind(void 0)}),m_=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Lj,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Sv=class extends m_{constructor(e){super(),this._lView=e}onDestroy(e){return vA(this._lView,e),()=>ij(this._lView,e)}};function Lj(){return new Sv(Qe())}function jj(){return Af(wn(),Qe())}function Af(t,e){return new Zr(_n(t,e))}var Zr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=jj;let t=e;return t})();var Av=class extends Ke{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,oA()&&(this.destroyRef=U(m_,{optional:!0})??void 0)}emit(e){let n=Pe(null);try{super.next(e)}finally{Pe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=rv(s),i&&(i=rv(i)),o&&(o=rv(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof it&&e.add(a),a}};function rv(t){return e=>{setTimeout(t,void 0,e)}}var Bt=Av;var Uj="ngSkipHydration",Bj="ngskiphydration";function WA(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===Bj)return!0}return!1}function KA(t){return t.hasAttribute(Uj)}function lf(t){return(t.flags&128)===128}function $j(t){if(lf(t))return!0;let e=t.parent;for(;e;){if(lf(t)||WA(e))return!0;e=e.parent}return!1}var QA=new Map,qj=0;function Hj(){return qj++}function Gj(t){QA.set(t[Sf],t)}function zj(t){QA.delete(t[Sf])}var fS="__ngContext__";function Ls(t,e){Wr(e)?(t[fS]=e[Sf],Gj(e)):t[fS]=e}function YA(t){return JA(t[wu])}function ZA(t){return JA(t[Kn])}function JA(t){for(;t!==null&&!mr(t);)t=t[Kn];return t}var xv;function XA(t){xv=t}function xf(){if(xv!==void 0)return xv;if(typeof document<"u")return document;throw new re(210,!1)}var Mf=new W("",{providedIn:"root",factory:()=>Wj}),Wj="ng",y_=new W(""),st=new W("",{providedIn:"platform",factory:()=>"unknown"});var v_=new W("",{providedIn:"root",factory:()=>xf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Kj(){let t=new $s;return U(st)==="browser"&&(t.store=Qj(xf(),U(Mf))),t}var $s=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=ee({token:e,providedIn:"root",factory:Kj});let t=e;return t})();function Qj(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var ex="h",tx="b",Mv=function(t){return t.FirstChild="f",t.NextSibling="n",t}(Mv||{}),Yj="e",Zj="t",__="c",nx="x",df="r",Jj="i",Xj="n",eU="d",tU="__nghData__",rx=tU,iv="ngh",nU="nghm",ix=()=>null;function rU(t,e,n=!1){let r=t.getAttribute(iv);if(r==null)return null;let[i,s]=r.split("|");if(r=n?s:i,!r)return null;let o=s?`|${s}`:"",a=n?i:o,c={};if(r!==""){let d=e.get($s,null,{optional:!0});d!==null&&(c=d.get(rx,[])[Number(r)])}let l={data:c,firstChild:t.firstChild??null};return n&&(l.firstChild=t,Rf(l,0,t.nextSibling)),a?t.setAttribute(iv,a):t.removeAttribute(iv),l}function iU(){ix=rU}function w_(t,e,n=!1){return ix(t,e,n)}function sU(t){let e=t._lView;return e[Ie].type===2?null:(lA(e)&&(e=e[vn]),e)}function oU(t){return t.textContent?.replace(/\s/gm,"")}function aU(t){let e=xf(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=oU(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function Rf(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function Rv(t,e){return t.segmentHeads?.[e]??null}function cU(t,e){let n=t.data,r=n[Yj]?.[e]??null;return r===null&&n[__]?.[e]&&(r=E_(t,e)),r}function sx(t,e){return t.data[__]?.[e]??null}function E_(t,e){let n=sx(t,e)??[],r=0;for(let i of n)r+=i[df]*(i[nx]??1);return r}function Nf(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[eU];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var qh=new W(""),ox=!1,ax=new W("",{providedIn:"root",factory:()=>ox}),uU=new W("");var Hh;function lU(){if(Hh===void 0&&(Hh=null,Ns.trustedTypes))try{Hh=Ns.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Hh}function pS(t){return lU()?.createScriptURL(t)||t}var hf=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${PS})`}};function Ou(t){return t instanceof hf?t.changingThisBreaksApplicationSecurity:t}function I_(t,e){let n=dU(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${PS})`)}return n===e}function dU(t){return t instanceof hf&&t.getTypeName()||null}var hU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cx(t){return t=String(t),t.match(hU)?t:"unsafe:"+t}var Pf=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Pf||{});function fU(t){let e=lx();return e?e.sanitize(Pf.URL,t)||"":I_(t,"URL")?Ou(t):cx(Xv(t))}function pU(t){let e=lx();if(e)return pS(e.sanitize(Pf.RESOURCE_URL,t)||"");if(I_(t,"ResourceURL"))return pS(Ou(t));throw new re(904,!1)}function gU(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?pU:fU}function ux(t,e,n){return gU(e,n)(t)}function lx(){let t=Qe();return t&&t[Zn].sanitizer}var mU=/^>|^->|<!--|-->|--!>|<!-$/g,yU=/(<|>)/g,vU="\u200B$1\u200B";function _U(t){return t.replace(mU,e=>e.replace(yU,vU))}function wU(t){return t.ownerDocument.body}function dx(t){return t instanceof Function?t():t}function pu(t){return(t??U(wr)).get(st)==="browser"}var Qr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Qr||{}),EU;function C_(t,e){return EU(t,e)}function ea(t,e,n,r,i){if(r!=null){let s,o=!1;mr(r)?s=r:Wr(r)&&(o=!0,r=r[yn]);let a=Jn(r);t===0&&n!==null?i==null?gx(e,n,a):ff(e,n,a,i||null,!0):t===1&&n!==null?ff(e,n,a,i||null,!0):t===2?A_(e,a,o):t===3&&e.destroyNode(a),s!=null&&VU(e,t,s,n,i)}}function D_(t,e){return t.createText(e)}function b_(t,e){return t.createComment(_U(e))}function kf(t,e,n){return t.createElement(e,n)}function IU(t,e){hx(t,e),e[yn]=null,e[Xn]=null}function CU(t,e,n,r,i,s){r[yn]=i,r[Xn]=e,Of(t,r,n,1,i,s)}function hx(t,e){e[Zn].changeDetectionScheduler?.notify(1),Of(t,e,e[tt],2,null,null)}function DU(t){let e=t[wu];if(!e)return sv(t[Ie],t);for(;e;){let n=null;if(Wr(e))n=e[wu];else{let r=e[mn];r&&(n=r)}if(!n){for(;e&&!e[Kn]&&e!==t;)Wr(e)&&sv(e[Ie],e),e=e[Pt];e===null&&(e=t),Wr(e)&&sv(e[Ie],e),n=e&&e[Kn]}e=n}}function bU(t,e,n,r){let i=mn+r,s=n.length;r>0&&(n[i-1][Kn]=e),r<s-mn?(e[Kn]=n[i],HS(n,mn+r,e)):(n.push(e),e[Kn]=null),e[Pt]=n;let o=e[Tf];o!==null&&n!==o&&TU(o,e);let a=e[ca];a!==null&&a.insertView(t),Iv(e),e[oe]|=128}function TU(t,e){let n=t[sf],i=e[Pt][Pt][kn];e[kn]!==i&&(t[oe]|=o_.HasTransplantedViews),n===null?t[sf]=[e]:n.push(e)}function fx(t,e){let n=t[sf],r=n.indexOf(e);n.splice(r,1)}function Nv(t,e){if(t.length<=mn)return;let n=mn+e,r=t[n];if(r){let i=r[Tf];i!==null&&i!==t&&fx(i,r),e>0&&(t[n-1][Kn]=r[Kn]);let s=tf(t,mn+e);IU(r[Ie],r);let o=s[ca];o!==null&&o.detachView(s[Ie]),r[Pt]=null,r[Kn]=null,r[oe]&=-129}return r}function px(t,e){if(!(e[oe]&256)){let n=e[tt];n.destroyNode&&Of(t,e,n,3,null,null),DU(e)}}function sv(t,e){if(e[oe]&256)return;let n=Pe(null);try{e[oe]&=-129,e[oe]|=256,e[Os]&&AT(e[Os]),AU(t,e),SU(t,e),e[Ie].type===1&&e[tt].destroy();let r=e[Tf];if(r!==null&&mr(e[Pt])){r!==e[Pt]&&fx(r,e);let i=e[ca];i!==null&&i.detachView(t)}zj(e)}finally{Pe(n)}}function SU(t,e){let n=t.cleanup,r=e[_u];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[_u]=null);let i=e[Si];if(i!==null){e[Si]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function AU(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Vs)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];dr(4,a,c);try{c.call(a)}finally{dr(5,a,c)}}else{dr(4,i,s);try{s.call(i)}finally{dr(5,i,s)}}}}}function xU(t,e,n){return MU(t,e.parent,n)}function MU(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[yn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===fr.None||s===fr.Emulated)return null}return _n(r,n)}}function ff(t,e,n,r,i){t.insertBefore(e,n,r,i)}function gx(t,e,n){t.appendChild(e,n)}function gS(t,e,n,r,i){r!==null?ff(t,e,n,r,i):gx(t,e,n)}function RU(t,e,n,r){t.removeChild(e,n,r)}function T_(t,e){return t.parentNode(e)}function NU(t,e){return t.nextSibling(e)}function PU(t,e,n){return OU(t,e,n)}function kU(t,e,n){return t.type&40?_n(t,n):null}var OU=kU,mS;function S_(t,e,n,r){let i=xU(t,r,e),s=e[tt],o=r.parent||e[Xn],a=PU(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)gS(s,i,n[c],a,!1);else gS(s,i,n,a,!1);mS!==void 0&&mS(s,r,e,n,i)}function Zh(t,e){if(e!==null){let n=e.type;if(n&3)return _n(e,t);if(n&4)return Pv(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Zh(t,r);{let i=t[e.index];return mr(i)?Pv(-1,i):Jn(i)}}else{if(n&32)return C_(e,t)()||Jn(t[e.index]);{let r=mx(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Cu(t[kn]);return Zh(i,r)}else return Zh(t,e.next)}}}return null}function mx(t,e){if(e!==null){let r=t[kn][Xn],i=e.projection;return r.projection[i]}return null}function Pv(t,e){let n=mn+t+1;if(n<e.length){let r=e[n],i=r[Ie].firstChild;if(i!==null)return Zh(r,i)}return e[Kr]}function A_(t,e,n){let r=T_(t,e);r&&RU(t,r,e,n)}function yx(t){t.textContent=""}function x_(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Ls(Jn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)x_(t,e,n.child,r,i,s,!1),ea(e,t,i,a,s);else if(c&32){let l=C_(n,r),d;for(;d=l();)ea(e,t,i,d,s);ea(e,t,i,a,s)}else c&16?FU(t,e,r,n,i,s):ea(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Of(t,e,n,r,i,s){x_(n,r,t.firstChild,e,i,s,!1)}function FU(t,e,n,r,i,s){let o=n[kn],c=o[Xn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];ea(e,t,i,d,s)}else{let l=c,d=o[Pt];lf(r)&&(l.flags|=128),x_(t,e,l,d,i,s,!0)}}function VU(t,e,n,r,i){let s=n[Kr],o=Jn(n);s!==o&&ea(e,t,r,s,i);for(let a=mn;a<n.length;a++){let c=n[a];Of(c[Ie],c,t,e,r,s)}}function LU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Qr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Qr.Important),t.setStyle(n,r,i,s))}}function jU(t,e,n){t.setAttribute(e,"style",n)}function vx(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function _x(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&yv(t,e,r),i!==null&&vx(t,e,i),s!==null&&jU(t,e,s)}var pa={};function _t(t=1){wx(er(),Qe(),Pu()+t,!1)}function wx(t,e,n,r){if(!r)if((e[oe]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Qh(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Yh(e,s,0,n)}Fs(n)}function _e(t,e=ve.Default){let n=Qe();if(n===null)return V(t,e);let r=wn();return $A(r,n,Yt(t),e)}function Ex(){let t="invalid";throw new Error(t)}function Ix(t,e,n,r,i,s){let o=Pe(null);try{let a=null;i&Nt.SignalBased&&(a=e[r][DT]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Nt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):dA(e,a,r,s)}finally{Pe(o)}}function UU(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Fs(~i);else{let s=i,o=n[++r],a=n[++r];mj(o,s);let c=e[s];a(2,c)}}}finally{Fs(-1)}}function Ff(t,e,n,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[yn]=i,f[oe]=r|4|128|8|64,(l!==null||t&&t[oe]&2048)&&(f[oe]|=2048),yA(f),f[Pt]=f[fa]=t,f[Yn]=n,f[Zn]=o||t&&t[Zn],f[tt]=a||t&&t[tt],f[aa]=c||t&&t[aa]||null,f[Xn]=s,f[Sf]=Hj(),f[Qn]=d,f[aA]=l,f[kn]=e.type==2?t[kn]:f,f}function Vf(t,e,n,r,i){let s=t.data[e];if(s===null)s=BU(t,e,n,r,i),gj()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=dj();s.injectorIndex=o===null?-1:o.injectorIndex}return Nu(s,!0),s}function BU(t,e,n,r,i){let s=IA(),o=CA(),a=o?s:s&&s.parent,c=t.data[e]=WU(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Cx(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Dx(t,e,n,r,i){let s=Pu(),o=r&2;try{Fs(-1),o&&e.length>vn&&wx(t,e,vn,!1),dr(o?2:0,i),n(r,i)}finally{Fs(s),dr(o?3:1,i)}}function bx(t,e,n){if(uA(e)){let r=Pe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{Pe(r)}}}function Tx(t,e,n){_A()&&(eB(t,e,n,_n(n,e)),(n.flags&64)===64&&Nx(t,e,n))}function Sx(t,e,n=_n){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Ax(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=M_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function M_(t,e,n,r,i,s,o,a,c,l,d){let f=vn+r,g=f+i,y=$U(f,g),E=typeof l=="function"?l():l;return y[Ie]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:d}}function $U(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:pa);return n}function qU(t,e,n,r){let s=r.get(ax,ox)||n===fr.ShadowDom,o=t.selectRootElement(e,s);return HU(o),o}function HU(t){xx(t)}var xx=()=>null;function GU(t){KA(t)?yx(t):aU(t)}function zU(){xx=GU}function WU(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Ru()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function yS(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Nt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?vS(r,n,l,a,c):vS(r,n,l,a)}return r}function vS(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function KU(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=n?n.get(f):null,y=g?g.inputs:null,E=g?g.outputs:null;c=yS(0,f.inputs,d,c,y),l=yS(1,f.outputs,d,l,E);let D=c!==null&&o!==null&&!n_(e)?dB(c,d,o):null;a.push(D)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function QU(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function YU(t,e,n,r,i,s,o,a){let c=_n(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(R_(t,n,d,r,i),Mu(e)&&ZU(n,e.index)):e.type&3?(r=QU(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function ZU(t,e){let n=Ni(e,t);n[oe]&16||(n[oe]|=64)}function Mx(t,e,n,r){if(_A()){let i=r===null?null:{"":-1},s=nB(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Rx(t,e,n,o,i,a),i&&rB(n,r,i)}n.mergedAttrs=yu(n.mergedAttrs,n.attrs)}function Rx(t,e,n,r,i,s){for(let l=0;l<r.length;l++)bv(uf(n,e),t,r[l].type);sB(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=Cx(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=yu(n.mergedAttrs,d.hostAttrs),oB(t,n,e,c,d),iB(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}KU(t,n,s)}function JU(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;XU(o)!=a&&o.push(a),o.push(n,r,s)}}function XU(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function eB(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Mu(n)&&aB(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||uf(n,e),Ls(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=ua(e,t,a,n);if(Ls(l,e),o!==null&&lB(e,a-i,l,c,n,o),xi(c)){let d=Ni(n.index,e);d[Yn]=ua(e,t,a,n)}}}function Nx(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=yj();try{Fs(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Cv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&tB(c,l)}}finally{Fs(-1),Cv(o)}}function tB(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function nB(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(S2(e,o.selectors,!1))if(r||(r=[]),xi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;kv(t,e,c)}else r.unshift(o),kv(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function kv(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function rB(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new re(-301,!1);r.push(e[i],s)}}}function iB(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;xi(e)&&(n[""]=t)}}function sB(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function oB(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ia(i.type,!0)),o=new Vs(s,xi(i),_e);t.blueprint[r]=o,n[r]=o,JU(t,e,r,Cx(t,n,i.hostVars,pa),i)}function aB(t,e,n){let r=_n(e,t),i=Ax(n),s=t[Zn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Lf(t,Ff(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function cB(t,e,n,r,i,s){let o=_n(t,e);uB(e[tt],o,s,t.value,n,r,i)}function uB(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Xv(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function lB(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];Ix(r,n,c,l,d,f)}}function dB(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Px(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function kx(t,e){let n=t.contentQueries;if(n!==null){let r=Pe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];TA(s),a.contentQueries(2,e[o],o)}}}finally{Pe(r)}}}function Lf(t,e){return t[wu]?t[oS][Kn]=e:t[wu]=e,t[oS]=e,e}function Ov(t,e,n){TA(0);let r=Pe(null);try{e(t,n)}finally{Pe(r)}}function hB(t){return t[_u]||(t[_u]=[])}function fB(t){return t.cleanup||(t.cleanup=[])}function Ox(t,e){let n=t[aa],r=n?n.get(pr,null):null;r&&r.handleError(e)}function R_(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];Ix(d,l,r,a,c,i)}}function pB(t,e){let n=Ni(e,t),r=n[Ie];gB(r,n);let i=n[yn];i!==null&&n[Qn]===null&&(n[Qn]=w_(i,n[aa])),N_(r,n,n[Yn])}function gB(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function N_(t,e,n){l_(e);try{let r=t.viewQuery;r!==null&&Ov(1,r,n);let i=t.template;i!==null&&Dx(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ca]?.finishViewCreation(t),t.staticContentQueries&&kx(t,e),t.staticViewQueries&&Ov(2,t.viewQuery,n);let s=t.components;s!==null&&mB(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[oe]&=-5,d_()}}function mB(t,e){for(let n=0;n<e.length;n++)pB(t,e[n])}function yB(t,e,n,r){let i=Pe(null);try{let s=e.tView,a=t[oe]&4096?4096:16,c=Ff(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Tf]=l;let d=t[ca];return d!==null&&(c[ca]=d.createEmbeddedView(s)),N_(s,c,n),c}finally{Pe(i)}}function _S(t,e){return!e||e.firstChild===null||lf(t)}function vB(t,e,n,r=!0){let i=e[Ie];if(bU(i,e,t,n),r){let o=Pv(n,t),a=e[tt],c=T_(a,t[Kr]);c!==null&&CU(i,t[Xn],a,e,c,o)}let s=e[Qn];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function pf(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Jn(s)),mr(s)&&_B(s,r);let o=n.type;if(o&8)pf(t,e,n.child,r);else if(o&32){let a=C_(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=mx(e,n);if(Array.isArray(a))r.push(...a);else{let c=Cu(e[kn]);pf(c[Ie],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function _B(t,e){for(let n=mn;n<t.length;n++){let r=t[n],i=r[Ie].firstChild;i!==null&&pf(r[Ie],r,i,e)}t[Kr]!==t[yn]&&e.push(t[Kr])}var Fx=[];function wB(t){return t[Os]??EB(t)}function EB(t){let e=Fx.pop()??Object.create(CB);return e.lView=t,e}function IB(t){t.lView[Os]!==t&&(t.lView=null,Fx.push(t))}var CB=xe(z({},bT),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Iu(t.lView)},consumerOnSignalRead(){this.lView[Os]=this}}),Vx=100;function Lx(t,e=!0,n=0){let r=t[Zn],i=r.rendererFactory,s=!1;s||i.begin?.();try{DB(t,n)}catch(o){throw e&&Ox(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function DB(t,e){Fv(t,e);let n=0;for(;u_(t);){if(n===Vx)throw new re(103,!1);n++,Fv(t,1)}}function bB(t,e,n,r){let i=e[oe];if((i&256)===256)return;let s=!1;!s&&e[Zn].inlineEffectRunner?.flush(),l_(e);let o=null,a=null;!s&&TB(t)&&(a=wB(e),o=TT(a));try{yA(e),fj(t.bindingStartIndex),n!==null&&Dx(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let f=t.preOrderCheckHooks;f!==null&&Qh(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Yh(e,f,0,null),ev(e,0)}if(SB(e),jx(e,0),t.contentQueries!==null&&kx(t,e),!s)if(c){let f=t.contentCheckHooks;f!==null&&Qh(e,f)}else{let f=t.contentHooks;f!==null&&Yh(e,f,1),ev(e,1)}UU(t,e);let l=t.components;l!==null&&Bx(e,l,0);let d=t.viewQuery;if(d!==null&&Ov(2,d,r),!s)if(c){let f=t.viewCheckHooks;f!==null&&Qh(e,f)}else{let f=t.viewHooks;f!==null&&Yh(e,f,2),ev(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Xy]){for(let f of e[Xy])f();e[Xy]=null}s||(e[oe]&=-73)}catch(c){throw Iu(e),c}finally{a!==null&&(ST(a,o),IB(a)),d_()}}function TB(t){return t.type!==2}function jx(t,e){for(let n=YA(t);n!==null;n=ZA(n))for(let r=mn;r<n.length;r++){let i=n[r];Ux(i,e)}}function SB(t){for(let e=YA(t);e!==null;e=ZA(e)){if(!(e[oe]&o_.HasTransplantedViews))continue;let n=e[sf];for(let r=0;r<n.length;r++){let i=n[r],s=i[Pt];nj(i)}}}function AB(t,e,n){let r=Ni(e,t);Ux(r,n)}function Ux(t,e){c_(t)&&Fv(t,e)}function Fv(t,e){let r=t[Ie],i=t[oe],s=t[Os],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&My(s)),s&&(s.dirty=!1),t[oe]&=-9217,o)bB(r,t,r.template,t[Yn]);else if(i&8192){jx(t,1);let a=r.components;a!==null&&Bx(t,a,1)}}function Bx(t,e,n){for(let r=0;r<e.length;r++)AB(t,e[r],n)}function P_(t){for(t[Zn].changeDetectionScheduler?.notify();t;){t[oe]|=64;let e=Cu(t);if(lA(t)&&!e)return t;t=e}return null}var js=class{get rootNodes(){let e=this._lView,n=e[Ie];return pf(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yn]}set context(e){this._lView[Yn]=e}get destroyed(){return(this._lView[oe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pt];if(mr(e)){let n=e[rf],r=n?n.indexOf(this):-1;r>-1&&(Nv(e,r),tf(n,r))}this._attachedToViewContainer=!1}px(this._lView[Ie],this._lView)}onDestroy(e){vA(this._lView,e)}markForCheck(){P_(this._cdRefInjectingView||this._lView)}detach(){this._lView[oe]&=-129}reattach(){Iv(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,Lx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,hx(this._lView[Ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e,Iv(this._lView)}},k_=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=RB;let t=e;return t})(),xB=k_,MB=class extends xB{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=yB(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new js(i)}};function RB(){return NB(wn(),Qe())}function NB(t,e){return t.type&4?new MB(e,t,Af(t,e)):null}function $x(t){let e=t[Eu]??[],r=t[Pt][tt];for(let i of e)PB(i,r);t[Eu]=gn}function PB(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[df];for(;n<i;){let s=r.nextSibling;A_(e,r,!1),r=s,n++}}}function qx(t){$x(t);for(let e=mn;e<t.length;e++)gf(t[e])}function kB(t){let e=t[Qn]?.i18nNodes;if(e){let n=t[tt];for(let r of e.values())A_(n,r,!1);t[Qn].i18nNodes=void 0}}function gf(t){kB(t);let e=t[Ie];for(let n=vn;n<e.bindingStartIndex;n++)if(mr(t[n])){let r=t[n];qx(r)}else Wr(t[n])&&gf(t[n])}function OB(t){let e=t._views;for(let n of e){let r=sU(n);if(r!==null&&r[yn]!==null)if(Wr(r))gf(r);else{let i=r[yn];gf(i),qx(r)}}}var FB=new RegExp(`^(\\d+)*(${tx}|${ex})*(.*)`);function VB(t){let e=t.match(FB),[n,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,l,d]of s.matchAll(/(f|n)(\d*)/g)){let f=parseInt(d,10)||1;a.push(l,f)}return[o,...a]}function LB(t){return!t.prev&&t.parent?.type===8}function ov(t){return t.index-vn}function jB(t,e){let n=t.i18nNodes;if(n){let r=n.get(e);return r&&n.delete(e),r}return null}function jf(t,e,n,r){let i=ov(r),s=jB(t,i);if(!s){let o=t.data[Xj];if(o?.[i])s=BB(o[i],n);else if(e.firstChild===r)s=t.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(LB(r)){let l=ov(r.parent);s=Rv(t,l)}else{let l=_n(c,n);if(a)s=l.firstChild;else{let d=ov(c),f=Rv(t,d);if(c.type===2&&f){let y=E_(t,d)+1;s=Uf(y,f)}else s=l.nextSibling}}}}return s}function Uf(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function UB(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case Mv.FirstChild:n=n.firstChild;break;case Mv.NextSibling:n=n.nextSibling;break}}return n}function BB(t,e){let[n,...r]=VB(t),i;if(n===ex)i=e[kn][yn];else if(n===tx)i=wU(e[kn][yn]);else{let s=Number(n);i=Jn(e[s+vn])}return UB(i,r)}function $B(t,e){let n=[];for(let r of e)for(let i=0;i<(r[nx]??1);i++){let s={data:r,firstChild:null};r[df]>0&&(s.firstChild=t,t=Uf(r[df],t)),n.push(s)}return[t,n]}var Hx=()=>null;function qB(t,e){let n=t[Eu];return!e||n===null||n.length===0?null:n[0].data[Jj]===e?n.shift():($x(t),null)}function HB(){Hx=qB}function wS(t,e){return Hx(t,e)}var mf=class{},Vv=class{},yf=class{};function GB(t){let e=Error(`No component factory found for ${Zt(t)}.`);return e[zB]=t,e}var zB="ngComponent";var Lv=class{resolveComponentFactory(e){throw GB(e)}},Bf=(()=>{let e=class e{};e.NULL=new Lv;let t=e;return t})(),Du=class{},Pi=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>WB();let t=e;return t})();function WB(){let t=Qe(),e=wn(),n=Ni(e.index,t);return(Wr(n)?n:t)[tt]}var KB=(()=>{let e=class e{};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),av={};var ES=new Set;function ga(t){ES.has(t)||(ES.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function IS(...t){}function QB(){let t=typeof Ns.requestAnimationFrame=="function",e=Ns[t?"requestAnimationFrame":"setTimeout"],n=Ns[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var be=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bt(!1),this.onMicrotaskEmpty=new Bt(!1),this.onStable=new Bt(!1),this.onError=new Bt(!1),typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=QB().nativeRequestAnimationFrame,JB(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new re(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,YB,IS,IS);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},YB={};function O_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ZB(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ns,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,jv(t),t.isCheckStableRunning=!0,O_(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),jv(t))}function JB(t){let e=()=>{ZB(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(XB(a))return n.invokeTask(i,s,o,a);try{return CS(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),DS(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return CS(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),DS(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,jv(t),O_(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function jv(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function CS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function DS(t){t._nesting--,O_(t)}function XB(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var ta=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ta||{}),e$={destroy(){}};function $f(t,e){!e&&z2($f);let n=e?.injector??U(wr);if(!pu(n))return e$;ga("NgAfterNextRender");let r=n.get(F_),i=r.handler??=new Bv,s=e?.phase??ta.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(m_).onDestroy(o),c=gr(n,()=>new Uv(s,()=>{o(),t()}));return i.register(c),{destroy:o}}var Uv=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=U(be),this.errorHandler=U(pr,{optional:!0}),U(mf,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Bv=class{constructor(){this.executingCallbacks=!1,this.buckets={[ta.EarlyRead]:new Set,[ta.Write]:new Set,[ta.MixedReadWrite]:new Set,[ta.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},F_=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function $v(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=YT(i,a);else if(s==2){let c=a,l=e[++o];r=YT(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var vf=class extends Bf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ai(e);return new la(n,this.ngModule)}};function bS(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function t$(t){let e=t.toLowerCase();return e==="svg"?gA:e==="math"?Z2:null}var qv=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Df(r);let i=this.injector.get(e,av,r);return i!==av||n===av?i:this.parentInjector.get(e,n,r)}},la=class extends yf{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=bS(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return bS(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=R2(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=Pe(null);try{i=i||this.ngModule;let o=i instanceof ln?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new qv(e,o):e,c=a.get(Du,null);if(c===null)throw new re(407,!1);let l=a.get(KB,null),d=a.get(F_,null),f=a.get(mf,null),g={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=c.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",D=r?qU(y,r,this.componentDef.encapsulation,a):kf(y,E,t$(E)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let k=null;D!==null&&(k=w_(D,a,!0));let $=M_(0,null,null,1,0,null,null,null,null,null,null),F=Ff(null,$,null,S,null,null,g,y,a,null,k);l_(F);let Y,ie;try{let ne=this.componentDef,I,v=null;ne.findHostDirectiveDefs?(I=[],v=new Map,ne.findHostDirectiveDefs(ne,I,v),I.push(ne)):I=[ne];let w=n$(F,D),C=r$(w,D,ne,I,F,g,y);ie=mA($,vn),D&&o$(y,ne,D,r),n!==void 0&&a$(ie,this.ngContentSelectors,n),Y=s$(C,ne,I,v,F,[c$]),N_($,F,null)}finally{d_()}return new Hv(this.componentType,Y,Af(ie,F),F,ie)}finally{Pe(s)}}},Hv=class extends Vv{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new js(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;R_(s[Ie],s,i,e,n),this.previousInputValues.set(e,n);let o=Ni(this._tNode.index,s);P_(o)}}get injector(){return new Ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function n$(t,e){let n=t[Ie],r=vn;return t[r]=e,Vf(n,r,2,"#host",null)}function r$(t,e,n,r,i,s,o){let a=i[Ie];i$(r,t,e,o);let c=null;e!==null&&(c=w_(e,i[aa]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=Ff(i,Ax(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&kv(a,t,r.length-1),Lf(i,f),i[t.index]=f}function i$(t,e,n,r){for(let i of t)e.mergedAttrs=yu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&($v(e,e.mergedAttrs,!0),n!==null&&_x(r,n,e))}function s$(t,e,n,r,i,s){let o=wn(),a=i[Ie],c=_n(o,i);Rx(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,g=ua(i,a,f,o);Ls(g,i)}Nx(a,i,o),c&&Ls(c,i);let l=ua(i,a,o.directiveStart+o.componentOffset,o);if(t[Yn]=i[Yn]=l,s!==null)for(let d of s)d(l,e);return bx(a,o,i),l}function o$(t,e,n,r){if(r)yv(t,n,["ng-version","17.3.10"]);else{let{attrs:i,classes:s}=N2(e.selectors[0]);i&&yv(t,n,i),s&&s.length>0&&vx(t,n,s.join(" "))}}function a$(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function c$(){let t=wn();f_(Qe()[Ie],t)}var Fu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=u$;let t=e;return t})();function u$(){let t=wn();return d$(t,Qe())}var l$=Fu,Gx=class extends l${constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Af(this._hostTNode,this._hostLView)}get injector(){return new Ps(this._hostTNode,this._hostLView)}get parentInjector(){let e=p_(this._hostTNode,this._hostLView);if(FA(e)){let n=cf(e,this._hostLView),r=af(e),i=n[Ie].data[r+8];return new Ps(i,n)}else return new Ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=TS(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-mn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=wS(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,_S(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!W2(e),a;if(o)a=n;else{let E=n||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}let c=o?e:new la(Ai(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let D=(o?l:this.parentInjector).get(ln,null);D&&(s=D)}let d=Ai(c.componentType??{}),f=wS(this._lContainer,d?.id??null),g=f?.firstChild??null,y=c.create(l,i,g,s);return this.insertImpl(y.hostView,a,_S(this._hostTNode,f)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(tj(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Pt],l=new Gx(c,c[Xn],c[Pt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return vB(o,i,s,r),e.attachToViewContainerRef(),HS(cv(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=TS(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Nv(this._lContainer,n);r&&(tf(cv(this._lContainer),n),px(r[Ie],r))}detach(e){let n=this._adjustIndex(e,-1),r=Nv(this._lContainer,n);return r&&tf(cv(this._lContainer),n)!=null?new js(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function TS(t){return t[rf]}function cv(t){return t[rf]||(t[rf]=[])}function d$(t,e){let n,r=e[t.index];return mr(r)?n=r:(n=Px(r,e,null,t),e[t.index]=n,Lf(e,n)),zx(n,e,t,r),new Gx(n,t,e)}function h$(t,e){let n=t[tt],r=n.createComment(""),i=_n(e,t),s=T_(n,i);return ff(n,s,r,NU(n,i),!1),r}var zx=Wx,V_=()=>!1;function f$(t,e,n){return V_(t,e,n)}function Wx(t,e,n,r){if(t[Kr])return;let i;n.type&8?i=Jn(r):i=h$(e,n),t[Kr]=i}function p$(t,e,n){if(t[Kr]&&t[Eu])return!0;let r=n[Qn],i=e.index-vn;if(!r||$j(e)||Nf(r,i))return!1;let o=Rv(r,i),a=r.data[__]?.[i],[c,l]=$B(o,a);return t[Kr]=c,t[Eu]=l,!0}function g$(t,e,n,r){V_(t,n,e)||Wx(t,e,n,r)}function m$(){zx=g$,V_=p$}function y$(t){return Object.getPrototypeOf(t.prototype).constructor}function ki(t){let e=y$(t.type),n=!0,r=[t];for(;e;){let i;if(xi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Gh(t.inputs),o.inputTransforms=Gh(t.inputTransforms),o.declaredInputs=Gh(t.declaredInputs),o.outputs=Gh(t.outputs);let a=i.hostBindings;a&&I$(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&w$(t,c),l&&E$(t,l),v$(t,i),XL(t.outputs,i.outputs),xi(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===ki&&(n=!1)}}e=Object.getPrototypeOf(e)}_$(r)}function v$(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function _$(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yu(i.hostAttrs,n=yu(n,i.hostAttrs))}}function Gh(t){return t===sa?{}:t===gn?[]:t}function w$(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function E$(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function I$(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function L_(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Mi=class{},bu=class{};var Gv=class extends Mi{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vf(this);let i=XS(e);this._bootstrapComponents=dx(i.bootstrap),this._r3Injector=GA(e,n,[{provide:Mi,useValue:this},{provide:Bf,useValue:this.componentFactoryResolver},...r],Zt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},zv=class extends bu{constructor(e){super(),this.moduleType=e}create(e){return new Gv(this.moduleType,e,[])}};var _f=class extends Mi{constructor(e){super(),this.componentFactoryResolver=new vf(this),this.instance=null;let n=new vu([...e.providers,{provide:Mi,useValue:this},{provide:Bf,useValue:this.componentFactoryResolver}],e.parent||s_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function qf(t,e,n=null){return new _f({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Vu=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Rt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Kx(t,e,n){return t[e]=n}function C$(t,e){return t[e]}function Hf(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Lu(t){return(t.flags&32)===32}function D$(t,e,n,r,i,s,o,a,c){let l=e.consts,d=Vf(e,t,4,o||null,of(l,a));Mx(e,n,d,of(l,c)),f_(e,d);let f=d.tView=M_(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function ma(t,e,n,r,i,s,o,a){let c=Qe(),l=er(),d=t+vn,f=l.firstCreatePass?D$(d,l,c,e,n,r,i,s,o):l.data[d];Nu(f,!1);let g=Qx(l,c,f,t);h_()&&S_(l,c,g,f),Ls(g,c);let y=Px(g,c,g,f);return c[d]=y,Lf(c,y),f$(y,f,c),a_(f)&&Tx(l,c,f),o!=null&&Sx(c,f,a),ma}var Qx=Yx;function Yx(t,e,n,r){return _r(!0),e[tt].createComment("")}function b$(t,e,n,r){let i=e[Qn],s=!i||Ru()||Lu(n)||Nf(i,r);if(_r(s),s)return Yx(t,e,n,r);let o=i.data[Zj]?.[r]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=jf(i,t,e,n);Rf(i,r,a);let c=E_(i,r);return Uf(c,a)}function T$(){Qx=b$}function Gf(t,e,n,r){let i=Qe(),s=bA();if(Hf(i,s,e)){let o=er(),a=NA();cB(a,i,t,e,n,r)}return Gf}function zh(t,e){return t<<17|e<<2}function Us(t){return t>>17&32767}function S$(t){return(t&2)==2}function A$(t,e){return t&131071|e<<17}function Wv(t){return t|2}function da(t){return(t&131068)>>2}function uv(t,e){return t&-131069|e<<2}function x$(t){return(t&1)===1}function Kv(t){return t|1}function M$(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Us(o),c=da(o);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||xu(f,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let g=Us(t[a+1]);t[r+1]=zh(g,a),g!==0&&(t[g+1]=uv(t[g+1],r)),t[a+1]=A$(t[a+1],r)}else t[r+1]=zh(a,0),a!==0&&(t[a+1]=uv(t[a+1],r)),a=r;else t[r+1]=zh(c,0),a===0?a=r:t[c+1]=uv(t[c+1],r),c=r;l&&(t[r+1]=Wv(t[r+1])),SS(t,d,r,!0),SS(t,d,r,!1),R$(e,d,t,r,s),o=zh(a,c),s?e.classBindings=o:e.styleBindings=o}function R$(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&xu(s,e)>=0&&(n[r+1]=Kv(n[r+1]))}function SS(t,e,n,r){let i=t[n+1],s=e===null,o=r?Us(i):da(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];N$(c,e)&&(a=!0,t[o+1]=r?Kv(l):Wv(l)),o=r?Us(l):da(l)}a&&(t[n+1]=r?Wv(i):Kv(i))}function N$(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?xu(t,e)>=0:!1}function ot(t,e,n){let r=Qe(),i=bA();if(Hf(r,i,e)){let s=er(),o=NA();YU(s,o,r,t,e,r[tt],n,!1)}return ot}function AS(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";R_(t,n,s[o],o,r)}function zf(t,e){return P$(t,e,null,!0),zf}function P$(t,e,n,r){let i=Qe(),s=er(),o=pj(2);if(s.firstUpdatePass&&O$(s,t,o,r),e!==pa&&Hf(i,o,e)){let a=s.data[Pu()];U$(s,a,i,i[tt],t,i[o+1]=B$(e,n),r,o)}}function k$(t,e){return e>=t.expandoStartIndex}function O$(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Pu()],o=k$(t,n);$$(s,r)&&e===null&&!o&&(e=!1),e=F$(i,s,e,r),M$(i,s,e,n,o,r)}}function F$(t,e,n,r){let i=vj(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=lv(null,t,e,n,r),n=Tu(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=lv(i,t,e,n,r),s===null){let c=V$(t,e,r);c!==void 0&&Array.isArray(c)&&(c=lv(null,t,e,c[1],r),c=Tu(c,e.attrs,r),L$(t,e,r,c))}else s=j$(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function V$(t,e,n){let r=n?e.classBindings:e.styleBindings;if(da(r)!==0)return t[Us(r)]}function L$(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Us(i)]=r}function j$(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Tu(r,o,n)}return Tu(r,e.attrs,n)}function lv(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Tu(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Tu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),_2(t,o,n?!0:e[++s]))}return t===void 0?null:t}function U$(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=x$(l)?xS(c,e,n,i,da(l),o):void 0;if(!wf(d)){wf(s)||S$(l)&&(s=xS(c,null,n,i,a,o));let f=ej(Pu(),n);LU(r,o,f,i,s)}}function xS(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=n[i+1];g===pa&&(g=f?gn:void 0);let y=f?Zy(g,r):d===r?g:void 0;if(l&&!wf(y)&&(y=Zy(c,r)),wf(y)&&(a=y,o))return a;let E=t[i+1];i=o?Us(E):da(E)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Zy(c,r))}return a}function wf(t){return t!==void 0}function B$(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Zt(Ou(t)))),t}function $$(t,e){return(t.flags&(e?8:16))!==0}function q$(t,e,n,r,i,s){let o=e.consts,a=of(o,i),c=Vf(e,t,2,r,a);return Mx(e,n,c,of(o,s)),c.attrs!==null&&$v(c,c.attrs,!1),c.mergedAttrs!==null&&$v(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function L(t,e,n,r){let i=Qe(),s=er(),o=vn+t,a=i[tt],c=s.firstCreatePass?q$(o,s,i,e,n,r):s.data[o],l=Zx(s,i,c,a,e,t);i[o]=l;let d=a_(c);return Nu(c,!0),_x(a,l,c),!Lu(c)&&h_()&&S_(s,i,l,c),sj()===0&&Ls(l,i),oj(),d&&(Tx(s,i,c),bx(s,c,i)),r!==null&&Sx(i,c),L}function B(){let t=wn();CA()?hj():(t=t.parent,Nu(t,!1));let e=t;cj(e)&&lj(),aj();let n=er();return n.firstCreatePass&&(f_(n,t),uA(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&bj(e)&&AS(n,e,Qe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Tj(e)&&AS(n,e,Qe(),e.stylesWithoutHost,!1),B}function ke(t,e,n,r){return L(t,e,n,r),B(),ke}var Zx=(t,e,n,r,i,s)=>(_r(!0),kf(r,i,PA()));function H$(t,e,n,r,i,s){let o=e[Qn],a=!o||Ru()||Lu(n)||Nf(o,s);if(_r(a),a)return kf(r,i,PA());let c=jf(o,t,e,n);return sx(o,s)&&Rf(o,s,c.nextSibling),o&&(WA(n)||KA(c))&&Mu(n)&&(uj(n),yx(c)),c}function G$(){Zx=H$}var z$=(t,e,n,r)=>(_r(!0),b_(e[tt],""));function W$(t,e,n,r){let i,s=e[Qn],o=!s||Ru()||Lu(n);if(_r(o),o)return b_(e[tt],"");let a=jf(s,t,e,n),c=cU(s,r);return Rf(s,r,a),i=Uf(c,a),i}function K$(){z$=W$}function Jx(){return Qe()}var Ef="en-US";var Q$=Ef;function Y$(t){typeof t=="string"&&(Q$=t.toLowerCase().replace(/_/g,"-"))}function Xx(t,e,n){let r=t[tt];switch(n){case Node.COMMENT_NODE:return b_(r,e);case Node.TEXT_NODE:return D_(r,e);case Node.ELEMENT_NODE:return kf(r,e,null)}}var Z$=(t,e,n,r)=>(_r(!0),Xx(t,n,r));function J$(t,e,n,r){return _r(!0),Xx(t,n,r)}function X$(){Z$=J$}function Er(t,e,n,r){let i=Qe(),s=er(),o=wn();return t4(s,i,i[tt],o,t,e,r),Er}function e4(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[_u],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function t4(t,e,n,r,i,s,o){let a=a_(r),l=t.firstCreatePass&&fB(t),d=e[Yn],f=hB(e),g=!0;if(r.type&3||o){let D=_n(r,e),S=o?o(D):D,k=f.length,$=o?Y=>o(Jn(Y[r.index])):r.index,F=null;if(!o&&a&&(F=e4(t,e,i,r.index)),F!==null){let Y=F.__ngLastListenerFn__||F;Y.__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,g=!1}else{s=RS(r,e,d,s,!1);let Y=n.listen(S,i,s);f.push(s,Y),l&&l.push(i,$,k,k+1)}}else s=RS(r,e,d,s,!1);let y=r.outputs,E;if(g&&y!==null&&(E=y[i])){let D=E.length;if(D)for(let S=0;S<D;S+=2){let k=E[S],$=E[S+1],ie=e[k][$].subscribe(s),ne=f.length;f.push(s,ie),l&&l.push(i,r.index,ne,-(ne+1))}}}function MS(t,e,n,r){let i=Pe(null);try{return dr(6,e,n),n(r)!==!1}catch(s){return Ox(t,s),!1}finally{dr(7,e,n),Pe(i)}}function RS(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Ni(t.index,e):e;P_(a);let c=MS(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=MS(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function j_(t=1){return wj(t)}function Q(t,e=""){let n=Qe(),r=er(),i=t+vn,s=r.firstCreatePass?Vf(r,i,1,e,null):r.data[i],o=eM(r,n,s,e,t);n[i]=o,h_()&&S_(r,n,o,s),Nu(s,!1)}var eM=(t,e,n,r,i)=>(_r(!0),D_(e[tt],r));function n4(t,e,n,r,i){let s=e[Qn],o=!s||Ru()||Lu(n)||Nf(s,i);return _r(o),o?D_(e[tt],r):jf(s,t,e,n)}function r4(){eM=n4}function i4(t,e,n){let r=er();if(r.firstCreatePass){let i=xi(t);Qv(n,r.data,r.blueprint,i,!0),Qv(e,r.data,r.blueprint,i,!1)}}function Qv(t,e,n,r,i){if(t=Yt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Qv(t[s],e,n,r,i);else{let s=er(),o=Qe(),a=wn(),c=oa(t)?t:Yt(t.provide),l=sA(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(oa(t)||!t.multi){let y=new Vs(l,i,_e),E=hv(c,e,i?d:d+g,f);E===-1?(bv(uf(a,o),s,c),dv(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[E]=y,o[E]=y)}else{let y=hv(c,e,d+g,f),E=hv(c,e,d,d+g),D=y>=0&&n[y],S=E>=0&&n[E];if(i&&!S||!i&&!D){bv(uf(a,o),s,c);let k=a4(i?o4:s4,n.length,i,r,l);!i&&S&&(n[E].providerFactory=k),dv(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),o.push(k)}else{let k=tM(n[i?E:y],l,!i&&r);dv(s,t,y>-1?y:E,k)}!i&&r&&S&&n[E].componentProviders++}}}function dv(t,e,n,r){let i=oa(e),s=j2(e);if(i||s){let c=(s?Yt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,c]):l[d+1].push(r,c)}else l.push(n,c)}}}function tM(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function hv(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function s4(t,e,n,r){return Yv(this.multi,[])}function o4(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ua(n,n[Ie],this.providerFactory.index,r);s=a.slice(0,o),Yv(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Yv(i,s);return s}function Yv(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function a4(t,e,n,r,i){let s=new Vs(t,n,_e);return s.multi=[],s.index=e,s.componentProviders=0,tM(s,i,r&&!n),s}function Wf(t,e=[]){return n=>{n.providersResolver=(r,i)=>i4(r,i?i(t):t,e)}}var c4=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=nA(!1,r.type),s=i.length>0?qf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ee({token:e,providedIn:"environment",factory:()=>new e(V(ln))});let t=e;return t})();function qt(t){ga("NgStandalone"),t.getStandaloneInjector=e=>e.get(c4).getOrCreateStandaloneInjector(t)}function Ir(t,e,n){let r=DA()+t,i=Qe();return i[r]===pa?Kx(i,r,n?e.call(n):e()):C$(i,r)}function ya(t,e,n,r){return l4(Qe(),DA(),t,e,n,r)}function u4(t,e){let n=t[e];return n===pa?void 0:n}function l4(t,e,n,r,i,s){let o=e+n;return Hf(t,o,i)?Kx(t,o+1,s?r.call(s,i):r(i)):u4(t,o+1)}var Yr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},nM=new Yr("17.3.10"),Kf=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var rM=new W("");function qs(t){return!!t&&typeof t.then=="function"}function iM(t){return!!t&&typeof t.subscribe=="function"}var Qf=new W(""),sM=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=U(Qf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(qs(o))r.push(o);else if(iM(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hs=new W("");function d4(){xT(()=>{throw new re(600,!1)})}function h4(t){return t.isBoundToModule}function f4(t,e,n){try{let r=n();return qs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Oi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(zA),this.afterRenderEffectManager=U(F_),this.externalTestViews=new Set,this.beforeRender=new Ke,this.afterTick=new Ke,this.componentTypes=[],this.components=[],this.isStable=U(Vu).hasPendingTasks.pipe(Z(r=>!r)),this._injector=U(ln)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof yf;if(!this._injector.get(sM).done){let y=!s&&JS(r),E=!1;throw new re(405,E)}let a;s?a=r:a=this._injector.get(Bf).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=h4(a)?void 0:this._injector.get(Mi),l=i||a.selector,d=a.create(wr.NULL,[],l,c),f=d.location.nativeElement,g=d.injector.get(rM,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),fv(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new re(101,!1);let i=Pe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,Pe(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===Vx)throw new re(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)p4(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Zv(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Zv(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;fv(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Hs,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>fv(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new re(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function fv(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var Wh;function U_(t){Wh??=new WeakMap;let e=Wh.get(t);if(e)return e;let n=t.isStable.pipe(pn(r=>r)).toPromise().then(()=>{});return Wh.set(t,n),t.onDestroy(()=>Wh?.delete(t)),n}function p4(t,e,n){!e&&!Zv(t)||g4(t,n,e)}function Zv(t){return u_(t)}function g4(t,e,n){let r;n?(r=0,t[oe]|=1024):t[oe]&64?r=0:r=1,Lx(t,e,r)}var Jv=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Yf=(()=>{let e=class e{compileModuleSync(r){return new zv(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=XS(r),o=dx(s.declarations).reduce((a,c)=>{let l=Ai(c);return l&&a.push(new la(l)),a},[]);return new Jv(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var m4=(()=>{let e=class e{constructor(){this.zone=U(be),this.applicationRef=U(Oi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function y4(t){return[{provide:be,useFactory:t},{provide:ks,multi:!0,useFactory:()=>{let e=U(m4,{optional:!0});return()=>e.initialize()}},{provide:ks,multi:!0,useFactory:()=>{let e=U(E4);return()=>{e.initialize()}}},{provide:zA,useFactory:v4}]}function v4(){let t=U(be),e=U(pr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function _4(t){let e=y4(()=>new be(w4(t)));return Bs([[],e])}function w4(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var E4=(()=>{let e=class e{constructor(){this.subscription=new it,this.initialized=!1,this.zone=U(be),this.pendingTasks=U(Vu)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function I4(){return typeof $localize<"u"&&$localize.locale||Ef}var B_=new W("",{providedIn:"root",factory:()=>U(B_,ve.Optional|ve.SkipSelf)||I4()});var oM=new W("");var Jh=null;function C4(t=[],e){return wr.create({name:e,providers:[{provide:bf,useValue:"platform"},{provide:oM,useValue:new Set([()=>Jh=null])},...t]})}function D4(t=[]){if(Jh)return Jh;let e=C4(t);return Jh=e,d4(),b4(e),e}function b4(t){t.get(y_,null)?.forEach(n=>n())}function $_(){return!1}var va=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=T4;let t=e;return t})();function T4(t){return S4(wn(),Qe(),(t&16)===16)}function S4(t,e,n){if(Mu(t)&&!n){let r=Ni(t.index,e);return new js(r,r)}else if(t.type&47){let r=e[kn];return new js(r,e)}return null}function aM(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=D4(r),s=[_4(),...n||[]],a=new _f({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(be);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(pr,null),d;c.runOutsideAngular(()=>{d=c.onError.subscribe({next:y=>{l.handleError(y)}})});let f=()=>a.destroy(),g=i.get(oM);return g.add(f),a.onDestroy(()=>{d.unsubscribe(),g.delete(f)}),f4(l,c,()=>{let y=a.get(sM);return y.runInitializers(),y.donePromise.then(()=>{let E=a.get(B_,Ef);Y$(E||Ef);let D=a.get(Oi);return e!==void 0&&D.bootstrap(e),D})})})}catch(e){return Promise.reject(e)}}var NS=!1,A4=!1;function x4(){NS||(NS=!0,iU(),G$(),r4(),K$(),T$(),m$(),HB(),zU(),X$())}function M4(t,e){return U_(t)}function cM(){return Bs([{provide:qh,useFactory:()=>{let t=!0;return pu()&&(t=!!U($s,{optional:!0})?.get(rx,null)),t&&ga("NgHydration"),t}},{provide:ks,useValue:()=>{A4=!!U(uU,{optional:!0}),pu()&&U(qh)&&(R4(),x4())},multi:!0},{provide:ax,useFactory:()=>pu()&&U(qh)},{provide:Hs,useFactory:()=>{if(pu()&&U(qh)){let t=U(Oi),e=U(wr);return()=>{M4(t,e).then(()=>{OB(t)})}}return()=>{}},multi:!0}])}function R4(){let t=xf(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===nU){e=n;break}if(!e)throw new re(-507,!1)}function _a(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function uM(t){let e=Ai(t);if(!e)return null;let n=new la(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var pM=null;function Xr(){return pM}function gM(t){pM??=t}var Zf=class{};var Ot=new W(""),W_=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>U(N4),providedIn:"platform"});let t=e;return t})(),mM=new W(""),N4=(()=>{let e=class e extends W_{constructor(){super(),this._doc=U(Ot),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xr().getBaseHref(this._doc)}onPopState(r){let i=Xr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Xr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function K_(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function lM(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Jr(t){return t&&t[0]!=="?"?"?"+t:t}var ei=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>U(Q_),providedIn:"root"});let t=e;return t})(),yM=new W(""),Q_=(()=>{let e=class e extends ei{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??U(Ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return K_(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Jr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Jr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Jr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(V(W_),V(yM,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vM=(()=>{let e=class e extends ei{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=K_(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Jr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Jr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(V(W_),V(yM,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),wa=(()=>{let e=class e{constructor(r){this._subject=new Bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=O4(lM(dM(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Jr(i))}normalize(r){return e.stripTrailingSlash(k4(this._basePath,dM(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Jr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Jr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Jr,e.joinWithSlash=K_,e.stripTrailingSlash=lM,e.\u0275fac=function(i){return new(i||e)(V(ei))},e.\u0275prov=ee({token:e,factory:()=>P4(),providedIn:"root"});let t=e;return t})();function P4(){return new wa(V(ei))}function k4(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function dM(t){return t.replace(/\/index.html$/,"")}function O4(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Y_(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var q_=/\s+/,hM=[],_M=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=hM,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(q_):hM}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(q_):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(q_).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(_e(Zr),_e(Pi))},e.\u0275dir=en({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Nt.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var wM=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new H_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){fM("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){fM("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(_e(Fu),_e(k_))},e.\u0275dir=en({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),H_=class{constructor(){this.$implicit=null,this.ngIf=null}};function fM(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Zt(e)}'.`)}var ti=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xt({type:e}),e.\u0275inj=Jt({});let t=e;return t})(),Z_="browser",F4="server";function J_(t){return t===Z_}function ni(t){return t===F4}var EM=(()=>{let e=class e{};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>J_(U(st))?new G_(U(Ot),window):new z_});let t=e;return t})(),G_=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=V4(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function V4(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var z_=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Jf=class{};var ep=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var xM=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(xM||{}),ew=class{constructor(e,n=MM.Ok,r="OK"){this.headers=e.headers||new ep,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var tp=class t extends ew{constructor(e={}){super(e),this.type=xM.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var MM=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(MM||{});var j4=new W("");var IM="b",CM="h",DM="s",bM="st",TM="u",SM="rt",Xf=new W(""),U4=["GET","HEAD"];function B4(t,e){let f=U(Xf),{isCacheActive:n}=f,r=cT(f,["isCacheActive"]),{transferCache:i,method:s}=t;if(!n||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!U4.includes(s)||i===!1||r.filter?.(t)===!1)return e(t);let o=U($s),a=q4(t),c=o.get(a,null),l=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(l=i.includeHeaders),c){let{[IM]:g,[SM]:y,[CM]:E,[DM]:D,[bM]:S,[TM]:k}=c,$=g;switch(y){case"arraybuffer":$=new TextEncoder().encode(g).buffer;break;case"blob":$=new Blob([g]);break}let F=new ep(E);return X(new tp({body:$,headers:F,status:D,statusText:S,url:k}))}let d=ni(U(st));return e(t).pipe($e(g=>{g instanceof tp&&d&&o.set(a,{[IM]:g.body,[CM]:$4(g.headers,l),[DM]:g.status,[bM]:g.statusText,[TM]:g.url||"",[SM]:t.responseType})}))}function $4(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function AM(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function q4(t){let{params:e,method:n,responseType:r,url:i}=t,s=AM(e),o=t.serializeBody();o instanceof URLSearchParams?o=AM(o):typeof o!="string"&&(o="");let a=[n,r,i,o,s].join("|"),c=H4(a);return c}function H4(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function RM(t){return[{provide:Xf,useFactory:()=>(ga("NgHttpTransferCache"),z({isCacheActive:!0},t))},{provide:j4,useValue:B4,multi:!0,deps:[$s,Xf]},{provide:Hs,multi:!0,useFactory:()=>{let e=U(Oi),n=U(Xf);return()=>{U_(e).then(()=>{n.isCacheActive=!1})}}}]}var rw=class extends Zf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},iw=class t extends rw{static makeCurrent(){gM(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=G4();return n==null?null:z4(n)}resetBaseElement(){ju=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Y_(document.cookie,e)}},ju=null;function G4(){return ju=ju||document.querySelector("base"),ju?ju.getAttribute("href"):null}function z4(t){return new URL(t,document.baseURI).pathname}var W4=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),sw=new W(""),OM=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new re(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(V(sw),V(be))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),np=class{constructor(e){this._doc=e}},tw="ng-app-id",FM=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ni(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${tw}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(tw),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(tw,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(V(Ot),V(Mf),V(v_,8),V(st))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),nw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cw=/%COMP%/g,VM="%COMP%",K4=`_nghost-${VM}`,Q4=`_ngcontent-${VM}`,Y4=!0,Z4=new W("",{providedIn:"root",factory:()=>Y4});function J4(t){return Q4.replace(cw,t)}function X4(t){return K4.replace(cw,t)}function LM(t,e){return e.map(n=>n.replace(cw,t))}var NM=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=ni(c),this.defaultRenderer=new Uu(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===fr.ShadowDom&&(i=xe(z({},i),{encapsulation:fr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof rp?s.applyToHost(r):s instanceof Bu&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case fr.Emulated:o=new rp(l,d,i,this.appId,f,a,c,g);break;case fr.ShadowDom:return new ow(l,d,r,i,a,c,this.nonce,g);default:o=new Bu(l,d,i,f,a,c,g);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(V(OM),V(FM),V(Mf),V(Z4),V(Ot),V(st),V(be),V(v_))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),Uu=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(nw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(PM(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(PM(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=nw[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=nw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Qr.DashCase|Qr.Important)?e.style.setProperty(n,r,i&Qr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Qr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Xr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function PM(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ow=class extends Uu{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=LM(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Bu=class extends Uu{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?LM(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},rp=class extends Bu{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=J4(l),this.hostAttr=X4(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},eq=(()=>{let e=class e extends np{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(V(Ot))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),kM=["alt","control","meta","shift"],tq={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nq={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},rq=(()=>{let e=class e extends np{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),kM.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=tq[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),kM.forEach(a=>{if(a!==s){let c=nq[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(V(Ot))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();function jM(t,e){return aM(z({rootComponent:t},iq(e)))}function iq(t){return{appProviders:[...uq,...t?.providers??[]],platformProviders:cq}}function sq(){iw.makeCurrent()}function oq(){return new pr}function aq(){return XA(document),document}var cq=[{provide:st,useValue:Z_},{provide:y_,useValue:sq,multi:!0},{provide:Ot,useFactory:aq,deps:[]}];var uq=[{provide:bf,useValue:"root"},{provide:pr,useFactory:oq,deps:[]},{provide:sw,useClass:eq,multi:!0,deps:[Ot,be,st]},{provide:sw,useClass:rq,multi:!0,deps:[Ot]},NM,FM,OM,{provide:Du,useExisting:NM},{provide:Jf,useClass:W4,deps:[]},[]];var UM=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(V(Ot))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var aw=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(aw||{});function BM(...t){let e=[],n=new Set,r=n.has(aw.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of t)n.add(s),i.length&&e.push(i);return Bs([[],cM(),n.has(aw.NoHttpTransferCache)||r?[]:RM({}),e])}var fe="primary",rl=Symbol("RouteTitle"),fw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ba(t){return new fw(t)}function dq(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function hq(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Cr(t[n],e[n]))return!1;return!0}function Cr(t,e){let n=t?pw(t):void 0,r=e?pw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!YM(t[i],e[i]))return!1;return!0}function pw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function YM(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function ZM(t){return t.length>0?t[t.length-1]:null}function Ui(t){return Hy(t)?t:qs(t)?De(Promise.resolve(t)):X(t)}var fq={exact:XM,subset:eR},JM={exact:pq,subset:gq,ignored:()=>!0};function $M(t,e,n){return fq[n.paths](t.root,e.root,n.matrixParams)&&JM[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function pq(t,e){return Cr(t,e)}function XM(t,e,n){if(!zs(t.segments,e.segments)||!op(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!XM(t.children[r],e.children[r],n))return!1;return!0}function gq(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>YM(t[n],e[n]))}function eR(t,e,n){return tR(t,e,e.segments,n)}function tR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!zs(i,n)||e.hasChildren()||!op(i,n,r))}else if(t.segments.length===n.length){if(!zs(t.segments,n)||!op(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!eR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!zs(t.segments,i)||!op(t.segments,i,r)||!t.children[fe]?!1:tR(t.children[fe],e,s,r)}}function op(t,e,n){return e.every((r,i)=>JM[n](t[i].parameters,r.parameters))}var Fi=class{constructor(e=new Oe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ba(this.queryParams),this._queryParamMap}toString(){return vq.serialize(this)}},Oe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ap(this)}},Gs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ba(this.parameters),this._parameterMap}toString(){return rR(this)}};function mq(t,e){return zs(t,e)&&t.every((n,r)=>Cr(n.parameters,e[r].parameters))}function zs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function yq(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===fe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==fe&&(n=n.concat(e(i,r)))}),n}var il=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>new Ku,providedIn:"root"});let t=e;return t})(),Ku=class{parse(e){let n=new mw(e);return new Fi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${$u(e.root,!0)}`,r=Eq(e.queryParams),i=typeof e.fragment=="string"?`#${_q(e.fragment)}`:"";return`${n}${r}${i}`}},vq=new Ku;function ap(t){return t.segments.map(e=>rR(e)).join("/")}function $u(t,e){if(!t.hasChildren())return ap(t);if(e){let n=t.children[fe]?$u(t.children[fe],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==fe&&r.push(`${i}:${$u(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=yq(t,(r,i)=>i===fe?[$u(t.children[fe],!1)]:[`${i}:${$u(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[fe]!=null?`${ap(t)}/${n[0]}`:`${ap(t)}/(${n.join("//")})`}}function nR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ip(t){return nR(t).replace(/%3B/gi,";")}function _q(t){return encodeURI(t)}function gw(t){return nR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cp(t){return decodeURIComponent(t)}function qM(t){return cp(t.replace(/\+/g,"%20"))}function rR(t){return`${gw(t.path)}${wq(t.parameters)}`}function wq(t){return Object.entries(t).map(([e,n])=>`;${gw(e)}=${gw(n)}`).join("")}function Eq(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ip(n)}=${ip(i)}`).join("&"):`${ip(n)}=${ip(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Iq=/^[^\/()?;#]+/;function uw(t){let e=t.match(Iq);return e?e[0]:""}var Cq=/^[^\/()?;=#]+/;function Dq(t){let e=t.match(Cq);return e?e[0]:""}var bq=/^[^=?&#]+/;function Tq(t){let e=t.match(bq);return e?e[0]:""}var Sq=/^[^&#]+/;function Aq(t){let e=t.match(Sq);return e?e[0]:""}var mw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[fe]=new Oe(e,n)),r}parseSegment(){let e=uw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new Gs(cp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Dq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=uw(this.remaining);i&&(r=i,this.capture(r))}e[cp(n)]=cp(r)}parseQueryParam(e){let n=Tq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Aq(this.remaining);o&&(r=o,this.capture(r))}let i=qM(n),s=qM(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=uw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=fe);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[fe]:new Oe([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function iR(t){return t.segments.length>0?new Oe([],{[fe]:t}):t}function sR(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=sR(i);if(r===fe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Oe(t.segments,e);return xq(n)}function xq(t){if(t.numberOfChildren===1&&t.children[fe]){let e=t.children[fe];return new Oe(t.segments.concat(e.segments),e.children)}return t}function Ta(t){return t instanceof Fi}function Mq(t,e,n=null,r=null){let i=oR(t);return aR(i,e,n,r)}function oR(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Oe(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=iR(r);return e??i}function aR(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return lw(i,i,i,n,r);let s=Rq(e);if(s.toRoot())return lw(i,i,new Oe([],{}),n,r);let o=Nq(s,i,t),a=o.processChildren?Gu(o.segmentGroup,o.index,s.commands):uR(o.segmentGroup,o.index,s.commands);return lw(i,o.segmentGroup,a,n,r)}function up(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Qu(t){return typeof t=="object"&&t!=null&&t.outlets}function lw(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=cR(t,e,n);let a=iR(sR(o));return new Fi(a,s,i)}function cR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=cR(s,e,n)}),new Oe(t.segments,r)}var lp=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&up(r[0]))throw new re(4003,!1);let i=r.find(Qu);if(i&&i!==ZM(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Rq(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new lp(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new lp(n,e,r)}var Ca=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Nq(t,e,n){if(t.isAbsolute)return new Ca(e,!0,0);if(!n)return new Ca(e,!1,NaN);if(n.parent===null)return new Ca(n,!0,0);let r=up(t.commands[0])?0:1,i=n.segments.length-1+r;return Pq(n,i,t.numberOfDoubleDots)}function Pq(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new Ca(r,!1,i-s)}function kq(t){return Qu(t[0])?t[0].outlets:{[fe]:t}}function uR(t,e,n){if(t??=new Oe([],{}),t.segments.length===0&&t.hasChildren())return Gu(t,e,n);let r=Oq(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Oe(t.segments.slice(0,r.pathIndex),{});return s.children[fe]=new Oe(t.segments.slice(r.pathIndex),t.children),Gu(s,0,i)}else return r.match&&i.length===0?new Oe(t.segments,{}):r.match&&!t.hasChildren()?yw(t,e,n):r.match?Gu(t,0,i):yw(t,e,n)}function Gu(t,e,n){if(n.length===0)return new Oe(t.segments,{});{let r=kq(n),i={};if(Object.keys(r).some(s=>s!==fe)&&t.children[fe]&&t.numberOfChildren===1&&t.children[fe].segments.length===0){let s=Gu(t.children[fe],e,n);return new Oe(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=uR(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Oe(t.segments,i)}}function Oq(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Qu(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!GM(c,l,o))return s;r+=2}else{if(!GM(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function yw(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Qu(s)){let c=Fq(s.outlets);return new Oe(r,c)}if(i===0&&up(n[0])){let c=t.segments[e];r.push(new Gs(c.path,HM(n[0]))),i++;continue}let o=Qu(s)?s.outlets[fe]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&up(a)?(r.push(new Gs(o,HM(a))),i+=2):(r.push(new Gs(o,{})),i++)}return new Oe(r,{})}function Fq(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=yw(new Oe([],{}),0,r))}),e}function HM(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function GM(t,e,n){return t==n.path&&Cr(e,n.parameters)}var zu="imperative",Dt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Dt||{}),On=class{constructor(e,n){this.id=e,this.url=n}},Sa=class extends On{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Dt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Dr=class extends On{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},In=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(In||{}),dp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(dp||{}),Vi=class extends On{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Li=class extends On{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Dt.NavigationSkipped}},Yu=class extends On{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hp=class extends On{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vw=class extends On{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_w=class extends On{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ww=class extends On{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ew=class extends On{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iw=class{constructor(e){this.route=e,this.type=Dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cw=class{constructor(e){this.route=e,this.type=Dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Dw=class{constructor(e){this.snapshot=e,this.type=Dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bw=class{constructor(e){this.snapshot=e,this.type=Dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tw=class{constructor(e){this.snapshot=e,this.type=Dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sw=class{constructor(e){this.snapshot=e,this.type=Dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fp=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Dt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Zu=class{},Ju=class{constructor(e){this.url=e}};var Aw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new sl,this.attachRef=null}},sl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Aw,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=xw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=xw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Mw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Mw(e,this._root).map(n=>n.value)}};function xw(t,e){if(t===e.value)return e;for(let n of e.children){let r=xw(t,n);if(r)return r}return null}function Mw(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Mw(t,n);if(r.length)return r.unshift(e),r}return[]}var En=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ia(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var gp=class extends pp{constructor(e,n){super(e),this.snapshot=n,Uw(this,e)}toString(){return this.snapshot.toString()}};function lR(t){let e=Vq(t),n=new Rt([new Gs("",{})]),r=new Rt({}),i=new Rt({}),s=new Rt({}),o=new Rt(""),a=new ji(n,r,s,o,i,fe,t,e.root);return a.snapshot=e.root,new gp(new En(a,[]),e)}function Vq(t){let e={},n={},r={},i="",s=new Xu([],e,r,i,n,fe,t,null,{});return new mp("",new En(s,[]))}var ji=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Z(l=>l[rl]))??X(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>ba(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>ba(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jw(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:z(z({},e.params),t.params),data:z(z({},e.data),t.data),resolve:z(z(z(z({},t.data),e.data),i?.data),t._resolvedData)}:r={params:z({},t.params),data:z({},t.data),resolve:z(z({},t.data),t._resolvedData??{})},i&&hR(i)&&(r.resolve[rl]=i.title),r}var Xu=class{get title(){return this.data?.[rl]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ba(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ba(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},mp=class extends pp{constructor(e,n){super(n),this.url=e,Uw(this,n)}toString(){return dR(this._root)}};function Uw(t,e){e.value._routerState=t,e.children.forEach(n=>Uw(t,n))}function dR(t){let e=t.children.length>0?` { ${t.children.map(dR).join(", ")} } `:"";return`${t.value}${e}`}function dw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Cr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Cr(e.params,n.params)||t.paramsSubject.next(n.params),hq(e.url,n.url)||t.urlSubject.next(n.url),Cr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Rw(t,e){let n=Cr(t.params,e.params)&&mq(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Rw(t.parent,e.parent))}function hR(t){return typeof t.title=="string"||t.title===null}var Bw=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new Bt,this.deactivateEvents=new Bt,this.attachEvents=new Bt,this.detachEvents=new Bt,this.parentContexts=U(sl),this.location=U(Fu),this.changeDetector=U(va),this.environmentInjector=U(ln),this.inputBinder=U(wp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Nw(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=en({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ri]});let t=e;return t})(),Nw=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ji?this.route:e===sl?this.childContexts:this.parent.get(e,n)}},wp=new W(""),zM=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=lu([i.queryParams,i.params,i.data]).pipe(ze(([o,a,c],l)=>(c=z(z(z({},o),a),c),l===0?X(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=uM(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();function Lq(t,e,n){let r=el(t,e._root,n?n._root:void 0);return new gp(r,e)}function el(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=jq(t,e,n);return new En(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>el(t,a)),o}}let r=Uq(e.value),i=e.children.map(s=>el(t,s));return new En(r,i)}}function jq(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return el(t,r,i);return el(t,r)})}function Uq(t){return new ji(new Rt(t.url),new Rt(t.params),new Rt(t.queryParams),new Rt(t.fragment),new Rt(t.data),t.outlet,t.component,t)}var fR="ngNavigationCancelingError";function pR(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ta(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=gR(!1,In.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function gR(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[fR]=!0,n.cancellationCode=e,n}function Bq(t){return mR(t)&&Ta(t.url)}function mR(t){return!!t&&t[fR]}var $q=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$t({type:e,selectors:[["ng-component"]],standalone:!0,features:[qt],decls:1,vars:0,template:function(i,s){i&1&&ke(0,"router-outlet")},dependencies:[Bw],encapsulation:2});let t=e;return t})();function qq(t,e){return t.providers&&!t._injector&&(t._injector=qf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function $w(t){let e=t.children&&t.children.map($w),n=e?xe(z({},t),{children:e}):z({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==fe&&(n.component=$q),n}function br(t){return t.outlet||fe}function Hq(t,e){let n=t.filter(r=>br(r)===e);return n.push(...t.filter(r=>br(r)!==e)),n}function ol(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Gq=(t,e,n,r)=>Z(i=>(new Pw(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Pw=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),dw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ia(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ia(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ia(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ia(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Sw(s.value.snapshot))}),e.children.length&&this.forwardEvent(new bw(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(dw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),dw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=ol(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},yp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Da=class{constructor(e,n){this.component=e,this.route=n}};function zq(t,e,n){let r=t._root,i=e?e._root:null;return qu(r,i,n,[r.value])}function Wq(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function xa(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!FS(t)?t:e.get(t):r}function qu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ia(e);return t.children.forEach(o=>{Kq(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Wu(a,n.getContext(o),i)),i}function Kq(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Qq(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new yp(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?qu(t,e,a?a.children:null,r,i):qu(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Da(a.outlet.component,o))}else o&&Wu(e,a,i),i.canActivateChecks.push(new yp(r)),s.component?qu(t,null,a?a.children:null,r,i):qu(t,null,n,r,i);return i}function Qq(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!zs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!zs(t.url,e.url)||!Cr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rw(t,e)||!Cr(t.queryParams,e.queryParams);case"paramsChange":default:return!Rw(t,e)}}function Wu(t,e,n){let r=Ia(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Wu(o,e.children.getContext(s),n):Wu(o,null,n):Wu(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Da(e.outlet.component,i)):n.canDeactivateChecks.push(new Da(null,i)):n.canDeactivateChecks.push(new Da(null,i))}function al(t){return typeof t=="function"}function Yq(t){return typeof t=="boolean"}function Zq(t){return t&&al(t.canLoad)}function Jq(t){return t&&al(t.canActivate)}function Xq(t){return t&&al(t.canActivateChild)}function eH(t){return t&&al(t.canDeactivate)}function tH(t){return t&&al(t.canMatch)}function yR(t){return t instanceof Gr||t?.name==="EmptyError"}var sp=Symbol("INITIAL_VALUE");function Aa(){return ze(t=>lu(t.map(e=>e.pipe(zr(1),Rs(sp)))).pipe(Z(e=>{for(let n of e)if(n!==!0){if(n===sp)return sp;if(n===!1||n instanceof Fi)return n}return!0}),Ct(e=>e!==sp),zr(1)))}function nH(t,e){return ht(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?X(xe(z({},n),{guardsResult:!0})):rH(o,r,i,t).pipe(ht(a=>a&&Yq(a)?iH(r,s,t,e):X(a)),Z(a=>xe(z({},n),{guardsResult:a})))})}function rH(t,e,n,r){return De(t).pipe(ht(i=>uH(i.component,i.route,n,e,r)),pn(i=>i!==!0,!0))}function iH(t,e,n,r){return De(e).pipe(Di(i=>Wo(oH(i.route.parent,r),sH(i.route,r),cH(t,i.path,n),aH(t,i.route,n))),pn(i=>i!==!0,!0))}function sH(t,e){return t!==null&&e&&e(new Tw(t)),X(!0)}function oH(t,e){return t!==null&&e&&e(new Dw(t)),X(!0)}function aH(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(s=>Lh(()=>{let o=ol(e)??n,a=xa(s,o),c=Jq(a)?a.canActivate(e,t):gr(o,()=>a(e,t));return Ui(c).pipe(pn())}));return X(i).pipe(Aa())}function cH(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Wq(o)).filter(o=>o!==null).map(o=>Lh(()=>{let a=o.guards.map(c=>{let l=ol(o.node)??n,d=xa(c,l),f=Xq(d)?d.canActivateChild(r,t):gr(l,()=>d(r,t));return Ui(f).pipe(pn())});return X(a).pipe(Aa())}));return X(s).pipe(Aa())}function uH(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return X(!0);let o=s.map(a=>{let c=ol(e)??i,l=xa(a,c),d=eH(l)?l.canDeactivate(t,e,n,r):gr(c,()=>l(t,e,n,r));return Ui(d).pipe(pn())});return X(o).pipe(Aa())}function lH(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let s=i.map(o=>{let a=xa(o,t),c=Zq(a)?a.canLoad(e,n):gr(t,()=>a(e,n));return Ui(c)});return X(s).pipe(Aa(),vR(r))}function vR(t){return Ly($e(e=>{if(Ta(e))throw pR(t,e)}),Z(e=>e===!0))}function dH(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let s=i.map(o=>{let a=xa(o,t),c=tH(a)?a.canMatch(e,n):gr(t,()=>a(e,n));return Ui(c)});return X(s).pipe(Aa(),vR(r))}var tl=class{constructor(e){this.segmentGroup=e||null}},vp=class extends Error{constructor(e){super(),this.urlTree=e}};function Ea(t){return zo(new tl(t))}function hH(t){return zo(new re(4e3,!1))}function fH(t){return zo(gR(!1,In.GuardRejected))}var kw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[fe])return hH(e.redirectTo);i=i.children[fe]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new vp(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Fi(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Oe(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Ow={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pH(t,e,n,r,i){let s=qw(t,e,n);return s.matched?(r=qq(e,r),dH(r,e,n,i).pipe(Z(o=>o===!0?s:z({},Ow)))):X(s)}function qw(t,e,n){if(e.path==="**")return gH(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?z({},Ow):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||dq)(n,t,e);if(!i)return z({},Ow);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?z(z({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function gH(t){return{matched:!0,parameters:t.length>0?ZM(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function WM(t,e,n,r){return n.length>0&&vH(t,n,r)?{segmentGroup:new Oe(e,yH(r,new Oe(n,t.children))),slicedSegments:[]}:n.length===0&&_H(t,n,r)?{segmentGroup:new Oe(t.segments,mH(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Oe(t.segments,t.children),slicedSegments:n}}function mH(t,e,n,r){let i={};for(let s of n)if(Ep(t,e,s)&&!r[br(s)]){let o=new Oe([],{});i[br(s)]=o}return z(z({},r),i)}function yH(t,e){let n={};n[fe]=e;for(let r of t)if(r.path===""&&br(r)!==fe){let i=new Oe([],{});n[br(r)]=i}return n}function vH(t,e,n){return n.some(r=>Ep(t,e,r)&&br(r)!==fe)}function _H(t,e,n){return n.some(r=>Ep(t,e,r))}function Ep(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function wH(t,e,n,r){return br(t)!==r&&(r===fe||!Ep(e,n,t))?!1:qw(e,t,n).matched}function EH(t,e,n){return e.length===0&&!t.children[n]}var Fw=class{};function IH(t,e,n,r,i,s,o="emptyOnly"){return new Vw(t,e,n,r,i,o,s).recognize()}var CH=31,Vw=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new kw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=WM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(n=>{let r=new Xu([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,{},fe,this.rootComponentType,null,{}),i=new En(r,n),s=new mp("",i),o=Mq(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,fe).pipe(Ci(r=>{if(r instanceof vp)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof tl?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=jw(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(Z(s=>s instanceof En?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return De(i).pipe(Di(s=>{let o=r.children[s],a=Hq(n,s);return this.processSegmentGroup(e,a,o,s)}),lr((s,o)=>(s.push(...o),s)),bi(null),Wy(),ht(s=>{if(s===null)return Ea(r);let o=_R(s);return DH(o),X(o)}))}processSegment(e,n,r,i,s,o){return De(n).pipe(Di(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Ci(c=>{if(c instanceof tl)return X(null);throw c}))),pn(a=>!!a),Ci(a=>{if(yR(a))return EH(r,i,s)?X(new Fw):Ea(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return wH(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Ea(i):Ea(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=qw(n,i,s);if(!a)return Ea(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>CH&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(ht(g=>this.processSegment(e,r,n,g.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=pH(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(ze(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ze(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:g}=a,y=new Xu(d,g,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,TH(r),br(r),r.component??r._loadedComponent??null,r,SH(r)),{segmentGroup:E,slicedSegments:D}=WM(n,d,f,c);if(D.length===0&&E.hasChildren())return this.processChildren(l,c,E).pipe(Z(k=>k===null?null:new En(y,k)));if(c.length===0&&D.length===0)return X(new En(y,[]));let S=br(r)===s;return this.processSegment(l,c,E,D,S?fe:s,!0).pipe(Z(k=>new En(y,k instanceof En?[k]:[])))}))):Ea(n)))}getChildConfig(e,n,r){return n.children?X({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?X({routes:n._loadedRoutes,injector:n._loadedInjector}):lH(e,n,r,this.urlSerializer).pipe(ht(i=>i?this.configLoader.loadChildren(e,n).pipe($e(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):fH(n))):X({routes:[],injector:e})}};function DH(t){t.sort((e,n)=>e.value.outlet===fe?-1:n.value.outlet===fe?1:e.value.outlet.localeCompare(n.value.outlet))}function bH(t){let e=t.value.routeConfig;return e&&e.path===""}function _R(t){let e=[],n=new Set;for(let r of t){if(!bH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=_R(r.children);e.push(new En(r.value,i))}return e.filter(r=>!n.has(r))}function TH(t){return t.data||{}}function SH(t){return t.resolve||{}}function AH(t,e,n,r,i,s){return ht(o=>IH(t,e,n,r,o.extractedUrl,i,s).pipe(Z(({state:a,tree:c})=>xe(z({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function xH(t,e){return ht(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return X(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of wR(c))o.add(l);let a=0;return De(o).pipe(Di(c=>s.has(c)?MH(c,r,t,e):(c.data=jw(c,c.parent,t).resolve,X(void 0))),$e(()=>a++),Yo(1),ht(c=>a===o.size?X(n):Qt))})}function wR(t){let e=t.children.map(n=>wR(n)).flat();return[t,...e]}function MH(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!hR(i)&&(s[rl]=i.title),RH(s,t,e,r).pipe(Z(o=>(t._resolvedData=o,t.data=jw(t,t.parent,n).resolve,null)))}function RH(t,e,n,r){let i=pw(t);if(i.length===0)return X({});let s={};return De(i).pipe(ht(o=>NH(t[o],e,n,r).pipe(pn(),$e(a=>{s[o]=a}))),Yo(1),zy(s),Ci(o=>yR(o)?Qt:zo(o)))}function NH(t,e,n,r){let i=ol(e)??r,s=xa(t,i),o=s.resolve?s.resolve(e,n):gr(i,()=>s(e,n));return Ui(o)}function hw(t){return ze(e=>{let n=t(e);return n?De(n).pipe(Z(()=>e)):X(e)})}var ER=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===fe);return i}getResolvedTitleForRoute(r){return r.data[rl]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>U(PH),providedIn:"root"});let t=e;return t})(),PH=(()=>{let e=class e extends ER{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(V(UM))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cl=new W("",{providedIn:"root",factory:()=>({})}),nl=new W(""),Hw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(Yf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return X(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ui(r.loadComponent()).pipe(Z(IR),$e(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Qo(()=>{this.componentLoaders.delete(r)})),s=new Bo(i,()=>new Ke).pipe(Uo());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return X({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=kH(i,this.compiler,r,this.onLoadEndListener).pipe(Qo(()=>{this.childrenLoaders.delete(i)})),a=new Bo(o,()=>new Ke).pipe(Uo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kH(t,e,n,r){return Ui(t.loadChildren()).pipe(Z(IR),ht(i=>i instanceof bu||Array.isArray(i)?X(i):De(e.compileModuleAsync(i))),Z(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(nl,[],{optional:!0,self:!0}).flat()),{routes:o.map($w),injector:s}}))}function OH(t){return t&&typeof t=="object"&&"default"in t}function IR(t){return OH(t)?t.default:t}var Gw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>U(FH),providedIn:"root"});let t=e;return t})(),FH=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),CR=new W(""),DR=new W("");function VH(t,e,n){let r=t.get(DR),i=t.get(Ot);return t.get(be).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),LH(t))),{onViewTransitionCreated:c}=r;return c&&gr(t,()=>c({transition:a,from:e,to:n})),o})}function LH(t){return new Promise(e=>{$f(e,{injector:t})})}var zw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ke,this.transitionAbortSubject=new Ke,this.configLoader=U(Hw),this.environmentInjector=U(ln),this.urlSerializer=U(il),this.rootContexts=U(sl),this.location=U(wa),this.inputBindingEnabled=U(wp,{optional:!0})!==null,this.titleStrategy=U(ER),this.options=U(cl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(Gw),this.createViewTransition=U(CR,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Iw(s)),i=s=>this.events.next(new Cw(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(xe(z(z({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Rt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:zu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ct(o=>o.id!==0),Z(o=>xe(z({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ze(o=>{let a=!1,c=!1;return X(o).pipe(ze(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",In.SupersededByNewNavigation),Qt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?xe(z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new Li(l.id,this.urlSerializer.serialize(l.rawUrl),g,dp.IgnoredSameUrlNavigation)),l.resolve(null),Qt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return X(l).pipe(ze(g=>{let y=this.transitions?.getValue();return this.events.next(new Sa(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?Qt:Promise.resolve(g)}),AH(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),$e(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=xe(z({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new hp(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:y,source:E,restoredState:D,extras:S}=l,k=new Sa(g,this.urlSerializer.serialize(y),E,D);this.events.next(k);let $=lR(this.rootComponentType).snapshot;return this.currentTransition=o=xe(z({},l),{targetSnapshot:$,urlAfterRedirects:y,extras:xe(z({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,X(o)}else{let g="";return this.events.next(new Li(l.id,this.urlSerializer.serialize(l.extractedUrl),g,dp.IgnoredByUrlHandlingStrategy)),l.resolve(null),Qt}}),$e(l=>{let d=new vw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Z(l=>(this.currentTransition=o=xe(z({},l),{guards:zq(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),nH(this.environmentInjector,l=>this.events.next(l)),$e(l=>{if(o.guardsResult=l.guardsResult,Ta(l.guardsResult))throw pR(this.urlSerializer,l.guardsResult);let d=new _w(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Ct(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",In.GuardRejected),!1)),hw(l=>{if(l.guards.canActivateChecks.length)return X(l).pipe($e(d=>{let f=new ww(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),ze(d=>{let f=!1;return X(d).pipe(xH(this.paramsInheritanceStrategy,this.environmentInjector),$e({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",In.NoDataFromResolver)}}))}),$e(d=>{let f=new Ew(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),hw(l=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe($e(y=>{f.component=y}),Z(()=>{})));for(let y of f.children)g.push(...d(y));return g};return lu(d(l.targetSnapshot.root)).pipe(bi(null),zr(1))}),hw(()=>this.afterPreactivation()),ze(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?De(f).pipe(Z(()=>o)):X(o)}),Z(l=>{let d=Lq(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=xe(z({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),$e(()=>{this.events.next(new Zu)}),Gq(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),zr(1),$e({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Dr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Zo(this.transitionAbortSubject.pipe($e(l=>{throw l}))),Qo(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",In.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ci(l=>{if(c=!0,mR(l))this.events.next(new Vi(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Bq(l)?this.events.next(new Ju(l.url)):o.resolve(!1);else{this.events.next(new Yu(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Qt}))}))}cancelNavigationTransition(r,i,s){let o=new Vi(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jH(t){return t!==zu}var UH=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>U(BH),providedIn:"root"});let t=e;return t})(),Lw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},BH=(()=>{let e=class e extends Lw{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ku(e)))(s||e)}})(),e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:()=>U($H),providedIn:"root"});let t=e;return t})(),$H=(()=>{let e=class e extends bR{constructor(){super(...arguments),this.location=U(wa),this.urlSerializer=U(il),this.options=U(cl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(Gw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Fi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=lR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Sa)this.stateMemento=this.createStateMemento();else if(r instanceof Li)this.rawUrlTree=i.initialUrl;else if(r instanceof hp){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Zu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Vi&&(r.code===In.GuardRejected||r.code===In.NoDataFromResolver)?this.restoreHistory(i):r instanceof Yu?this.restoreHistory(i,!0):r instanceof Dr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=z(z({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=z(z({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ku(e)))(s||e)}})(),e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Hu||{});function TR(t,e){t.events.pipe(Ct(n=>n instanceof Dr||n instanceof Vi||n instanceof Yu||n instanceof Li),Z(n=>n instanceof Dr||n instanceof Li?Hu.COMPLETE:(n instanceof Vi?n.code===In.Redirect||n.code===In.SupersededByNewNavigation:!1)?Hu.REDIRECTING:Hu.FAILED),Ct(n=>n!==Hu.REDIRECTING),zr(1)).subscribe(()=>{e()})}function qH(t){throw t}var HH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Cn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=U(Kf),this.stateManager=U(bR),this.options=U(cl,{optional:!0})||{},this.pendingTasks=U(Vu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(zw),this.urlSerializer=U(il),this.location=U(wa),this.urlHandlingStrategy=U(Gw),this._events=new Ke,this.errorHandler=this.options.errorHandler||qH,this.navigated=!1,this.routeReuseStrategy=U(UH),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(nl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(wp,{optional:!0}),this.eventsSubscription=new it,this.isNgZoneEnabled=U(be)instanceof be&&be.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Vi&&i.code!==In.Redirect&&i.code!==In.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Dr)this.navigated=!0;else if(i instanceof Ju){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||jH(s.source)};this.scheduleNavigation(a,zu,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}WH(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=z({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map($w),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=z(z({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let y=s?s.snapshot:this.routerState.snapshot.root;g=oR(y)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),g=this.currentUrlTree.root}return aR(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Ta(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,zu,null,i)}navigate(r,i={skipLocationChange:!1}){return zH(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=z({},HH):i===!1?s=z({},GH):s=i,Ta(r))return $M(this.currentUrlTree,r,s);let o=this.parseUrl(r);return $M(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,y)=>{c=g,l=y});let f=this.pendingTasks.add();return TR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zH(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new re(4008,!1)}function WH(t){return!(t instanceof Zu)&&!(t instanceof Ju)}var Ma=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new Ke,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(d=>{d instanceof Dr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:ux(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(_e(Cn),_e(ji),g_("tabindex"),_e(Pi),_e(Zr),_e(ei))},e.\u0275dir=en({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Er("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Gf("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Nt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",_a],skipLocationChange:[Nt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",_a],replaceUrl:[Nt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",_a],routerLink:"routerLink"},standalone:!0,features:[L_,Ri]});let t=e;return t})();var _p=class{};var KH=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ct(r=>r instanceof Dr),Di(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=qf(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return De(s).pipe(Ii())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=X(null);let o=s.pipe(ht(a=>a===null?X(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return De([o,a]).pipe(Ii())}else return o})}};e.\u0275fac=function(i){return new(i||e)(V(Cn),V(Yf),V(ln),V(_p),V(Hw))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),SR=new W(""),QH=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=U(ln),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Sa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Dr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Li&&r.code===dp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof fp&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>N(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),$f(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new fp(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Ex()},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();function AR(t,...e){return Bs([{provide:nl,multi:!0,useValue:t},[],{provide:ji,useFactory:xR,deps:[Cn]},{provide:Hs,multi:!0,useFactory:MR},e.map(n=>n.\u0275providers)])}function xR(t){return t.routerState.root}function ul(t,e){return{\u0275kind:t,\u0275providers:e}}function MR(){let t=U(wr);return e=>{let n=t.get(Oi);if(e!==n.components[0])return;let r=t.get(Cn),i=t.get(RR);t.get(Ww)===1&&r.initialNavigation(),t.get(NR,null,ve.Optional)?.setUpPreloading(),t.get(SR,null,ve.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var RR=new W("",{factory:()=>new Ke}),Ww=new W("",{providedIn:"root",factory:()=>1});function YH(){return ul(2,[{provide:Ww,useValue:0},{provide:Qf,multi:!0,deps:[wr],useFactory:e=>{let n=e.get(mM,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Cn),s=e.get(RR);TR(i,()=>{r(!0)}),e.get(zw).afterPreactivation=()=>(r(!0),s.closed?X(void 0):s),i.initialNavigation()}))}}])}function ZH(){return ul(3,[{provide:Qf,multi:!0,useFactory:()=>{let e=U(Cn);return()=>{e.setUpLocationChangeListener()}}},{provide:Ww,useValue:2}])}var NR=new W("");function JH(t){return ul(0,[{provide:NR,useExisting:KH},{provide:_p,useExisting:t}])}function XH(){return ul(8,[zM,{provide:wp,useExisting:zM}])}function eG(t){let e=[{provide:CR,useValue:VH},{provide:DR,useValue:z({skipNextTransition:!!t?.skipInitialTransition},t)}];return ul(9,e)}var KM=new W("ROUTER_FORROOT_GUARD"),tG=[wa,{provide:il,useClass:Ku},Cn,sl,{provide:ji,useFactory:xR,deps:[Cn]},Hw,[]],Ra=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[tG,[],{provide:nl,multi:!0,useValue:r},{provide:KM,useFactory:sG,deps:[[Cn,new Au,new qS]]},{provide:cl,useValue:i||{}},i?.useHash?rG():iG(),nG(),i?.preloadingStrategy?JH(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?oG(i):[],i?.bindToComponentInputs?XH().\u0275providers:[],i?.enableViewTransitions?eG().\u0275providers:[],aG()]}}static forChild(r){return{ngModule:e,providers:[{provide:nl,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(V(KM,8))},e.\u0275mod=Xt({type:e}),e.\u0275inj=Jt({});let t=e;return t})();function nG(){return{provide:SR,useFactory:()=>{let t=U(EM),e=U(be),n=U(cl),r=U(zw),i=U(il);return n.scrollOffset&&t.setOffset(n.scrollOffset),new QH(i,r,t,e,n)}}}function rG(){return{provide:ei,useClass:vM}}function iG(){return{provide:ei,useClass:Q_}}function sG(t){return"guarded"}function oG(t){return[t.initialNavigation==="disabled"?ZH().\u0275providers:[],t.initialNavigation==="enabledBlocking"?YH().\u0275providers:[]]}var QM=new W("");function aG(){return[{provide:QM,useFactory:MR},{provide:Hs,multi:!0,useExisting:QM}]}var cG=()=>["/contact"],PR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$t({type:e,selectors:[["app-homepage"]],standalone:!0,features:[qt],decls:19,vars:2,consts:[[1,"bg-white","px-3","py-6","text-gray-700","screen-size"],[1,"flex","flex-col","mx-auto","mt-4","max-w-[92.5rem]","lg:justify-center","lg:items-center"],[1,"p-10","mx-auto"],["src","../../assets/me.png","alt","Developer",1,"w-[15rem]","bg-red-100","gray-scale","object-cover","rounded-full","mb-10"],[1,"flex","flex-col","px-6"],[1,"text-5xl","md:text-[4rem]","leading-[4rem]","text-center","text-gray-800","font-bold"],[1,"text-orange-600"],[1,"text-2xl","mx-auto","text-center","text-gray-600","mt-10","md:mt-[2rem]","md:my-4"],[1,"text-left","tex-md","mx-auto","px-0","md:text-xl","md:max-w-[50rem]","mt-4","text-gray-600"],[1,"flex","flex-col","w-[60%]","md:w-fit","mb-5","mx-auto","md:flex-row","space-y-3","md:space-y-0","mt-10"],["href","javascript:void(0)",1,"bg-black","text-white","py-3","px-10","rounded-lg","text-lg","font-semibold",3,"routerLink"],["href","../../assets/Stranger.pdf","download","",1,"bg-transparent","text-black","py-3","px-4","rounded-lg","text-lg","font-semibold","ml-4"]],template:function(i,s){i&1&&(L(0,"div",0)(1,"div",1)(2,"div",2),ke(3,"img",3),B(),L(4,"div",4)(5,"h1",5),Q(6," Hello there, I'm "),L(7,"span",6),Q(8,"Stranger"),B()(),L(9,"h3",7),Q(10," Software Developer | Node.js | Angular | GraphQL | TypeScript | Postgres "),B(),L(11,"p",8),Q(12," I'm a curious and adaptable software engineer who enjoys solving real-world problems through clean, scalable code. I'm passionate about continuous learning, mentoring, and building tools that make a real impact. I thrive in collaborative teams and bring a strong mix of technical depth and a user-focused mindset. "),ke(13,"br"),B(),L(14,"div",9)(15,"a",10),Q(16,"Hire me"),B(),L(17,"a",11),Q(18,"Download CV"),B()()()()()),i&2&&(_t(15),ot("routerLink",Ir(1,cG)))},dependencies:[Ra,Ma,ti],styles:[".screen-size[_ngcontent-%COMP%]{height:calc(100vh - 180px)}.gray-scale[_ngcontent-%COMP%]{-webkit-filter:grayscale(100%);filter:grayscale(100%);transition:filter .5s ease-in-out}.gray-scale[_ngcontent-%COMP%]:hover{-webkit-filter:grayscale(0%);filter:grayscale(0%)}"]});let t=e;return t})();var kR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$t({type:e,selectors:[["app-about"]],standalone:!0,features:[qt],decls:41,vars:0,consts:[[1,"max-w-6xl","mt-10","p-4","mx-auto"],[1,"flex","flex-col-reverse","md:flex-row","mx-auto","justify-center","md:mt-10"],[1,"p-4","lg:w-[60%]","lg:pr-[4rem]"],[1,"p-6","mt-5","shadow-lg","cursor-pointer","group","hover:bg-gray-700","hover:text-white","duration-300","rounded-md","mb-6"],[1,"text-2xl","text-black","group-hover:text-white","font-semibold"],[1,"text-md","text-black","group-hover:text-white","mt-3","text-lg"],["href","https://www.ul.ac.za/","target","_blank",1,"hover:underline"],[1,"text-gray-400","group-hover:font-semibold","text-xs","block","mt-3"],[1,"text-2xl","my-6","font-semibold"],[1,"text-md","mt-4"],[1,"mt-4"],[1,"flex","flex-col-reverse","justify-center","lg:flex-row","p-10","lg:w-[40%]","mx-auto","max-w-96","lg:max-w-max","md:mx-0","lg:bg-white","lg:rounded-lg","border-lg:shadow-lg","lg:relative"],[1,"flex","flex-col"],[1,"p-4","bg-pink-200","rounded-full","overflow-hidden"],["src","../../assets/me.png","alt","",1,"object-cover"],[1,"mt-[3rem]","lg:hidden"],[1,"flex","justify-between","items-center"],["src","../../assets/node.png","alt","a",1,"w-[2rem]"],["src","../../assets/ts.png","alt","a",1,"w-[2rem]"],["src","../../assets/javascript.png","alt","a",1,"w-[2rem]"],["src","../../assets/angular.png","alt","a",1,"w-[2rem]"],["src","../../assets/graphql.png","alt","a",1,"w-[2rem]"],["src","../../assets/psql.png","alt","a",1,"w-[2rem]"],["src","../../assets/aws.png","alt","a",1,"w-[2rem]"],[1,"hidden","lg:flex","languages"],["src","../../assets/node.png","alt","a",1,"absolute","top-[20rem]","left-[14rem]","w-[5rem]"],["src","../../assets/ts.png","alt","a",1,"absolute","top-[-0rem]","right-[-0rem]","w-[5rem]"],["src","../../assets/javascript.png","alt","a",1,"absolute","top-[10rem]","right-[rem]","w-[5rem]"],["src","../../assets/angular.png","alt","a",1,"absolute","top-[0rem]","right-[22rem]","w-[5rem]"],["src","../../assets/graphql.png","alt","a",1,"absolute","top-[2rem]","right-[12rem]","w-[5rem]"],["src","../../assets/psql.png","alt","a",1,"absolute","top-[20rem]","right-[22rem]","w-[5rem]"],["src","../../assets/aws.png","alt","a",1,"absolute","top-[12rem]","right-[2rem]","w-[5rem]"]],template:function(i,s){i&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Q(5," Education "),B(),L(6,"p",5),Q(7," BSc. Mathematical Science, "),L(8,"a",6),Q(9,"University of Limpopo"),B(),L(10,"span",7),Q(11," 2015 - 2018"),B()()(),L(12,"h2",8),Q(13,"About me"),B(),L(14,"p",9),Q(15," I am a passionate and dedicated software developer with 4 years of professional experience in creating and maintaining web applications. My expertise lies in full-stack development, with honed skills in both front-end and back-end technologies. I have a strong foundation in JavaScript, Node.js, GraphQL, TypeScript, and frameworks such as Angular, Next.js, and Nest.js, enabling me to build robust and scalable applications. "),B(),L(16,"div",10),Q(17," Beyond technical skills, I am committed to continuous learning and knowledge sharing. I actively contribute to team discussions, mentor junior developers, and stay updated with the latest industry trends. My goal is to not only write clean and maintainable code but also to drive innovation and efficiency within the development team. "),B(),L(18,"div",10),Q(19," In my free time, I love exploring new technologies, cooking, watching anime, playing games, and studying subjects like Astronomy, Blockchain, and AI. Additionally, I am an aspiring entrepreneur, passionate about making positive impact through technology and innovation. "),B()(),L(20,"div",11)(21,"div",12)(22,"div",13),ke(23,"img",14),B(),L(24,"div",15)(25,"div",16),ke(26,"img",17)(27,"img",18)(28,"img",19)(29,"img",20)(30,"img",21)(31,"img",22)(32,"img",23),B()()(),L(33,"div",24),ke(34,"img",25)(35,"img",26)(36,"img",27)(37,"img",28)(38,"img",29)(39,"img",30)(40,"img",31),B()()()())}});let t=e;return t})();var $R=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(_e(Pi),_e(Zr))},e.\u0275dir=en({type:e});let t=e;return t})(),uG=(()=>{let e=class e extends $R{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ku(e)))(s||e)}})(),e.\u0275dir=en({type:e,features:[ki]});let t=e;return t})(),qR=new W("");var lG={provide:qR,useExisting:ha(()=>Rp),multi:!0};function dG(){let t=Xr()?Xr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var hG=new W(""),Rp=(()=>{let e=class e extends $R{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!dG())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(_e(Pi),_e(Zr),_e(hG,8))},e.\u0275dir=en({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Er("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Wf([lG]),ki]});let t=e;return t})();function Bi(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function HR(t){return t!=null&&typeof t.length=="number"}var GR=new W(""),zR=new W(""),fG=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ws=class{static min(e){return pG(e)}static max(e){return gG(e)}static required(e){return mG(e)}static requiredTrue(e){return yG(e)}static email(e){return vG(e)}static minLength(e){return _G(e)}static maxLength(e){return wG(e)}static pattern(e){return EG(e)}static nullValidator(e){return WR(e)}static compose(e){return XR(e)}static composeAsync(e){return tN(e)}};function pG(t){return e=>{if(Bi(e.value)||Bi(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function gG(t){return e=>{if(Bi(e.value)||Bi(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function mG(t){return Bi(t.value)?{required:!0}:null}function yG(t){return t.value===!0?null:{required:!0}}function vG(t){return Bi(t.value)||fG.test(t.value)?null:{email:!0}}function _G(t){return e=>Bi(e.value)||!HR(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function wG(t){return e=>HR(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function EG(t){if(!t)return WR;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Bi(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function WR(t){return null}function KR(t){return t!=null}function QR(t){return qs(t)?De(t):t}function YR(t){let e={};return t.forEach(n=>{e=n!=null?z(z({},e),n):e}),Object.keys(e).length===0?null:e}function ZR(t,e){return e.map(n=>n(t))}function IG(t){return!t.validate}function JR(t){return t.map(e=>IG(e)?e:n=>e.validate(n))}function XR(t){if(!t)return null;let e=t.filter(KR);return e.length==0?null:function(n){return YR(ZR(n,e))}}function eN(t){return t!=null?XR(JR(t)):null}function tN(t){if(!t)return null;let e=t.filter(KR);return e.length==0?null:function(n){let r=ZR(n,e).map(QR);return Gy(r).pipe(Z(YR))}}function nN(t){return t!=null?tN(JR(t)):null}function OR(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function rN(t){return t._rawValidators}function iN(t){return t._rawAsyncValidators}function Kw(t){return t?Array.isArray(t)?t:[t]:[]}function Dp(t,e){return Array.isArray(t)?t.includes(e):t===e}function FR(t,e){let n=Kw(e);return Kw(t).forEach(i=>{Dp(n,i)||n.push(i)}),n}function VR(t,e){return Kw(e).filter(n=>!Dp(t,n))}var bp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Pa=class extends bp{get formDirective(){return null}get path(){return null}},hl=class extends bp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Tp=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},CG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ote=xe(z({},CG),{"[class.ng-submitted]":"isSubmitted"}),sN=(()=>{let e=class e extends Tp{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(_e(hl,2))},e.\u0275dir=en({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&zf("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[ki]});let t=e;return t})(),oN=(()=>{let e=class e extends Tp{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(_e(Pa,10))},e.\u0275dir=en({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&zf("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[ki]});let t=e;return t})();var ll="VALID",Cp="INVALID",Na="PENDING",dl="DISABLED";function aN(t){return(Np(t)?t.validators:t)||null}function DG(t){return Array.isArray(t)?eN(t):t||null}function cN(t,e){return(Np(e)?e.asyncValidators:t)||null}function bG(t){return Array.isArray(t)?nN(t):t||null}function Np(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function TG(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new re(1e3,"");if(!r[n])throw new re(1001,"")}function SG(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new re(1002,"")})}var Sp=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ll}get invalid(){return this.status===Cp}get pending(){return this.status==Na}get disabled(){return this.status===dl}get enabled(){return this.status!==dl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(FR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(FR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VR(e,this._rawAsyncValidators))}hasValidator(e){return Dp(this._rawValidators,e)}hasAsyncValidator(e){return Dp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Na,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=dl,this.errors=null,this._forEachChild(r=>{r.disable(xe(z({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(xe(z({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ll,this._forEachChild(r=>{r.enable(xe(z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(xe(z({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ll||this.status===Na)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dl:ll}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Na,this._hasOwnPendingAsyncValidator=!0;let n=QR(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Bt,this.statusChanges=new Bt}_calculateStatus(){return this._allControlsDisabled()?dl:this.errors?Cp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Na)?Na:this._anyControlsHaveStatus(Cp)?Cp:ll}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Np(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=DG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=bG(this._rawAsyncValidators)}},Ap=class extends Sp{constructor(e,n,r){super(aN(n),cN(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){SG(this,!0,e),Object.keys(e).forEach(r=>{TG(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var uN=new W("CallSetDisabledState",{providedIn:"root",factory:()=>Qw}),Qw="always";function AG(t,e){return[...e.path,t]}function LR(t,e,n=Qw){Yw(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),MG(t,e),NG(t,e),RG(t,e),xG(t,e)}function jR(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Mp(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function xp(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function xG(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Yw(t,e){let n=rN(t);e.validator!==null?t.setValidators(OR(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=iN(t);e.asyncValidator!==null?t.setAsyncValidators(OR(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();xp(e._rawValidators,i),xp(e._rawAsyncValidators,i)}function Mp(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=rN(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=iN(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return xp(e._rawValidators,r),xp(e._rawAsyncValidators,r),n}function MG(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&lN(t,e)})}function RG(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&lN(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function lN(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function NG(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function PG(t,e){t==null,Yw(t,e)}function kG(t,e){return Mp(t,e)}function OG(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function FG(t){return Object.getPrototypeOf(t.constructor)===uG}function VG(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function LG(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Rp?n=s:FG(s)?r=s:i=s}),i||r||n||null}function jG(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function UR(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function BR(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var fl=class extends Sp{constructor(e=null,n,r){super(aN(n),cN(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Np(n)&&(n.nonNullable||n.initialValueIsDefault)&&(BR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){UR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){UR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){BR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var UG=t=>t instanceof fl;var dN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=en({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var hN=new W("");var BG={provide:Pa,useExisting:ha(()=>Zw)},Zw=(()=>{let e=class e extends Pa{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Bt,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Mp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return LR(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){jR(r.control||null,r,!1),jG(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,VG(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(jR(i||null,r),UG(s)&&(LR(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);PG(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&kG(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Yw(this.form,this),this._oldForm&&Mp(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(_e(GR,10),_e(zR,10),_e(uN,8))},e.\u0275dir=en({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Er("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[Nt.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Wf([BG]),ki,Ri]});let t=e;return t})();var $G={provide:hl,useExisting:ha(()=>Jw)},Jw=(()=>{let e=class e extends hl{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Bt,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=LG(this,o)}ngOnChanges(r){this._added||this._setUpControl(),OG(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return AG(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(_e(Pa,13),_e(GR,10),_e(zR,10),_e(qR,10),_e(hN,8))},e.\u0275dir=en({type:e,selectors:[["","formControlName",""]],inputs:{name:[Nt.None,"formControlName","name"],isDisabled:[Nt.None,"disabled","isDisabled"],model:[Nt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Wf([$G]),ki,Ri]});let t=e;return t})();var qG=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xt({type:e}),e.\u0275inj=Jt({});let t=e;return t})();var fN=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:hN,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:uN,useValue:r.callSetDisabledState??Qw}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Xt({type:e}),e.\u0275inj=Jt({imports:[qG]});let t=e;return t})();var GG=()=>["/"],pN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$t({type:e,selectors:[["app-success"]],standalone:!0,features:[qt],decls:15,vars:2,consts:[[1,"flex","flex-col","md:flex-row","justify-center","items-center","mt-10","p-8","mx-auto"],[1,"flex","flex-col","justify-center","items-center","max-w-3xl","p-10","shadow-lg","rounded-xl"],[1,"text-6xl","font-bold"],[1,"text-md","mt-10"],[1,"text-md","my-5"],[1,"text-md","mt-4","mb-3"],[1,"text-sm","tex-gray-100","font-semibold","my-2"],[1,"flex","justify-center","items-center","mt-10"],["href","javascript:void(0)",1,"bg-black","text-white","font-bold","py-3","px-8","rounded",3,"routerLink"]],template:function(i,s){i&1&&(L(0,"div",0)(1,"div",1)(2,"h1",2),Q(3,"Thank you!"),B(),L(4,"p",3),Q(5," Thank you for reaching out! Your message has been successfully sent. I appreciate you taking the time to get in touch. "),B(),L(6,"p",4),Q(7," I will review your message and get back to you as soon as possible. "),B(),L(8,"p",5),Q(9,"Best regards,"),B(),L(10,"p",6),Q(11,"Stranger Mushwana"),B(),L(12,"div",7)(13,"a",8),Q(14,"Home Page"),B()()()()),i&2&&(_t(13),ot("routerLink",Ir(1,GG)))},dependencies:[Ra,Ma],encapsulation:2});let t=e;return t})();var zG="firebase",WG="10.12.2";Hn(zG,WG,"app");var $i=new Yr("ANGULARFIRE2_VERSION");var KG=(t,e)=>{let n=e?[e]:IT(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ri=class{constructor(){return KG(QG)}},QG="app-check";function Xw(){}var Pp=class{zone;delegate;constructor(e,n=$y){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},eE=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xw,{},Xw,Xw)),n.pipe($e({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ka=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Pp(Zone.current)),this.insideAngular=n.run(()=>new Pp(Zone.current,Ms)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(V(be))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function YG(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function at(t){return ZG(YG())(t)}function ZG(t){return function(n){return n=n.lift(new eE(t.ngZone)),n.pipe(zn(t.outsideAngular),Nn(t.insideAngular))}}var JG=new Map,XG={activated:!1,tokenObservers:[]},e3={initialized:!1,enabled:!1};function tr(t){return JG.get(t)||Object.assign({},XG)}function EN(){return e3}var t3="https://content-firebaseappcheck.googleapis.com/v1";var n3="exchangeDebugToken",gN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Ste=24*60*60*1e3;var rE=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Et,this.pending.promise.catch(n=>{}),yield r3(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Et,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function r3(t){return new Promise(e=>{setTimeout(e,t)})}var i3={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},qi=new mT("appCheck","AppCheck",i3);function IN(t){if(!tr(t).activated)throw qi.create("use-before-activation",{appName:t.name})}function CN(r,i){return N(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let y=yield o.getHeartbeatsHeader();y&&(s["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(t,a)}catch(y){throw qi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw qi.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw qi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw qi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function DN(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${t3}/projects/${n}/apps/${r}:${n3}?key=${i}`,body:{debug_token:e}}}var s3="firebase-app-check-database",o3=1,iE="firebase-app-check-store";var kp=null;function a3(){return kp||(kp=new Promise((t,e)=>{try{let n=indexedDB.open(s3,o3);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(qi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(iE,{keyPath:"compositeKey"})}}}catch(n){e(qi.create("storage-open",{originalErrorMessage:n?.message}))}}),kp)}function c3(t,e){return u3(l3(t),e)}function u3(t,e){return N(this,null,function*(){let r=(yield a3()).transaction(iE,"readwrite"),s=r.objectStore(iE).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(qi.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function l3(t){return`${t.options.appId}-${t.name}`}var sE=new Ei("@firebase/app-check");function nE(t,e){return lh()?c3(t,e).catch(n=>{sE.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function bN(){return EN().enabled}function TN(){return N(this,null,function*(){let t=EN();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var d3={error:"UNKNOWN_ERROR"};function h3(t){return ch.encodeString(JSON.stringify(t),!1)}function oE(t,e=!1){return N(this,null,function*(){let n=t.app;IN(n);let r=tr(n),i=r.token,s;if(i&&!pl(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(pl(c)?i=c:yield nE(n,void 0))}if(!e&&i&&pl(i))return{token:i.token};let o=!1;if(bN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=CN(DN(n,yield TN()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield nE(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield tr(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?sE.warn(c.message):sE.error(c),s=c}let a;return i?s?pl(i)?a={token:i.token,internalError:s}:a=yN(s):(a={token:i.token},r.token=i,yield nE(n,i)):a=yN(s),o&&m3(n,a),a})}function f3(t){return N(this,null,function*(){let e=t.app;IN(e);let{provider:n}=tr(e);if(bN()){let r=yield TN(),{token:i}=yield CN(DN(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function p3(t,e,n,r){let{app:i}=t,s=tr(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&pl(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),mN(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>mN(t))}function SN(t,e){let n=tr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function mN(t){let{app:e}=t,n=tr(e),r=n.tokenRefresher;r||(r=g3(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function g3(t){let{app:e}=t;return new rE(()=>N(this,null,function*(){let n=tr(e),r;if(n.token?r=yield oE(t,!0):r=yield oE(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=tr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},gN.RETRIAL_MIN_WAIT,gN.RETRIAL_MAX_WAIT)}function m3(t,e){let n=tr(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function pl(t){return t.expireTimeMillis-Date.now()>0}function yN(t){return{token:h3(d3),error:t}}var aE=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=tr(this.app);for(let n of e)SN(this.app,n.next);return Promise.resolve()}};function y3(t,e){return new aE(t,e)}function v3(t){return{getToken:e=>oE(t,e),getLimitedUseToken:()=>f3(t),addTokenListener:e=>p3(t,"INTERNAL",e),removeTokenListener:e=>SN(t.app,e)}}var _3="@firebase/app-check",w3="0.8.4";var E3="app-check",vN="app-check-internal";function I3(){bs(new fn(E3,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return y3(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(vN).initialize()})),bs(new fn(vN,t=>{let e=t.getProvider("app-check").getImmediate();return v3(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Hn(_3,w3)}I3();var C3=["localhost","0.0.0.0","127.0.0.1"],jte=typeof window<"u"&&C3.includes(window.location.hostname);var D3="firebase",b3="10.12.2";It.registerVersion(D3,b3,"app-compat");var T3=["ngOnDestroy"],xN=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(T3.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,f),f})})})});var Op=class{constructor(e){return e}},Hi=new W("angularfire2.app.options"),Gi=new W("angularfire2.app.name");function Ks(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let o=It.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>It.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;S3("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Op(o)}var S3=(t,...e)=>{$_()&&typeof console<"u"&&console[t](...e)},A3={provide:Op,useFactory:Ks,deps:[Hi,be,[new Au,Gi]]},MN=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Hi,useValue:n},{provide:Gi,useValue:r}]}}constructor(n){It.registerVersion("angularfire",$i.full,"core"),It.registerVersion("angularfire",$i.full,"app-compat"),It.registerVersion("angular",nM.full,n.toString())}static \u0275fac=function(r){return new(r||t)(V(st))};static \u0275mod=Xt({type:t});static \u0275inj=Jt({providers:[A3]})}return t})();function Oa(t,e,n,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return x3(i,o)||(AN("error",`${e} was already initialized on the ${n} Firebase App with different settings.${M3?" You may need to reload as Firebase is not HMR aware.":""}`),AN("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function x3(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var M3=typeof module<"u"&&!!module.hot,AN=(t,...e)=>{$_()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var gl=new W("angularfire2.auth.use-emulator"),ml=new W("angularfire2.auth.settings"),yl=new W("angularfire2.auth.tenant-id"),vl=new W("angularfire2.auth.langugage-code"),_l=new W("angularfire2.auth.use-device-language"),wl=new W("angularfire.auth.persistence"),El=(t,e,n,r,i,s,o,a)=>Oa(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[l,d]of Object.entries(o))c.settings[l]=d;return a&&c.setPersistence(a),c},[n,r,i,s,o,a]),Fp=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,c,l,d,f,g,y){let E=new Ke,D=X(void 0).pipe(Nn(o.outsideAngular),ze(()=>s.runOutsideAngular(()=>import("./chunk-XNFI35D3.js"))),Z(()=>Ks(n,s,r)),Z(S=>El(S,s,a,l,d,f,c,g)),Uh({bufferSize:1,refCount:!1}));if(ni(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=X(null);else{D.pipe(pn()).subscribe();let S=D.pipe(ze(F=>F.getRedirectResult().then(Y=>Y,()=>null)),at,Uh({bufferSize:1,refCount:!1})),k=D.pipe(ze(F=>new pe(Y=>({unsubscribe:s.runOutsideAngular(()=>F.onAuthStateChanged(ie=>Y.next(ie),ie=>Y.error(ie),()=>Y.complete()))})))),$=D.pipe(ze(F=>new pe(Y=>({unsubscribe:s.runOutsideAngular(()=>F.onIdTokenChanged(ie=>Y.next(ie),ie=>Y.error(ie),()=>Y.complete()))}))));this.authState=S.pipe(Bh(k),zn(o.outsideAngular),Nn(o.insideAngular)),this.user=S.pipe(Bh($),zn(o.outsideAngular),Nn(o.insideAngular)),this.idToken=this.user.pipe(ze(F=>F?De(F.getIdToken()):X(null))),this.idTokenResult=this.user.pipe(ze(F=>F?De(F.getIdTokenResult()):X(null))),this.credential=Ko(S,E,this.authState.pipe(Ct(F=>!F))).pipe(Z(F=>F?.user?F:null),zn(o.outsideAngular),Nn(o.insideAngular))}return xN(this,D,s,{spy:{apply:(S,k,$)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&$.then(F=>E.next(F))}}})}static \u0275fac=function(r){return new(r||t)(V(Hi),V(Gi,8),V(st),V(be),V(ka),V(gl,8),V(ml,8),V(yl,8),V(vl,8),V(_l,8),V(wl,8),V(ri,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var NN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},PN={};var zi,uE;(function(){var t;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(C,b,A){for(var _=Array(arguments.length-2),Br=2;Br<arguments.length;Br++)_[Br-2]=arguments[Br];return v.prototype[b].apply(C,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var C=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)C[b]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(b=0;16>b;++b)C[b]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],b=I.g[2];var A=I.g[3],_=v+(A^w&(b^A))+C[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=A+(b^v&(w^b))+C[1]+3905402710&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(w^A&(v^w))+C[2]+606105819&4294967295,b=A+(_<<17&4294967295|_>>>15),_=w+(v^b&(A^v))+C[3]+3250441966&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(A^w&(b^A))+C[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=A+(b^v&(w^b))+C[5]+1200080426&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(w^A&(v^w))+C[6]+2821735955&4294967295,b=A+(_<<17&4294967295|_>>>15),_=w+(v^b&(A^v))+C[7]+4249261313&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(A^w&(b^A))+C[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=A+(b^v&(w^b))+C[9]+2336552879&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(w^A&(v^w))+C[10]+4294925233&4294967295,b=A+(_<<17&4294967295|_>>>15),_=w+(v^b&(A^v))+C[11]+2304563134&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(A^w&(b^A))+C[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=A+(b^v&(w^b))+C[13]+4254626195&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(w^A&(v^w))+C[14]+2792965006&4294967295,b=A+(_<<17&4294967295|_>>>15),_=w+(v^b&(A^v))+C[15]+1236535329&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(b^A&(w^b))+C[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=A+(w^b&(v^w))+C[6]+3225465664&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(A^v))+C[11]+643717713&4294967295,b=A+(_<<14&4294967295|_>>>18),_=w+(A^v&(b^A))+C[0]+3921069994&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(b^A&(w^b))+C[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=A+(w^b&(v^w))+C[10]+38016083&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(A^v))+C[15]+3634488961&4294967295,b=A+(_<<14&4294967295|_>>>18),_=w+(A^v&(b^A))+C[4]+3889429448&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(b^A&(w^b))+C[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=A+(w^b&(v^w))+C[14]+3275163606&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(A^v))+C[3]+4107603335&4294967295,b=A+(_<<14&4294967295|_>>>18),_=w+(A^v&(b^A))+C[8]+1163531501&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(b^A&(w^b))+C[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=A+(w^b&(v^w))+C[2]+4243563512&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(A^v))+C[7]+1735328473&4294967295,b=A+(_<<14&4294967295|_>>>18),_=w+(A^v&(b^A))+C[12]+2368359562&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(w^b^A)+C[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=A+(v^w^b)+C[8]+2272392833&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^w)+C[11]+1839030562&4294967295,b=A+(_<<16&4294967295|_>>>16),_=w+(b^A^v)+C[14]+4259657740&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(w^b^A)+C[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=A+(v^w^b)+C[4]+1272893353&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^w)+C[7]+4139469664&4294967295,b=A+(_<<16&4294967295|_>>>16),_=w+(b^A^v)+C[10]+3200236656&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(w^b^A)+C[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=A+(v^w^b)+C[0]+3936430074&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^w)+C[3]+3572445317&4294967295,b=A+(_<<16&4294967295|_>>>16),_=w+(b^A^v)+C[6]+76029189&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(w^b^A)+C[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=A+(v^w^b)+C[12]+3873151461&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^w)+C[15]+530742520&4294967295,b=A+(_<<16&4294967295|_>>>16),_=w+(b^A^v)+C[2]+3299628645&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(b^(w|~A))+C[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=A+(w^(v|~b))+C[7]+1126891415&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~w))+C[14]+2878612391&4294967295,b=A+(_<<15&4294967295|_>>>17),_=w+(A^(b|~v))+C[5]+4237533241&4294967295,w=b+(_<<21&4294967295|_>>>11),_=v+(b^(w|~A))+C[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=A+(w^(v|~b))+C[3]+2399980690&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~w))+C[10]+4293915773&4294967295,b=A+(_<<15&4294967295|_>>>17),_=w+(A^(b|~v))+C[1]+2240044497&4294967295,w=b+(_<<21&4294967295|_>>>11),_=v+(b^(w|~A))+C[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=A+(w^(v|~b))+C[15]+4264355552&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~w))+C[6]+2734768916&4294967295,b=A+(_<<15&4294967295|_>>>17),_=w+(A^(b|~v))+C[13]+1309151649&4294967295,w=b+(_<<21&4294967295|_>>>11),_=v+(b^(w|~A))+C[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=A+(w^(v|~b))+C[11]+3174756917&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~w))+C[2]+718787259&4294967295,b=A+(_<<15&4294967295|_>>>17),_=w+(A^(b|~v))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+b&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,C=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=w;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<v;)if(C[b++]=I.charCodeAt(A++),b==this.blockSize){i(this,C),b=0;break}}else for(;A<v;)if(C[b++]=I[A++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var C=0;32>C;C+=8)I[w++]=this.g[v]>>>C&255;return I};function s(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function o(I,v){this.h=v;for(var w=[],C=!0,b=I.length-1;0<=b;b--){var A=I[b]|0;C&&A==v||(w[b]=A,C=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return S(l(-I));for(var v=[],w=1,C=0;I>=w;C++)v[C]=I/w|0,w*=4294967296;return new o(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return S(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),C=f,b=0;b<I.length;b+=8){var A=Math.min(8,I.length-b),_=parseInt(I.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),C=C.j(A).add(l(_))):(C=C.j(w),C=C.add(l(_)))}return C}var f=c(0),g=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(D(this))return-S(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var C=this.i(w);I+=(0<=C?C:4294967296+C)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(E(this))return"0";if(D(this))return"-"+S(this).toString(I);for(var v=l(Math.pow(I,6)),w=this,C="";;){var b=Y(w,v).g;w=k(w,b.j(v));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=b,E(w))return A+C;for(;6>A.length;)A="0"+A;C=A+C}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function E(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function D(I){return I.h==-1}t.l=function(I){return I=k(this,I),D(I)?-1:E(I)?0:1};function S(I){for(var v=I.g.length,w=[],C=0;C<v;C++)w[C]=~I.g[C];return new o(w,~I.h).add(g)}t.abs=function(){return D(this)?S(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0,b=0;b<=v;b++){var A=C+(this.i(b)&65535)+(I.i(b)&65535),_=(A>>>16)+(this.i(b)>>>16)+(I.i(b)>>>16);C=_>>>16,A&=65535,_&=65535,w[b]=_<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function k(I,v){return I.add(S(v))}t.j=function(I){if(E(this)||E(I))return f;if(D(this))return D(I)?S(this).j(S(I)):S(S(this).j(I));if(D(I))return S(this.j(S(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],C=0;C<2*v;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<I.g.length;b++){var A=this.i(C)>>>16,_=this.i(C)&65535,Br=I.i(b)>>>16,Uc=I.i(b)&65535;w[2*C+2*b]+=_*Uc,$(w,2*C+2*b),w[2*C+2*b+1]+=A*Uc,$(w,2*C+2*b+1),w[2*C+2*b+1]+=_*Br,$(w,2*C+2*b+1),w[2*C+2*b+2]+=A*Br,$(w,2*C+2*b+2)}for(C=0;C<v;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=v;C<2*v;C++)w[C]=0;return new o(w,0)};function $(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function F(I,v){this.g=I,this.h=v}function Y(I,v){if(E(v))throw Error("division by zero");if(E(I))return new F(f,f);if(D(I))return v=Y(S(I),v),new F(S(v.g),S(v.h));if(D(v))return v=Y(I,S(v)),new F(S(v.g),v.h);if(30<I.g.length){if(D(I)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,C=v;0>=C.l(I);)w=ie(w),C=ie(C);var b=ne(w,1),A=ne(C,1);for(C=ne(C,2),w=ne(w,2);!E(C);){var _=A.add(C);0>=_.l(I)&&(b=b.add(w),A=_),C=ne(C,1),w=ne(w,1)}return v=k(I,b.j(v)),new F(b,v)}for(b=f;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),A=l(w),_=A.j(v);D(_)||0<_.l(I);)w-=C,A=l(w),_=A.j(v);E(A)&&(A=g),b=b.add(A),I=k(I,_)}return new F(b,I)}t.A=function(I){return Y(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)&I.i(C);return new o(w,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)|I.i(C);return new o(w,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)^I.i(C);return new o(w,this.h^I.h)};function ie(I){for(var v=I.g.length+1,w=[],C=0;C<v;C++)w[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(w,I.h)}function ne(I,v){var w=v>>5;v%=32;for(var C=I.g.length-w,b=[],A=0;A<C;A++)b[A]=0<v?I.i(A+w)>>>v|I.i(A+w+1)<<32-v:I.i(A+w);return new o(b,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uE=PN.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,zi=PN.Integer=o}).apply(typeof NN<"u"?NN:typeof self<"u"?self:typeof window<"u"?window:{});var Vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ii={};var lE,dE,Fa,hE,Il,Lp,fE,pE,gE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vp=="object"&&Vp];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var T=u[m];if(!(T in p))break e;p=p[T]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,m=!1,T={next:function(){if(!m&&p<u.length){var M=p++;return{value:h(M,u[M]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),u.apply(h,T)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function E(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,T,M){for(var q=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)q[Ve-2]=arguments[Ve];return h.prototype[T].apply(m,q)}}function D(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function S(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let T=u.length||0,M=m.length||0;u.length=T+M;for(let q=0;q<M;q++)u[T+q]=m[q]}else u.push(m)}}class k{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function $(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Y(u){return Y[" "](u),u}Y[" "]=function(){};var ie=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function ne(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function I(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,h){let p,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(p in m)u[p]=m[p];for(let M=0;M<w.length;M++)p=w[M],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function A(u){a.setTimeout(()=>{throw u},0)}function _(){var u=Jm;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Br{constructor(){this.h=this.g=null}add(h,p){let m=Uc.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Uc=new k(()=>new zV,u=>u.reset());class zV{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Bc,$c=!1,Jm=new Br,ab=()=>{let u=a.Promise.resolve(void 0);Bc=()=>{u.then(WV)}};var WV=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(p){A(p)}var h=Uc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}$c=!1};function mi(){this.s=this.s,this.C=this.C}mi.prototype.s=!1,mi.prototype.ma=function(){this.s||(this.s=!0,this.N())},mi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Vt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var KV=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function qc(u,h){if(Vt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(ie){e:{try{Y(h.nodeName);var T=!0;break e}catch{}T=!1}T||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:QV[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&qc.aa.h.call(this)}}E(qc,Vt);var QV={2:"touch",3:"pen",4:"mouse"};qc.prototype.h=function(){qc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Hc="closure_listenable_"+(1e6*Math.random()|0),YV=0;function ZV(u,h,p,m,T){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=T,this.key=++YV,this.da=this.fa=!1}function Hd(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Gd(u){this.src=u,this.g={},this.h=0}Gd.prototype.add=function(u,h,p,m,T){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var q=ey(u,h,m,T);return-1<q?(h=u[q],p||(h.fa=!1)):(h=new ZV(h,this.src,M,!!m,T),h.fa=p,u.push(h)),h};function Xm(u,h){var p=h.type;if(p in u.g){var m=u.g[p],T=Array.prototype.indexOf.call(m,h,void 0),M;(M=0<=T)&&Array.prototype.splice.call(m,T,1),M&&(Hd(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function ey(u,h,p,m){for(var T=0;T<u.length;++T){var M=u[T];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==m)return T}return-1}var ty="closure_lm_"+(1e6*Math.random()|0),ny={};function cb(u,h,p,m,T){if(m&&m.once)return lb(u,h,p,m,T);if(Array.isArray(h)){for(var M=0;M<h.length;M++)cb(u,h[M],p,m,T);return null}return p=oy(p),u&&u[Hc]?u.K(h,p,l(m)?!!m.capture:!!m,T):ub(u,h,p,!1,m,T)}function ub(u,h,p,m,T,M){if(!h)throw Error("Invalid event type");var q=l(T)?!!T.capture:!!T,Ve=iy(u);if(Ve||(u[ty]=Ve=new Gd(u)),p=Ve.add(h,p,m,q,M),p.proxy)return p;if(m=JV(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)KV||(T=q),T===void 0&&(T=!1),u.addEventListener(h.toString(),m,T);else if(u.attachEvent)u.attachEvent(hb(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function JV(){function u(p){return h.call(u.src,u.listener,p)}let h=XV;return u}function lb(u,h,p,m,T){if(Array.isArray(h)){for(var M=0;M<h.length;M++)lb(u,h[M],p,m,T);return null}return p=oy(p),u&&u[Hc]?u.L(h,p,l(m)?!!m.capture:!!m,T):ub(u,h,p,!0,m,T)}function db(u,h,p,m,T){if(Array.isArray(h))for(var M=0;M<h.length;M++)db(u,h[M],p,m,T);else m=l(m)?!!m.capture:!!m,p=oy(p),u&&u[Hc]?(u=u.i,h=String(h).toString(),h in u.g&&(M=u.g[h],p=ey(M,p,m,T),-1<p&&(Hd(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete u.g[h],u.h--)))):u&&(u=iy(u))&&(h=u.g[h.toString()],u=-1,h&&(u=ey(h,p,m,T)),(p=-1<u?h[u]:null)&&ry(p))}function ry(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Hc])Xm(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(hb(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=iy(h))?(Xm(p,u),p.h==0&&(p.src=null,h[ty]=null)):Hd(u)}}}function hb(u){return u in ny?ny[u]:ny[u]="on"+u}function XV(u,h){if(u.da)u=!0;else{h=new qc(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&ry(u),u=p.call(m,h)}return u}function iy(u){return u=u[ty],u instanceof Gd?u:null}var sy="__closure_events_fn_"+(1e9*Math.random()>>>0);function oy(u){return typeof u=="function"?u:(u[sy]||(u[sy]=function(h){return u.handleEvent(h)}),u[sy])}function Lt(){mi.call(this),this.i=new Gd(this),this.M=this,this.F=null}E(Lt,mi),Lt.prototype[Hc]=!0,Lt.prototype.removeEventListener=function(u,h,p,m){db(this,u,h,p,m)};function Wt(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new Vt(h,u);else if(h instanceof Vt)h.target=h.target||u;else{var T=h;h=new Vt(m,u),C(h,T)}if(T=!0,p)for(var M=p.length-1;0<=M;M--){var q=h.g=p[M];T=zd(q,m,!0,h)&&T}if(q=h.g=u,T=zd(q,m,!0,h)&&T,T=zd(q,m,!1,h)&&T,p)for(M=0;M<p.length;M++)q=h.g=p[M],T=zd(q,m,!1,h)&&T}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)Hd(p[m]);delete u.g[h],u.h--}}this.F=null},Lt.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},Lt.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function zd(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var T=!0,M=0;M<h.length;++M){var q=h[M];if(q&&!q.da&&q.capture==p){var Ve=q.listener,xt=q.ha||q.src;q.fa&&Xm(u.i,q),T=Ve.call(xt,m)!==!1&&T}}return T&&!m.defaultPrevented}function fb(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function pb(u){u.g=fb(()=>{u.g=null,u.i&&(u.i=!1,pb(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class eL extends mi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:pb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gc(u){mi.call(this),this.h=u,this.g={}}E(Gc,mi);var gb=[];function mb(u){ne(u.g,function(h,p){this.g.hasOwnProperty(p)&&ry(h)},u),u.g={}}Gc.prototype.N=function(){Gc.aa.N.call(this),mb(this)},Gc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ay=a.JSON.stringify,tL=a.JSON.parse,nL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function cy(){}cy.prototype.h=null;function yb(u){return u.h||(u.h=u.i())}function vb(){}var zc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function uy(){Vt.call(this,"d")}E(uy,Vt);function ly(){Vt.call(this,"c")}E(ly,Vt);var Es={},_b=null;function Wd(){return _b=_b||new Lt}Es.La="serverreachability";function wb(u){Vt.call(this,Es.La,u)}E(wb,Vt);function Wc(u){let h=Wd();Wt(h,new wb(h))}Es.STAT_EVENT="statevent";function Eb(u,h){Vt.call(this,Es.STAT_EVENT,u),this.stat=h}E(Eb,Vt);function Kt(u){let h=Wd();Wt(h,new Eb(h,u))}Es.Ma="timingevent";function Ib(u,h){Vt.call(this,Es.Ma,u),this.size=h}E(Ib,Vt);function Kc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Qc(){this.g=!0}Qc.prototype.xa=function(){this.g=!1};function rL(u,h,p,m,T,M){u.info(function(){if(u.g)if(M)for(var q="",Ve=M.split("&"),xt=0;xt<Ve.length;xt++){var Me=Ve[xt].split("=");if(1<Me.length){var jt=Me[0];Me=Me[1];var Ut=jt.split("_");q=2<=Ut.length&&Ut[1]=="type"?q+(jt+"="+Me+"&"):q+(jt+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+h+`
`+p+`
`+q})}function iL(u,h,p,m,T,M,q){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+h+`
`+p+`
`+M+" "+q})}function Ro(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+oL(u,p)+(m?" "+m:"")})}function sL(u,h){u.info(function(){return"TIMEOUT: "+h})}Qc.prototype.info=function(){};function oL(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var M=T[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<T.length;q++)T[q]=""}}}}return ay(p)}catch{return h}}var Kd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dy;function Qd(){}E(Qd,cy),Qd.prototype.g=function(){return new XMLHttpRequest},Qd.prototype.i=function(){return{}},dy=new Qd;function yi(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new Gc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Db}function Db(){this.i=null,this.g="",this.h=!1}var bb={},hy={};function fy(u,h,p){u.L=1,u.v=Xd($r(h)),u.m=p,u.P=!0,Tb(u,null)}function Tb(u,h){u.F=Date.now(),Yd(u),u.A=$r(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),Ub(p.i,"t",m),u.C=0,p=u.j.J,u.h=new Db,u.g=iT(u.j,p?h:null,!u.m),0<u.O&&(u.M=new eL(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var T="readystatechange";Array.isArray(T)||(T&&(gb[0]=T.toString()),T=gb);for(var M=0;M<T.length;M++){var q=cb(p,T[M],m||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Wc(),rL(u.i,u.u,u.A,u.l,u.R,u.m)}yi.prototype.ca=function(u){u=u.target;let h=this.M;h&&qr(u)==3?h.j():this.Y(u)},yi.prototype.Y=function(u){try{if(u==this.g)e:{let Ut=qr(this.g);var h=this.g.Ba();let ko=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Wb(this.g)))){this.J||Ut!=4||h==7||(h==8||0>=ko?Wc(3):Wc(2)),py(this);var p=this.g.Z();this.X=p;t:if(Sb(this)){var m=Wb(this.g);u="";var T=m.length,M=qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),Yc(this);var q="";break t}this.h.i=new a.TextDecoder}for(h=0;h<T;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(M&&h==T-1)});m.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,iL(this.i,this.u,this.A,this.l,this.R,Ut,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,xt=this.g;if((Ve=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ve)){var Me=Ve;break t}}Me=null}if(p=Me)Ro(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gy(this,p);else{this.o=!1,this.s=3,Kt(12),Is(this),Yc(this);break e}}if(this.P){p=!0;let qn;for(;!this.J&&this.C<q.length;)if(qn=aL(this,q),qn==hy){Ut==4&&(this.s=4,Kt(14),p=!1),Ro(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==bb){this.s=4,Kt(15),Ro(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else Ro(this.i,this.l,qn,null),gy(this,qn);if(Sb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||q.length!=0||this.h.h||(this.s=1,Kt(16),p=!1),this.o=this.o&&p,!p)Ro(this.i,this.l,q,"[Invalid Chunked Response]"),Is(this),Yc(this);else if(0<q.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Ey(jt),jt.M=!0,Kt(11))}}else Ro(this.i,this.l,q,null),gy(this,q);Ut==4&&Is(this),this.o&&!this.J&&(Ut==4?eT(this.j,this):(this.o=!1,Yd(this)))}else DL(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),Is(this),Yc(this)}}}catch{}finally{}};function Sb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function aL(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?hy:(p=Number(h.substring(p,m)),isNaN(p)?bb:(m+=1,m+p>h.length?hy:(h=h.slice(m,m+p),u.C=m+p,h)))}yi.prototype.cancel=function(){this.J=!0,Is(this)};function Yd(u){u.S=Date.now()+u.I,Ab(u,u.I)}function Ab(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Kc(g(u.ba,u),h)}function py(u){u.B&&(a.clearTimeout(u.B),u.B=null)}yi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(sL(this.i,this.A),this.L!=2&&(Wc(),Kt(17)),Is(this),this.s=2,Yc(this)):Ab(this,this.S-u)};function Yc(u){u.j.G==0||u.J||eT(u.j,u)}function Is(u){py(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,mb(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function gy(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||my(p.h,u))){if(!u.K&&my(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)ih(p),nh(p);else break e;wy(p),Kt(18)}}else p.za=T[1],0<p.za-p.T&&37500>T[2]&&p.F&&p.v==0&&!p.C&&(p.C=Kc(g(p.Za,p),6e3));if(1>=Rb(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ds(p,11)}else if((u.K||p.g==u)&&ih(p),!$(h))for(T=p.Da.g.parse(h),h=0;h<T.length;h++){let Me=T[h];if(p.T=Me[0],Me=Me[1],p.G==2)if(Me[0]=="c"){p.K=Me[1],p.ia=Me[2];let jt=Me[3];jt!=null&&(p.la=jt,p.j.info("VER="+p.la));let Ut=Me[4];Ut!=null&&(p.Aa=Ut,p.j.info("SVER="+p.Aa));let ko=Me[5];ko!=null&&typeof ko=="number"&&0<ko&&(m=1.5*ko,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let qn=u.g;if(qn){let oh=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oh){var M=m.h;M.g||oh.indexOf("spdy")==-1&&oh.indexOf("quic")==-1&&oh.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(yy(M,M.h),M.h=null))}if(m.D){let Iy=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Iy&&(m.ya=Iy,Ge(m.I,m.D,Iy))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var q=u;if(m.qa=rT(m,m.J?m.ia:null,m.W),q.K){Nb(m.h,q);var Ve=q,xt=m.L;xt&&(Ve.I=xt),Ve.B&&(py(Ve),Yd(Ve)),m.g=q}else Jb(m);0<p.i.length&&rh(p)}else Me[0]!="stop"&&Me[0]!="close"||Ds(p,7);else p.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Ds(p,7):_y(p):Me[0]!="noop"&&p.l&&p.l.ta(Me),p.v=0)}}Wc(4)}catch{}}var cL=class{constructor(u,h){this.g=u,this.map=h}};function xb(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mb(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Rb(u){return u.h?1:u.g?u.g.size:0}function my(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function yy(u,h){u.g?u.g.add(h):u.h=h}function Nb(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}xb.prototype.cancel=function(){if(this.i=Pb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Pb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return D(u.i)}function uL(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function lL(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function kb(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=lL(u),m=uL(u),T=m.length,M=0;M<T;M++)h.call(void 0,m[M],p&&p[M],u)}var Ob=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dL(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),T=null;if(0<=m){var M=u[p].substring(0,m);T=u[p].substring(m+1)}else M=u[p];h(M,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Cs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Cs){this.h=u.h,Zd(this,u.j),this.o=u.o,this.g=u.g,Jd(this,u.s),this.l=u.l;var h=u.i,p=new Xc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Fb(this,p),this.m=u.m}else u&&(h=String(u).match(Ob))?(this.h=!1,Zd(this,h[1]||"",!0),this.o=Zc(h[2]||""),this.g=Zc(h[3]||"",!0),Jd(this,h[4]),this.l=Zc(h[5]||"",!0),Fb(this,h[6]||"",!0),this.m=Zc(h[7]||"")):(this.h=!1,this.i=new Xc(null,this.h))}Cs.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Jc(h,Vb,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Jc(h,Vb,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Jc(p,p.charAt(0)=="/"?pL:fL,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Jc(p,mL)),u.join("")};function $r(u){return new Cs(u)}function Zd(u,h,p){u.j=p?Zc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function Jd(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function Fb(u,h,p){h instanceof Xc?(u.i=h,yL(u.i,u.h)):(p||(h=Jc(h,gL)),u.i=new Xc(h,u.h))}function Ge(u,h,p){u.i.set(h,p)}function Xd(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Zc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Jc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,hL),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function hL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Vb=/[#\/\?@]/g,fL=/[#\?:]/g,pL=/[#\?]/g,gL=/[#\?@]/g,mL=/#/g;function Xc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function vi(u){u.g||(u.g=new Map,u.h=0,u.i&&dL(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Xc.prototype,t.add=function(u,h){vi(this),this.i=null,u=No(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function Lb(u,h){vi(u),h=No(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function jb(u,h){return vi(u),h=No(u,h),u.g.has(h)}t.forEach=function(u,h){vi(this),this.g.forEach(function(p,m){p.forEach(function(T){u.call(h,T,m,this)},this)},this)},t.na=function(){vi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let T=u[m];for(let M=0;M<T.length;M++)p.push(h[m])}return p},t.V=function(u){vi(this);let h=[];if(typeof u=="string")jb(this,u)&&(h=h.concat(this.g.get(No(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return vi(this),this.i=null,u=No(this,u),jb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function Ub(u,h,p){Lb(u,h),0<p.length&&(u.i=null,u.g.set(No(u,h),D(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let M=encodeURIComponent(String(m)),q=this.V(m);for(m=0;m<q.length;m++){var T=M;q[m]!==""&&(T+="="+encodeURIComponent(String(q[m]))),u.push(T)}}return this.i=u.join("&")};function No(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function yL(u,h){h&&!u.j&&(vi(u),u.i=null,u.g.forEach(function(p,m){var T=m.toLowerCase();m!=T&&(Lb(this,m),Ub(this,T,p))},u)),u.j=h}function vL(u,h){let p=new Qc;if(a.Image){let m=new Image;m.onload=y(_i,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(_i,p,"TestLoadImage: error",!1,h,m),m.onabort=y(_i,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(_i,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function _L(u,h){let p=new Qc,m=new AbortController,T=setTimeout(()=>{m.abort(),_i(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(M=>{clearTimeout(T),M.ok?_i(p,"TestPingServer: ok",!0,h):_i(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(T),_i(p,"TestPingServer: error",!1,h)})}function _i(u,h,p,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(p)}catch{}}function wL(){this.g=new nL}function EL(u,h,p){let m=p||"";try{kb(u,function(T,M){let q=T;l(T)&&(q=ay(T)),h.push(m+M+"="+encodeURIComponent(q))})}catch(T){throw h.push(m+"type="+encodeURIComponent("_badmap")),T}}function eu(u){this.l=u.Ub||null,this.j=u.eb||!1}E(eu,cy),eu.prototype.g=function(){return new eh(this.l,this.j)},eu.prototype.i=function(u){return function(){return u}}({});function eh(u,h){Lt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(eh,Lt),t=eh.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,nu(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tu(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,nu(this)),this.g&&(this.readyState=3,nu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bb(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bb(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?tu(this):nu(this),this.readyState==3&&Bb(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,tu(this))},t.Qa=function(u){this.g&&(this.response=u,tu(this))},t.ga=function(){this.g&&tu(this)};function tu(u){u.readyState=4,u.l=null,u.j=null,u.v=null,nu(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function nu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(eh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function $b(u){let h="";return ne(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function vy(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=$b(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ge(u,h,p))}function et(u){Lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(et,Lt);var IL=/^https?$/i,CL=["POST","PUT"];t=et.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dy.g(),this.v=this.o?yb(this.o):yb(dy),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(M){qb(this,M);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)p.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let M of m.keys())p.set(M,m.get(M));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),T=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(CL,h,void 0))||m||T||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,q]of p)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zb(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){qb(this,M)}};function qb(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,Hb(u),th(u)}function Hb(u){u.A||(u.A=!0,Wt(u,"complete"),Wt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Wt(this,"complete"),Wt(this,"abort"),th(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),th(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gb(this):this.bb())},t.bb=function(){Gb(this)};function Gb(u){if(u.h&&typeof o<"u"&&(!u.v[1]||qr(u)!=4||u.Z()!=2)){if(u.u&&qr(u)==4)fb(u.Ea,0,u);else if(Wt(u,"readystatechange"),qr(u)==4){u.h=!1;try{let q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=q===0){var T=String(u.D).match(Ob)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!IL.test(T?T.toLowerCase():"")}p=m}if(p)Wt(u,"complete"),Wt(u,"success");else{u.m=6;try{var M=2<qr(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",Hb(u)}}finally{th(u)}}}}function th(u,h){if(u.g){zb(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Wt(u,"ready");try{p.onreadystatechange=m}catch{}}}function zb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function qr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),tL(h)}};function Wb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function DL(u){let h={};u=(u.g&&2<=qr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if($(u[m]))continue;var p=b(u[m]);let T=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=h[T]||[];h[T]=M,M.push(p)}I(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ru(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function Kb(u){this.Aa=0,this.i=[],this.j=new Qc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ru("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ru("baseRetryDelayMs",5e3,u),this.cb=ru("retryDelaySeedMs",1e4,u),this.Wa=ru("forwardChannelMaxRetries",2,u),this.wa=ru("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new xb(u&&u.concurrentRequestLimit),this.Da=new wL,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Kb.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,m){Kt(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=rT(this,null,this.W),rh(this)};function _y(u){if(Qb(u),u.G==3){var h=u.U++,p=$r(u.I);if(Ge(p,"SID",u.K),Ge(p,"RID",h),Ge(p,"TYPE","terminate"),iu(u,p),h=new yi(u,u.j,h),h.L=2,h.v=Xd($r(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=iT(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Yd(h)}nT(u)}function nh(u){u.g&&(Ey(u),u.g.cancel(),u.g=null)}function Qb(u){nh(u),u.u&&(a.clearTimeout(u.u),u.u=null),ih(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function rh(u){if(!Mb(u.h)&&!u.s){u.s=!0;var h=u.Ga;Bc||ab(),$c||(Bc(),$c=!0),Jm.add(h,u),u.B=0}}function bL(u,h){return Rb(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Kc(g(u.Ga,u,h),tT(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let T=new yi(this,this.j,u),M=this.o;if(this.S&&(M?(M=v(M),C(M,this.S)):M=this.S),this.m!==null||this.O||(T.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Zb(this,T,h),p=$r(this.I),Ge(p,"RID",u),Ge(p,"CVER",22),this.D&&Ge(p,"X-HTTP-Session-Id",this.D),iu(this,p),M&&(this.O?h="headers="+encodeURIComponent(String($b(M)))+"&"+h:this.m&&vy(p,this.m,M)),yy(this.h,T),this.Ua&&Ge(p,"TYPE","init"),this.P?(Ge(p,"$req",h),Ge(p,"SID","null"),T.T=!0,fy(T,p,null)):fy(T,p,h),this.G=2}}else this.G==3&&(u?Yb(this,u):this.i.length==0||Mb(this.h)||Yb(this))};function Yb(u,h){var p;h?p=h.l:p=u.U++;let m=$r(u.I);Ge(m,"SID",u.K),Ge(m,"RID",p),Ge(m,"AID",u.T),iu(u,m),u.m&&u.o&&vy(m,u.m,u.o),p=new yi(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=Zb(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),yy(u.h,p),fy(p,m,h)}function iu(u,h){u.H&&ne(u.H,function(p,m){Ge(h,m,p)}),u.l&&kb({},function(p,m){Ge(h,m,p)})}function Zb(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var T=u.i;let M=-1;for(;;){let q=["count="+p];M==-1?0<p?(M=T[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let Ve=!0;for(let xt=0;xt<p;xt++){let Me=T[xt].g,jt=T[xt].map;if(Me-=M,0>Me)M=Math.max(0,T[xt].g-100),Ve=!1;else try{EL(jt,q,"req"+Me+"_")}catch{m&&m(jt)}}if(Ve){m=q.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function Jb(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Bc||ab(),$c||(Bc(),$c=!0),Jm.add(h,u),u.v=0}}function wy(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Kc(g(u.Fa,u),tT(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Xb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Kc(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),nh(this),Xb(this))};function Ey(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Xb(u){u.g=new yi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=$r(u.qa);Ge(h,"RID","rpc"),Ge(h,"SID",u.K),Ge(h,"AID",u.T),Ge(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(h,"TO",u.ja),Ge(h,"TYPE","xmlhttp"),iu(u,h),u.m&&u.o&&vy(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Xd($r(h)),p.m=null,p.P=!0,Tb(p,u)}t.Za=function(){this.C!=null&&(this.C=null,nh(this),wy(this),Kt(19))};function ih(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function eT(u,h){var p=null;if(u.g==h){ih(u),Ey(u),u.g=null;var m=2}else if(my(u.h,h))p=h.D,Nb(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var T=u.B;m=Wd(),Wt(m,new Ib(m,p)),rh(u)}else Jb(u);else if(T=h.s,T==3||T==0&&0<h.X||!(m==1&&bL(u,h)||m==2&&wy(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),T){case 1:Ds(u,5);break;case 4:Ds(u,10);break;case 3:Ds(u,6);break;default:Ds(u,2)}}}function tT(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function Ds(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let T=!m;m=new Cs(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Zd(m,"https"),Xd(m),T?vL(m.toString(),p):_L(m.toString(),p)}else Kt(2);u.G=0,u.l&&u.l.sa(h),nT(u),Qb(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function nT(u){if(u.G=0,u.ka=[],u.l){let h=Pb(u.h);(h.length!=0||u.i.length!=0)&&(S(u.ka,h),S(u.ka,u.i),u.h.i.length=0,D(u.i),u.i.length=0),u.l.ra()}}function rT(u,h,p){var m=p instanceof Cs?$r(p):new Cs(p);if(m.g!="")h&&(m.g=h+"."+m.g),Jd(m,m.s);else{var T=a.location;m=T.protocol,h=h?h+"."+T.hostname:T.hostname,T=+T.port;var M=new Cs(null);m&&Zd(M,m),h&&(M.g=h),T&&Jd(M,T),p&&(M.l=p),m=M}return p=u.D,h=u.ya,p&&h&&Ge(m,p,h),Ge(m,"VER",u.la),iu(u,m),m}function iT(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new et(new eu({eb:p})):new et(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sT(){}t=sT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sh(){}sh.prototype.g=function(u,h){return new hn(u,h)};function hn(u,h){Lt.call(this),this.g=new Kb(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!$(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!$(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Po(this)}E(hn,Lt),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){_y(this.g)},hn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=ay(u),u=p);h.i.push(new cL(h.Ya++,u)),h.G==3&&rh(h)},hn.prototype.N=function(){this.g.l=null,delete this.j,_y(this.g),delete this.g,hn.aa.N.call(this)};function oT(u){uy.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}E(oT,uy);function aT(){ly.call(this),this.status=1}E(aT,ly);function Po(u){this.g=u}E(Po,sT),Po.prototype.ua=function(){Wt(this.g,"a")},Po.prototype.ta=function(u){Wt(this.g,new oT(u))},Po.prototype.sa=function(u){Wt(this.g,new aT)},Po.prototype.ra=function(){Wt(this.g,"b")},sh.prototype.createWebChannel=sh.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,gE=ii.createWebChannelTransport=function(){return new sh},pE=ii.getStatEventTarget=function(){return Wd()},fE=ii.Event=Es,Lp=ii.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kd.NO_ERROR=0,Kd.TIMEOUT=8,Kd.HTTP_ERROR=6,Il=ii.ErrorCode=Kd,Cb.COMPLETE="complete",hE=ii.EventType=Cb,vb.EventType=zc,zc.OPEN="a",zc.CLOSE="b",zc.ERROR="c",zc.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,Fa=ii.WebChannel=vb,dE=ii.FetchXmlHttpFactory=eu,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,lE=ii.XhrIo=et}).apply(typeof Vp<"u"?Vp:typeof self<"u"?self:typeof window<"u"?window:{});var kN="@firebase/firestore";var gt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");var fc="10.12.1";var Xi=new Ei("@firebase/firestore");function Ba(){return Xi.logLevel}function kP(t){Xi.setLogLevel(t)}function O(t,...e){if(Xi.logLevel<=Rn.DEBUG){let n=e.map(v0);Xi.debug(`Firestore (${fc}): ${t}`,...n)}}function ct(t,...e){if(Xi.logLevel<=Rn.ERROR){let n=e.map(v0);Xi.error(`Firestore (${fc}): ${t}`,...n)}}function Vn(t,...e){if(Xi.logLevel<=Rn.WARN){let n=e.map(v0);Xi.warn(`Firestore (${fc}): ${t}`,...n)}}function v0(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function K(t="Unexpected state"){let e=`FIRESTORE (${fc}) INTERNAL ASSERTION FAILED: `+t;throw ct(e),new Error(e)}function J(t,e){t||K()}function OP(t,e){t||K()}function G(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends gT{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var mt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Qp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},wE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}},EE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},IE=class{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new mt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>N(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J(typeof r.accessToken=="string"),new Qp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return J(e===null||typeof e=="string"),new gt(e)}},CE=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},DE=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new CE(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},bE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},TE=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,O("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(J(typeof n.token=="string"),this.R=n.token,new bE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function N3(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Yp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=N3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function le(t,e){return t<e?-1:t>e?1:0}function Ya(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function FP(t){return t+"\0"}var Je=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Je(0,0))}static max(){return new t(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(),r===void 0?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Se=class t extends Zp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},P3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ut=class t extends Zp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return P3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new P(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new P(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Se.fromString(e))}static fromName(e){return new t(Se.fromString(e).popFirst(5))}static empty(){return new t(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Se(e.slice()))}};var Za=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function SE(t){return t.fields.find(e=>e.kind===2)}function Ys(t){return t.fields.filter(e=>e.kind!==2)}Za.UNKNOWN_ID=-1;var Wa=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var kl=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Ln.min())}};function VP(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new Ln(i,H.empty(),e)}function LP(t){return new Ln(t.readTime,t.key,-1)}var Ln=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),H.empty(),-1)}static max(){return new t(te.max(),H.empty(),-1)}};function _0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}var jP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function us(t){return N(this,null,function*(){if(t.code!==R.FAILED_PRECONDITION||t.message!==jP)throw t;O("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var Xp=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new mt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new no(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=w0(r.target.error);this.V.reject(new no(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new no(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new xE(n)}},es=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(su())===12.2&&ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),Zs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!lh())return!1;if(t.C())return!0;let e=su(),n=t.S(e),r=0<n&&n<10,i=UP(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new no(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new P(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new P(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new no(e,o))},i.onupgradeneeded=s=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return N(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=Xp.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),x.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(O("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function UP(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var AE=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Zs(this.B.delete())}},no=class extends P{constructor(e,n){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ls(t){return t.name==="IndexedDbTransactionError"}var xE=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(O("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zs(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),Zs(this.store.add(e))}get(e){return Zs(this.store.get(e)).next(n=>(n===void 0&&(n=null),O("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),Zs(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),Zs(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new x((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new x((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new x((r,i)=>{n.onerror=s=>{let o=w0(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){let r=[];return new x((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new AE(a),l=n(a.primaryKey,a.value,c);if(l instanceof x){let d=l.catch(f=>(c.done(),x.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>x.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Zs(t){return new x((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=w0(r.target.error);n(i)}})}var ON=!1;function w0(t){let e=es.S(su());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ON||(ON=!0,setTimeout(()=>{throw r},0)),r}}return t}var ME=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){ls(n)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield us(n)}yield this.X(6e4)}))}},RE=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,s=!0;return x.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return O("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=LP(s);_0(o,r)>0&&(r=o)}),new Ln(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Dn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function nd(t){return t==null}function Ol(t){return t===0&&1/t==-1/0}function BP(t){return typeof t=="number"&&Number.isInteger(t)&&!Ol(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function tn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=FN(e)),e=k3(t.get(n),e);return FN(e)}function k3(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function FN(t){return t+""}function Tr(t){let e=t.length;if(J(e>=2),e===2)return J(t.charAt(0)===""&&t.charAt(1)===""),Se.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&K(),t.charAt(o+1)){case"":let a=t.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:K()}s=o+2}return new Se(r)}var VN=["userId","batchId"];function qp(t,e){return[t,tn(e)]}function $P(t,e,n){return[t,tn(e),n]}var O3={},F3=["prefixPath","collectionGroup","readTime","documentId"],V3=["prefixPath","collectionGroup","documentId"],L3=["collectionGroup","readTime","prefixPath","documentId"],j3=["canonicalId","targetId"],U3=["targetId","path"],B3=["path","targetId"],$3=["collectionId","parent"],q3=["indexId","uid"],H3=["uid","sequenceNumber"],G3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],z3=["indexId","uid","orderedDocumentKey"],W3=["userId","collectionPath","documentId"],K3=["userId","collectionPath","largestBatchId"],Q3=["userId","collectionGroup","largestBatchId"],qP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Y3=[...qP,"documentOverlays"],HP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GP=HP,zP=[...GP,"indexConfiguration","indexState","indexEntries"],Z3=zP;var Fl=class extends Jp{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Tt(t,e){let n=G(t);return es.F(n._e,e)}function LN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WP(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var We=class t{constructor(e,n){this.comparator=e,this.root=n||Ar.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ar.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ar.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new za(this.root,e,this.comparator,!1)}getReverseIterator(){return new za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new za(this.root,e,this.comparator,!0)}},za=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ar=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};Ar.EMPTY=null,Ar.RED=!0,Ar.BLACK=!1;Ar.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ar(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ue=class t{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new eg(this.data.getIterator())}getIteratorFrom(e){return new eg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},eg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Va(t){return t.hasNext()?t.getNext():void 0}var bn=class t{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ue(ut.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var tg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function KP(){return typeof atob<"u"}var bt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tg("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};bt.EMPTY_BYTE_STRING=new bt("");var J3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ai(t){if(J(!!t),typeof t=="string"){let e=0,n=J3.exec(t);if(J(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ts(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}function Gg(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function E0(t){let e=t.mapValue.fields.__previous_value__;return Gg(e)?E0(e):e}function Vl(t){let e=ai(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}var NE=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},ns=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Zi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hp={nullValue:"NULL_VALUE"};function ro(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gg(t)?4:QP(t)?9007199254740991:10:K()}function Rr(t,e){if(t===e)return!0;let n=ro(t);if(n!==ro(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vl(t).isEqual(Vl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ai(i.timestampValue),a=ai(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ts(i.bytesValue).isEqual(ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return nt(i.geoPointValue.latitude)===nt(s.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nt(i.integerValue)===nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=nt(i.doubleValue),a=nt(s.doubleValue);return o===a?Ol(o)===Ol(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ya(t.arrayValue.values||[],e.arrayValue.values||[],Rr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(LN(o)!==LN(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Rr(o[c],a[c])))return!1;return!0}(t,e);default:return K()}}function Ll(t,e){return(t.values||[]).find(n=>Rr(n,e))!==void 0}function rs(t,e){if(t===e)return 0;let n=ro(t),r=ro(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=nt(s.integerValue||s.doubleValue),c=nt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return jN(t.timestampValue,e.timestampValue);case 4:return jN(Vl(t),Vl(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(s,o){let a=ts(s),c=ts(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=le(a[l],c[l]);if(d!==0)return d}return le(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=le(nt(s.latitude),nt(o.latitude));return a!==0?a:le(nt(s.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=rs(a[l],c[l]);if(d)return d}return le(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Zi.mapValue&&o===Zi.mapValue)return 0;if(s===Zi.mapValue)return 1;if(o===Zi.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=le(c[f],d[f]);if(g!==0)return g;let y=rs(a[c[f]],l[d[f]]);if(y!==0)return y}return le(c.length,d.length)}(t.mapValue,e.mapValue);default:throw K()}}function jN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);let n=ai(t),r=ai(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function Ja(t){return PE(t)}function PE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ai(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=PE(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${PE(n.fields[o])}`;return i+"}"}(t.mapValue):K()}function io(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kE(t){return!!t&&"integerValue"in t}function jl(t){return!!t&&"arrayValue"in t}function UN(t){return!!t&&"nullValue"in t}function BN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gp(t){return!!t&&"mapValue"in t}function xl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return go(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xl(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function X3(t){return"nullValue"in t?Hp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?io(ns.empty(),H.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:K()}function e9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?io(ns.empty(),H.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Zi:K()}function $N(t,e){let n=rs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function qN(t,e){let n=rs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Gt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xl(n)}setAll(e){let n=ut.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=xl(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Gp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){go(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(xl(this.value))}};function YP(t){let e=[];return go(t.fields,(n,r)=>{let i=new ut([n]);if(Gp(r)){let s=YP(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new bn(e)}var yt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),Gt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Nr=class{constructor(e,n){this.position=e,this.inclusive=n}};function HN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=rs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function GN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rr(t.position[n],e.position[n]))return!1;return!0}var so=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function t9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ng=class{},Ce=class t extends ng{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VE(e,n,r):n==="array-contains"?new UE(e,r):n==="in"?new rg(e,r):n==="not-in"?new BE(e,r):n==="array-contains-any"?new $E(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LE(e,r):new jE(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(rs(n,this.value)):n!==null&&ro(this.value)===ro(n)&&this.matchesComparison(rs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fe=class t extends ng{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Xa(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Xa(t){return t.op==="and"}function OE(t){return t.op==="or"}function I0(t){return ZP(t)&&Xa(t)}function ZP(t){for(let e of t.filters)if(e instanceof Fe)return!1;return!0}function FE(t){if(t instanceof Ce)return t.field.canonicalString()+t.op.toString()+Ja(t.value);if(I0(t))return t.filters.map(e=>FE(e)).join(",");{let e=t.filters.map(n=>FE(n)).join(",");return`${t.op}(${e})`}}function JP(t,e){return t instanceof Ce?function(r,i){return i instanceof Ce&&r.op===i.op&&r.field.isEqual(i.field)&&Rr(r.value,i.value)}(t,e):t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&JP(o,i.filters[a]),!0):!1}(t,e):void K()}function XP(t,e){let n=t.filters.concat(e);return Fe.create(n,t.op)}function e1(t){return t instanceof Ce?function(n){return`${n.field.canonicalString()} ${n.op} ${Ja(n.value)}`}(t):t instanceof Fe?function(n){return n.op.toString()+" {"+n.getFilters().map(e1).join(" ,")+"}"}(t):"Filter"}var VE=class extends Ce{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},LE=class extends Ce{constructor(e,n){super(e,"in",n),this.keys=t1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},jE=class extends Ce{constructor(e,n){super(e,"not-in",n),this.keys=t1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function t1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var UE=class extends Ce{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return jl(n)&&Ll(n.arrayValue,this.value)}},rg=class extends Ce{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ll(this.value.arrayValue,n)}},BE=class extends Ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ll(this.value.arrayValue,n)}},$E=class extends Ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!jl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ll(this.value.arrayValue,r))}};var qE=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function HE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new qE(t,e,n,r,i,s,o)}function oo(t){let e=G(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>FE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),nd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ja(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ja(r)).join(",")),e.ue=n}return e.ue}function rd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!t9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!GN(t.startAt,e.startAt)&&GN(t.endAt,e.endAt)}function ig(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function sg(t,e){return t.filters.filter(n=>n instanceof Ce&&n.field.isEqual(e))}function zN(t,e,n){let r=Hp,i=!0;for(let s of sg(t,e)){let o=Hp,a=!0;switch(s.op){case"<":case"<=":o=X3(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Hp}$N({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];$N({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function WN(t,e,n){let r=Zi,i=!0;for(let s of sg(t,e)){let o=Zi,a=!0;switch(s.op){case">=":case">":o=e9(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Zi}qN({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];qN({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var nr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function n1(t,e,n,r,i,s,o,a){return new nr(t,e,n,r,i,s,o,a)}function pc(t){return new nr(t)}function KN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function C0(t){return t.collectionGroup!==null}function Ka(t){let e=G(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ue(ut.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new so(s,r))}),n.has(ut.keyField().canonicalString())||e.ce.push(new so(ut.keyField(),r))}return e.ce}function nn(t){let e=G(t);return e.le||(e.le=n9(e,Ka(t))),e.le}function n9(t,e){if(t.limitType==="F")return HE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new so(i.field,s)});let n=t.endAt?new Nr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Nr(t.startAt.position,t.startAt.inclusive):null;return HE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function GE(t,e){let n=t.filters.concat([e]);return new nr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function og(t,e,n){return new nr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function id(t,e){return rd(nn(t),nn(e))&&t.limitType===e.limitType}function r1(t){return`${oo(nn(t))}|lt:${t.limitType}`}function $a(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>e1(i)).join(", ")}]`),nd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ja(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ja(i)).join(",")),`Target(${r})`}(nn(t))}; limitType=${t.limitType})`}function sd(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Ka(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=HN(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Ka(r),i)||r.endAt&&!function(o,a,c){let l=HN(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Ka(r),i))}(t,e)}function i1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function s1(t){return(e,n)=>{let r=!1;for(let i of Ka(t)){let s=r9(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function r9(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?rs(c,l):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var Pr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return WP(this.inner)}size(){return this.innerSize}};var i9=new We(H.comparator);function dn(){return i9}var o1=new We(H.comparator);function Sl(...t){let e=o1;for(let n of t)e=e.insert(n.key,n);return e}function a1(t){let e=o1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sr(){return Ml()}function c1(){return Ml()}function Ml(){return new Pr(t=>t.toString(),(t,e)=>t.isEqual(e))}var s9=new We(H.comparator),o9=new Ue(H.comparator);function he(...t){let e=o9;for(let n of t)e=e.add(n);return e}var a9=new Ue(le);function D0(){return a9}function u1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ol(e)?"-0":e}}function l1(t){return{integerValue:""+t}}function d1(t,e){return BP(e)?l1(e):u1(t,e)}var ec=class{constructor(){this._=void 0}};function c9(t,e,n){return t instanceof is?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Gg(s)&&(s=E0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ci?f1(t,e):t instanceof ui?p1(t,e):function(i,s){let o=h1(i,s),a=QN(o)+QN(i.Pe);return kE(o)&&kE(i.Pe)?l1(a):u1(i.serializer,a)}(t,e)}function u9(t,e,n){return t instanceof ci?f1(t,e):t instanceof ui?p1(t,e):n}function h1(t,e){return t instanceof ss?function(r){return kE(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var is=class extends ec{},ci=class extends ec{constructor(e){super(),this.elements=e}};function f1(t,e){let n=g1(e);for(let r of t.elements)n.some(i=>Rr(i,r))||n.push(r);return{arrayValue:{values:n}}}var ui=class extends ec{constructor(e){super(),this.elements=e}};function p1(t,e){let n=g1(e);for(let r of t.elements)n=n.filter(i=>!Rr(i,r));return{arrayValue:{values:n}}}var ss=class extends ec{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function QN(t){return nt(t.integerValue||t.doubleValue)}function g1(t){return jl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ao=class{constructor(e,n){this.field=e,this.transform=n}};function l9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ci&&i instanceof ci||r instanceof ui&&i instanceof ui?Ya(r.elements,i.elements,Rr):r instanceof ss&&i instanceof ss?Rr(r.Pe,i.Pe):r instanceof is&&i instanceof is}(t.transform,e.transform)}var zE=class{constructor(e,n){this.version=e,this.transformResults=n}},rt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var tc=class{};function m1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new as(t.key,rt.none()):new os(t.key,t.data,rt.none());{let n=t.data,r=Gt.empty(),i=new Ue(ut.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new rr(t.key,r,new bn(i.toArray()),rt.none())}}function d9(t,e,n){t instanceof os?function(i,s,o){let a=i.value.clone(),c=ZN(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof rr?function(i,s,o){if(!zp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=ZN(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(y1(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Rl(t,e,n,r){return t instanceof os?function(s,o,a,c){if(!zp(s.precondition,o))return a;let l=s.value.clone(),d=JN(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof rr?function(s,o,a,c){if(!zp(s.precondition,o))return a;let l=JN(s.fieldTransforms,c,o),d=o.data;return d.setAll(y1(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return zp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function h9(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=h1(r.transform,i||null);s!=null&&(n===null&&(n=Gt.empty()),n.set(r.field,s))}return n||null}function YN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ya(r,i,(s,o)=>l9(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var os=class extends tc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},rr=class extends tc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function y1(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function ZN(t,e,n){let r=new Map;J(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,u9(o,a,n[i]))}return r}function JN(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,c9(s,o,e))}return r}var as=class extends tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ul=class extends tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Bl=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&d9(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=c1();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=m1(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,(n,r)=>YN(n,r))&&Ya(this.baseMutations,e.baseMutations,(n,r)=>YN(n,r))}},WE=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){J(e.mutations.length===r.length);let i=function(){return s9}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var $l=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var KE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ft,Te;function v1(t){switch(t){default:return K();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function _1(t){if(t===void 0)return ct("GRPC error has no .code"),R.UNKNOWN;switch(t){case ft.OK:return R.OK;case ft.CANCELLED:return R.CANCELLED;case ft.UNKNOWN:return R.UNKNOWN;case ft.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case ft.INTERNAL:return R.INTERNAL;case ft.UNAVAILABLE:return R.UNAVAILABLE;case ft.UNAUTHENTICATED:return R.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case ft.NOT_FOUND:return R.NOT_FOUND;case ft.ALREADY_EXISTS:return R.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return R.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case ft.ABORTED:return R.ABORTED;case ft.OUT_OF_RANGE:return R.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return R.UNIMPLEMENTED;case ft.DATA_LOSS:return R.DATA_LOSS;default:return K()}}(Te=ft||(ft={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";var XN=null;function w1(){return new TextEncoder}var f9=new zi([4294967295,4294967295],0);function eP(t){let e=w1().encode(t),n=new uE;return n.update(e),new Uint8Array(n.digest())}function tP(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zi([n,r],0),new zi([i,s],0)]}var QE=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new to(`Invalid padding: ${n}`);if(r<0)throw new to(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new to(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new to(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=zi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(zi.fromNumber(r)));return i.compare(f9)===1&&(i=new zi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=eP(e),[r,i]=tP(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=eP(e),[r,i]=tP(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},to=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ql=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Hl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new We(le),dn(),he())}},Hl=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,he(),he(),he())}};var Qa=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},ag=class{constructor(e,n){this.targetId=e,this.me=n}},cg=class{constructor(e,n,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ug=class{constructor(){this.fe=0,this.ge=rP(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=he(),n=he(),r=he();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Hl(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=rP()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,J(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},YE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=dn(),this.qe=nP(),this.Qe=new We(le)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(ig(s))if(r===0){let o=new H(s.path);this.Ue(n,o,yt.newNoDocument(o,te.min()))}else J(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}XN?.et(function(d,f,g,y,E){var D,S,k,$,F,Y;let ie={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},ne=f.unchangedNames;return ne&&(ie.bloomFilter={applied:E===0,hashCount:(D=ne?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:($=(k=(S=ne?.bits)===null||S===void 0?void 0:S.bitmap)===null||k===void 0?void 0:k.length)!==null&&$!==void 0?$:0,padding:(Y=(F=ne?.bits)===null||F===void 0?void 0:F.padding)!==null&&Y!==void 0?Y:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),ie}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=ts(r).toUint8Array()}catch(c){if(c instanceof tg)return Vn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new QE(o,i,s)}catch(c){return Vn(c instanceof to?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&ig(a.target)){let c=new H(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,yt.newNoDocument(c,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=he();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new ql(e,n,this.Qe,this.ke,r);return this.ke=dn(),this.qe=nP(),this.Qe=new We(le),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ug,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ue(le),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ug),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function nP(){return new We(H.comparator)}function rP(){return new We(H.comparator)}var p9={asc:"ASCENDING",desc:"DESCENDING"},g9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m9={and:"AND",or:"OR"},ZE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function JE(t,e){return t.useProto3Json||nd(e)?e:{value:e}}function nc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function y9(t,e){return nc(t,e.toTimestamp())}function lt(t){return J(!!t),te.fromTimestamp(function(n){let r=ai(n);return new Je(r.seconds,r.nanos)}(t))}function b0(t,e){return XE(t,e).canonicalString()}function XE(t,e){let n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function I1(t){let e=Se.fromString(t);return J(N1(e)),e}function Gl(t,e){return b0(t.databaseId,e.path)}function xr(t,e){let n=I1(e);if(n.get(1)!==t.databaseId.projectId)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(b1(n))}function C1(t,e){return b0(t.databaseId,e)}function D1(t){let e=I1(t);return e.length===4?Se.emptyPath():b1(e)}function eI(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function b1(t){return J(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function iP(t,e,n){return{name:Gl(t,e),fields:n.value.mapValue.fields}}function T1(t,e,n){let r=xr(t,e.name),i=lt(e.updateTime),s=e.createTime?lt(e.createTime):te.min(),o=new Gt({mapValue:{fields:e.fields}}),a=yt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function v9(t,e){return"found"in e?function(r,i){J(!!i.found),i.found.name,i.found.updateTime;let s=xr(r,i.found.name),o=lt(i.found.updateTime),a=i.found.createTime?lt(i.found.createTime):te.min(),c=new Gt({mapValue:{fields:i.found.fields}});return yt.newFoundDocument(s,o,a,c)}(t,e):"missing"in e?function(r,i){J(!!i.missing),J(!!i.readTime);let s=xr(r,i.missing),o=lt(i.readTime);return yt.newNoDocument(s,o)}(t,e):K()}function _9(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(J(d===void 0||typeof d=="string"),bt.fromBase64String(d||"")):(J(d===void 0||d instanceof Buffer||d instanceof Uint8Array),bt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?R.UNKNOWN:_1(l.code);return new P(d,l.message||"")}(o);n=new cg(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xr(t,r.document.name),s=lt(r.document.updateTime),o=r.document.createTime?lt(r.document.createTime):te.min(),a=new Gt({mapValue:{fields:r.document.fields}}),c=yt.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new Qa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xr(t,r.document),s=r.readTime?lt(r.readTime):te.min(),o=yt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Qa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xr(t,r.document),s=r.removedTargetIds||[];n=new Qa([],s,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new KE(i,s),a=r.targetId;n=new ag(a,o)}}return n}function zl(t,e){let n;if(e instanceof os)n={update:iP(t,e.key,e.value)};else if(e instanceof as)n={delete:Gl(t,e.key)};else if(e instanceof rr)n={update:iP(t,e.key,e.data),updateMask:b9(e.fieldMask)};else{if(!(e instanceof Ul))return K();n={verify:Gl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof is)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ci)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ui)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ss)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:y9(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(t,e.precondition)),n}function tI(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?rt.updateTime(lt(s.updateTime)):s.exists!==void 0?rt.exists(s.exists):rt.none()}(e.currentDocument):rt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)J(a.setToServerValue==="REQUEST_TIME"),c=new is;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new ci(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new ui(d)}else"increment"in a?c=new ss(o,a.increment):K();let l=ut.fromServerFormat(a.fieldPath);return new ao(l,c)}(t,i)):[];if(e.update){e.update.name;let i=xr(t,e.update.name),s=new Gt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new bn(l.map(d=>ut.fromServerFormat(d)))}(e.updateMask);return new rr(i,s,o,n,r)}return new os(i,s,n,r)}if(e.delete){let i=xr(t,e.delete);return new as(i,n)}if(e.verify){let i=xr(t,e.verify);return new Ul(i,n)}return K()}function w9(t,e){return t&&t.length>0?(J(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?lt(i.updateTime):lt(s);return o.isEqual(te.min())&&(o=lt(s)),new zE(o,i.transformResults||[])}(n,e))):[]}function S1(t,e){return{documents:[C1(t,e.path)]}}function A1(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=C1(t,i);let s=function(l){if(l.length!==0)return R1(Fe.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:qa(g.field),direction:I9(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=JE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function x1(t){let e=D1(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){J(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let g=M1(f);return g instanceof Fe&&I0(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(E){return new so(Ha(E.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,nd(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){let g=!!f.before,y=f.values||[];return new Nr(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new Nr(y,g)}(n.endAt)),n1(e,i,o,s,a,"F",c,l)}function E9(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function M1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ha(n.unaryFilter.field);return Ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ha(n.unaryFilter.field);return Ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ha(n.unaryFilter.field);return Ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ha(n.unaryFilter.field);return Ce.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return Ce.create(Ha(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fe.create(n.compositeFilter.filters.map(r=>M1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function I9(t){return p9[t]}function C9(t){return g9[t]}function D9(t){return m9[t]}function qa(t){return{fieldPath:t.canonicalString()}}function Ha(t){return ut.fromServerFormat(t.fieldPath)}function R1(t){return t instanceof Ce?function(n){if(n.op==="=="){if(BN(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NAN"}};if(UN(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BN(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NOT_NAN"}};if(UN(n.value))return{unaryFilter:{field:qa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qa(n.field),op:C9(n.op),value:n.value}}}(t):t instanceof Fe?function(n){let r=n.getFilters().map(i=>R1(i));return r.length===1?r[0]:{compositeFilter:{op:D9(n.op),filters:r}}}(t):K()}function b9(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function N1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var rc=class t{constructor(e,n,r,i,s=te.min(),o=te.min(),a=bt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var lg=class{constructor(e){this.ct=e}};function T9(t,e){let n;if(e.document)n=T1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=H.fromSegments(e.noDocument.path),i=uo(e.noDocument.readTime);n=yt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let r=H.fromSegments(e.unknownDocument.path),i=uo(e.unknownDocument.version);n=yt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new Je(i[0],i[1]);return te.fromTimestamp(s)}(e.readTime)),n}function sP(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:dg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Gl(s,o.key),fields:o.data.value.mapValue.fields,updateTime:nc(s,o.version.toTimestamp()),createTime:nc(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:co(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:n.path.toArray(),version:co(e.version)}}return r}function dg(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function co(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function uo(t){let e=new Je(t.seconds,t.nanoseconds);return te.fromTimestamp(e)}function Js(t,e){let n=(e.baseMutations||[]).map(s=>tI(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>tI(t.ct,s)),i=Je.fromMillis(e.localWriteTimeMs);return new Bl(e.batchId,i,n,r)}function Al(t){let e=uo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?uo(t.lastLimboFreeSnapshotVersion):te.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return J(s.documents.length===1),nn(pc(D1(s.documents[0])))}(t.query):function(s){return nn(x1(s))}(t.query),new rc(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,bt.fromBase64String(t.resumeToken))}function P1(t,e){let n=co(e.snapshotVersion),r=co(e.lastLimboFreeSnapshotVersion),i;i=ig(e.target)?S1(t.ct,e.target):A1(t.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function T0(t){let e=x1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?og(e,e.limit,"L"):e}function mE(t,e){return new $l(e.largestBatchId,tI(t.ct,e.overlayMutation))}function oP(t,e){let n=e.path.lastSegment();return[t,tn(e.path.popLast()),n]}function aP(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:co(r.readTime),documentKey:tn(r.documentKey.path),largestBatchId:r.largestBatchId}}var nI=class{getBundleMetadata(e,n){return cP(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:uo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return cP(e).put(function(i){return{bundleId:i.id,createTime:co(lt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return uP(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:T0(s.bundledQuery),readTime:uo(s.readTime)}}(r)})}saveNamedQuery(e,n){return uP(e).put(function(i){return{name:i.name,readTime:co(lt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function cP(t){return Tt(t,"bundles")}function uP(t){return Tt(t,"namedQueries")}var hg=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Cl(e).get(oP(this.userId,n)).next(r=>r?mE(this.serializer,r):null)}getOverlays(e,n){let r=Sr();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new $l(n,o);i.push(this.ht(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(tn(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Cl(e).j("collectionPathOverlayIndex",a))}),x.waitFor(s)}getOverlaysForCollection(e,n,r){let i=Sr(),s=tn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Cl(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=mE(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=Sr(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Cl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=mE(this.serializer,l);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return Cl(e).put(function(i,s,o){let[a,c,l]=oP(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:zl(i.ct,o.mutation)}}(this.serializer,this.userId,n))}};function Cl(t){return Tt(t,"documentOverlays")}var si=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(nt(e.integerValue));else if("doubleValue"in e){let r=nt(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Ol(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=ai(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(ts(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?QP(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):K()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),H.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};si.bt=new si;function S9(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function lP(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=S9(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var rI=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let n=this.Bt(e),r=lP(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Bt(e),r=lP(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},iI=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},sI=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Xs=class{constructor(){this.Gt=new rI,this.zt=new iI(this.Gt),this.jt=new sI(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var eo=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Wi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=dP(t.arrayValue,e.arrayValue),n!==0?n:(n=dP(t.directionalValue,e.directionalValue),n!==0?n:H.comparator(t.documentKey,e.documentKey)))}function dP(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var fg=class{constructor(e){this.Yt=new Ue((n,r)=>ut.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(J(e.collectionGroup===this.collectionId),this.en)return!1;let n=SE(e);if(n!==void 0&&!this.nn(n))return!1;let r=Ys(e),i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ue(ut.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Wa(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Wa(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Wa(r.field,r.dir==="asc"?0:1)));return new Za(Za.UNKNOWN_ID,this.collectionId,n,kl.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function k1(t){var e,n;if(J(t instanceof Ce||t instanceof Fe),t instanceof Ce){if(t instanceof rg){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Ce.create(t.field,"==",s)))||[];return Fe.create(i,"or")}return t}let r=t.filters.map(i=>k1(i));return Fe.create(r,t.op)}function A9(t){if(t.getFilters().length===0)return[];let e=cI(k1(t));return J(O1(e)),oI(e)||aI(e)?[e]:e.getFilters()}function oI(t){return t instanceof Ce}function aI(t){return t instanceof Fe&&I0(t)}function O1(t){return oI(t)||aI(t)||function(n){if(n instanceof Fe&&OE(n)){for(let r of n.getFilters())if(!oI(r)&&!aI(r))return!1;return!0}return!1}(t)}function cI(t){if(J(t instanceof Ce||t instanceof Fe),t instanceof Ce)return t;if(t.filters.length===1)return cI(t.filters[0]);let e=t.filters.map(r=>cI(r)),n=Fe.create(e,t.op);return n=pg(n),O1(n)?n:(J(n instanceof Fe),J(Xa(n)),J(n.filters.length>1),n.filters.reduce((r,i)=>S0(r,i)))}function S0(t,e){let n;return J(t instanceof Ce||t instanceof Fe),J(e instanceof Ce||e instanceof Fe),n=t instanceof Ce?e instanceof Ce?function(i,s){return Fe.create([i,s],"and")}(t,e):hP(t,e):e instanceof Ce?hP(e,t):function(i,s){if(J(i.filters.length>0&&s.filters.length>0),Xa(i)&&Xa(s))return XP(i,s.getFilters());let o=OE(i)?i:s,a=OE(i)?s:i,c=o.filters.map(l=>S0(l,a));return Fe.create(c,"or")}(t,e),pg(n)}function hP(t,e){if(Xa(e))return XP(e,t.getFilters());{let n=e.filters.map(r=>S0(t,r));return Fe.create(n,"or")}}function pg(t){if(J(t instanceof Ce||t instanceof Fe),t instanceof Ce)return t;let e=t.getFilters();if(e.length===1)return pg(e[0]);if(ZP(t))return t;let n=e.map(i=>pg(i)),r=[];return n.forEach(i=>{i instanceof Ce?r.push(i):i instanceof Fe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Fe.create(r,t.op)}var uI=class{constructor(){this._n=new Wl}addToCollectionParentIndex(e,n){return this._n.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Ln.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Ln.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Wl=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ue(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ue(Se.comparator)).toArray()}};var jp=new Uint8Array(0),lI=class{constructor(e,n){this.databaseId=n,this.an=new Wl,this.un=new Pr(r=>oo(r),(r,i)=>rd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let s={collectionId:r,parent:tn(i)};return fP(e).put(s)}return x.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[FP(n),""],!1,!0);return fP(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(Tr(o.parent))}return r})}addFieldIndex(e,n){let r=Dl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=ja(e);return s.next(a=>{o.put(aP(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=Dl(e),i=ja(e),s=La(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Dl(e),r=La(e),i=ja(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return x.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new fg(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=La(e),i=!0,s=new Map;return x.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=he(),a=[];return x.forEach(s,(c,l)=>{O("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(c)} to execute ${oo(n)}`);let d=function(F,Y){let ie=SE(Y);if(ie===void 0)return null;for(let ne of sg(F,ie.fieldPath))switch(ne.op){case"array-contains-any":return ne.value.arrayValue.values||[];case"array-contains":return[ne.value]}return null}(l,c),f=function(F,Y){let ie=new Map;for(let ne of Ys(Y))for(let I of sg(F,ne.fieldPath))switch(I.op){case"==":case"in":ie.set(ne.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ie.set(ne.fieldPath.canonicalString(),I.value),Array.from(ie.values())}return null}(l,c),g=function(F,Y){let ie=[],ne=!0;for(let I of Ys(Y)){let v=I.kind===0?zN(F,I.fieldPath,F.startAt):WN(F,I.fieldPath,F.startAt);ie.push(v.value),ne&&(ne=v.inclusive)}return new Nr(ie,ne)}(l,c),y=function(F,Y){let ie=[],ne=!0;for(let I of Ys(Y)){let v=I.kind===0?WN(F,I.fieldPath,F.endAt):zN(F,I.fieldPath,F.endAt);ie.push(v.value),ne&&(ne=v.inclusive)}return new Nr(ie,ne)}(l,c),E=this.hn(c,l,g),D=this.hn(c,l,y),S=this.Pn(c,l,f),k=this.In(c.indexId,d,E,g.inclusive,D,y.inclusive,S);return x.forEach(k,$=>r.G($,n.limit).next(F=>{F.forEach(Y=>{let ie=H.fromSegments(Y.documentKey);o.has(ie)||(o=o.add(ie),a.push(ie))})}))}).next(()=>a)}return x.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=A9(Fe.create(e.filters,"and")).map(r=>HE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){let c=(n!=null?n.length:1)*Math.max(r.length,s.length),l=c/(n!=null?n.length:1),d=[];for(let f=0;f<c;++f){let g=n?this.Tn(n[f/l]):jp,y=this.En(e,g,r[f%l],i),E=this.dn(e,g,s[f%l],o),D=a.map(S=>this.En(e,g,S,!0));d.push(...this.createRange(y,E,D))}return d}En(e,n,r,i){let s=new eo(e,H.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){let s=new eo(e,H.empty(),n,r);return i?s.Jt():s}ln(e,n){let r=new fg(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.cn(n);return x.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Ue(ut.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new Xs;for(let i of Ys(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.Ht(i.kind);si.bt.Pt(s,o)}return r.Wt()}Tn(e){let n=new Xs;return si.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new Xs;return si.bt.Pt(io(this.databaseId,n),r.Ht(function(s){let o=Ys(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new Xs);let s=0;for(let o of Ys(e)){let a=r[s++];for(let c of i)if(this.Vn(n,o.fieldPath)&&jl(a))i=this.mn(i,o,a);else{let l=c.Ht(o.kind);si.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new Xs;c.seed(a.Wt()),si.bt.Pt(o,c.Ht(n.kind)),s.push(c)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof Ce&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Dl(e),i=ja(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{let o=[];return x.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(d,f){let g=f?new kl(f.sequenceNumber,new Ln(uo(f.readTime),new H(Tr(f.documentKey)),f.largestBatchId)):kl.empty(),y=d.fields.map(([E,D])=>new Wa(ut.fromServerFormat(E),D));return new Za(d.indexId,d.collectionGroup,y,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:le(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Dl(e),s=ja(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>x.forEach(a,c=>s.put(aP(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return x.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?x.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,c=>this.pn(e,i,c).next(l=>{let d=this.yn(s,c);return l.isEqual(d)?x.resolve():this.wn(e,s,c,l,d)}))))})}Sn(e,n,r,i){return La(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return La(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=La(e),s=new Ue(Wi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new eo(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new Ue(Wi),i=this.An(n,e);if(i==null)return r;let s=SE(n);if(s!=null){let o=e.data.field(s.fieldPath);if(jl(o))for(let a of o.arrayValue.values||[])r=r.add(new eo(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new eo(n.indexId,e.key,jp,i));return r}wn(e,n,r,i,s){O("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,l,d,f,g){let y=c.getIterator(),E=l.getIterator(),D=Va(y),S=Va(E);for(;D||S;){let k=!1,$=!1;if(D&&S){let F=d(D,S);F<0?$=!0:F>0&&(k=!0)}else D!=null?$=!0:k=!0;k?(f(S),S=Va(E)):$?(g(D),D=Va(y)):(D=Va(y),S=Va(E))}}(i,s,Wi,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),x.waitFor(o)}gn(e){let n=1;return ja(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Wi(o,a)).filter((o,a,c)=>!a||Wi(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Wi(o,e),c=Wi(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,jp,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,jp,[]];s.push(IDBKeyRange.bound(a,c))}return s}Dn(e,n){return Wi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(pP)}getMinOffset(e,n){return x.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||K())).next(pP)}};function fP(t){return Tt(t,"collectionParents")}function La(t){return Tt(t,"indexEntries")}function Dl(t){return Tt(t,"indexConfiguration")}function ja(t){return Tt(t,"indexState")}function pP(t){J(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;_0(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ln(e.readTime,e.documentKey,n)}var gP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function F1(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=r.J({range:o},(d,f,g)=>(a++,g.delete()));s.push(c.next(()=>{J(a===1)}));let l=[];for(let d of n.mutations){let f=$P(e,d.key.path,n.batchId);s.push(i.delete(f)),l.push(d.key)}return x.waitFor(s).next(()=>l)}function gg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw K();e=t.noDocument}return JSON.stringify(e).length}Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(41943040,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);var mg=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){J(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ki(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=Ga(e),o=Ki(e);return o.add({}).next(a=>{J(typeof a=="number");let c=new Bl(a,n,r,i),l=function(y,E,D){let S=D.baseMutations.map($=>zl(y.ct,$)),k=D.mutations.map($=>zl(y.ct,$));return{userId:E,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:S,mutations:k}}(this.serializer,this.userId,c),d=[],f=new Ue((g,y)=>le(g.canonicalString(),y.canonicalString()));for(let g of i){let y=$P(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(l)),d.push(s.put(y,O3))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),x.waitFor(d).next(()=>c)})}lookupMutationBatch(e,n){return Ki(e).get(n).next(r=>r?(J(r.userId===this.userId),Js(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?x.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Ki(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(J(a.batchId>=r),s=Js(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Ki(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ki(e).U("userMutationsIndex",n).next(r=>r.map(i=>Js(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=qp(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ga(e).J({range:i},(o,a,c)=>{let[l,d,f]=o,g=Tr(d);if(l===this.userId&&n.path.isEqual(g))return Ki(e).get(f).next(y=>{if(!y)throw K();J(y.userId===this.userId),s.push(Js(this.serializer,y))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ue(le),i=[];return n.forEach(s=>{let o=qp(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Ga(e).J({range:a},(l,d,f)=>{let[g,y,E]=l,D=Tr(y);g===this.userId&&s.path.isEqual(D)?r=r.add(E):f.done()});i.push(c)}),x.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=qp(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ue(le);return Ga(e).J({range:o},(c,l,d)=>{let[f,g,y]=c,E=Tr(g);f===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(s=>{i.push(Ki(e).get(s).next(o=>{if(o===null)throw K();J(o.userId===this.userId),r.push(Js(this.serializer,o))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return F1(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return x.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ga(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Tr(s[1]);i.push(c)}else a.done()}).next(()=>{J(i.length===0)})})}containsKey(e,n){return V1(e,this.userId,n)}xn(e){return L1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function V1(t,e,n){let r=qp(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Ga(t).J({range:s,H:!0},(a,c,l)=>{let[d,f,g]=a;d===e&&f===i&&(o=!0),l.done()}).next(()=>o)}function Ki(t){return Tt(t,"mutations")}function Ga(t){return Tt(t,"documentMutations")}function L1(t){return Tt(t,"mutationQueues")}var ic=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var dI=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new ic(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>te.fromTimestamp(new Je(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ua(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(J(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,s=[];return Ua(e).J((o,a)=>{let c=Al(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>x.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ua(e).J((r,i)=>{let s=Al(i);n(s)})}Bn(e){return mP(e).get("targetGlobalKey").next(n=>(J(n!==null),n))}kn(e,n){return mP(e).put("targetGlobalKey",n)}qn(e,n){return Ua(e).put(P1(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=oo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Ua(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=Al(a);rd(n,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=Qi(e);return n.forEach(o=>{let a=tn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),x.waitFor(i)}removeMatchingKeys(e,n,r){let i=Qi(e);return x.forEach(n,s=>{let o=tn(s.path);return x.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=Qi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Qi(e),s=he();return i.J({range:r,H:!0},(o,a,c)=>{let l=Tr(o[1]),d=new H(l);s=s.add(d)}).next(()=>s)}containsKey(e,n){let r=tn(n.path),i=IDBKeyRange.bound([r],[FP(r)],!1,!0),s=0;return Qi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,n){return Ua(e).get(n).next(r=>r?Al(r):null)}};function Ua(t){return Tt(t,"targets")}function mP(t){return Tt(t,"targetGlobal")}function Qi(t){return Tt(t,"targetDocuments")}function yP([t,e],[n,r]){let i=le(t,n);return i===0?le(e,r):i}var hI=class{constructor(e){this.Kn=e,this.buffer=new Ue(yP),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();yP(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},fI=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ls(n)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield us(n)}yield this.zn(3e5)}))}},pI=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(Dn.oe);let r=new hI(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(gP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gP):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Ba()<=Rn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function x9(t,e){return new pI(t,e)}var gI=class{constructor(e,n){this.db=e,this.garbageCollector=x9(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Up(e,r)}removeReference(e,n,r){return Up(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Up(e,n)}er(e,n){return function(i,s){let o=!1;return L1(i).Y(a=>V1(i,a,s).next(c=>(c&&(o=!0),x.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.Xn(e,(o,a)=>{if(a<=n){let c=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,te.min()),Qi(e).delete(function(f){return[0,tn(f.path)]}(o))))});i.push(c)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Up(e,n)}Xn(e,n){let r=Qi(e),i,s=Dn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==Dn.oe&&n(new H(Tr(i)),s),s=l,i=c):s=Dn.oe}).next(()=>{s!==Dn.oe&&n(new H(Tr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Up(t,e){return Qi(t).put(function(r,i){return{targetId:0,path:tn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var yg=class{constructor(){this.changes=new Pr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var mI=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Qs(e).put(r)}removeEntry(e,n,r){return Qs(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],dg(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=yt.newInvalidDocument(n);return Qs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bl(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:yt.newInvalidDocument(n)};return Qs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bl(n))},(i,s)=>{r={document:this.nr(n,s),size:gg(s)}}).next(()=>r)}getEntries(e,n){let r=dn();return this.ir(e,n,(i,s)=>{let o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=dn(),i=new We(H.comparator);return this.ir(e,n,(s,o)=>{let a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,gg(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return x.resolve();let i=new Ue(wP);n.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(bl(i.first()),bl(i.last())),o=i.getIterator(),a=o.getNext();return Qs(e).J({index:"documentKeyIndex",range:s},(c,l,d)=>{let f=H.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&wP(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?d.$(bl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),dg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qs(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let d=dn();for(let f of l){let g=this.nr(H.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(sd(n,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=dn(),o=_P(n,r),a=_P(n,Ln.max());return Qs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,d)=>{let f=this.nr(H.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new yI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return vP(e).get("remoteDocumentGlobalKey").next(n=>(J(!!n),n))}tr(e,n){return vP(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=T9(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(te.min())))return r}return yt.newInvalidDocument(e)}};function j1(t){return new mI(t)}var yI=class extends yg{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Pr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ue((s,o)=>le(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=sP(this.ar.serializer,o);i=i.add(s.path.popLast());let l=gg(c);r+=l-a.size,n.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=sP(this.ar.serializer,o.convertToNoDocument(te.min()));n.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),x.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function vP(t){return Tt(t,"remoteDocumentGlobal")}function Qs(t){return Tt(t,"remoteDocumentsV14")}function bl(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _P(t,e){let n=e.documentKey.path.toArray();return[t,dg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function wP(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=le(n[s],r[s]),i)return i;return i=le(n.length,r.length),i||(i=le(n[n.length-2],r[r.length-2]),i||le(n[n.length-1],r[r.length-1]))}var vI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var vg=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Rl(r.mutation,i,bn.empty(),Je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){let i=Sr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Sl();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=dn(),o=Ml(),a=function(){return Ml()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof rr)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Rl(d.mutation,l,d.mutation.getFieldMask(),Je.now())):o.set(l.key,bn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new vI(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ml(),i=new We((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||bn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||he()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=c1();d.forEach(g=>{if(!s.has(g)){let y=m1(n.get(g),r.get(g));y!==null&&f.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):C0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(Sr()),a=-1,c=s;return o.next(l=>x.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?x.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,he())).next(d=>({batchId:a,changes:a1(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=Sl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Sl();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,c=>{let l=function(f,g){return new nr(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,yt.newInvalidDocument(d)))});let a=Sl();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Rl(d.mutation,l,bn.empty(),Je.now()),sd(n,l)&&(a=a.insert(c,l))}),a})}};var _I=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return x.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:lt(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:T0(i.bundledQuery),readTime:lt(i.readTime)}}(n)),x.resolve()}};var wI=class{constructor(){this.overlays=new We(H.comparator),this.hr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Sr();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=Sr(),s=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new We((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Sr(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Sr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return x.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $l(n,r));let s=this.hr.get(n);s===void 0&&(s=he(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Kl=class{constructor(){this.Pr=new Ue(pt.Ir),this.Tr=new Ue(pt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new pt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new pt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new H(new Se([])),r=new pt(n,e),i=new pt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new H(new Se([])),r=new pt(n,e),i=new pt(n,e+1),s=he();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new pt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},pt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return H.comparator(e.key,n.key)||le(e.pr,n.pr)}static Er(e,n){return le(e.pr,n.pr)||H.comparator(e.key,n.key)}};var EI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ue(pt.Ir)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Bl(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new pt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new pt(n,0),i=new pt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ue(le);return n.forEach(i=>{let s=new pt(i,0),o=new pt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),x.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;H.isDocumentKey(s)||(s=s.child(""));let o=new pt(new H(s),0),a=new Ue(le);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),x.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){J(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return x.forEach(n.mutations,i=>{let s=new pt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new pt(n,0),i=this.wr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var II=class{constructor(e){this.vr=e,this.docs=function(){return new We(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=dn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=dn(),o=n.path,a=new H(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||_0(LP(d),r)<=0||(i.has(d.key)||sd(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){K()}Fr(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new CI(this)}getSize(e){return x.resolve(this.size)}},CI=class extends yg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var DI=class{constructor(e){this.persistence=e,this.Mr=new Pr(n=>oo(n),rd),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Kl,this.targetCount=0,this.Lr=ic.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),x.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new ic(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.qn(n),x.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Nr.containsKey(n))}};var _g=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Dn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new DI(this),this.indexManager=new uI,this.remoteDocumentCache=function(i){return new II(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new lg(n),this.$r=new _I(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new EI(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new bI(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},bI=class extends Jp{constructor(e){super(),this.currentSequenceNumber=e}},wg=class t{constructor(e){this.persistence=e,this.zr=new Kl,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw K()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),x.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Jr,r=>{let i=H.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return x.or([()=>x.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var TI=class{constructor(e){this.serializer=e}O(e,n,r,i){let s=new Xp("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VN,{unique:!0}),c.createObjectStore("documentMutations")}(e),EP(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=x.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),EP(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",VN,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return x.waitFor(g)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:W3});l.createIndex("collectionPathOverlayIndex",K3,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Q3,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:F3});l.createIndex("documentKeyIndex",V3),l.createIndex("collectionGroupIndex",L3)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:q3}).createIndex("sequenceNumberIndex",H3,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:G3}).createIndex("documentKeyIndex",z3,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=gg(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>x.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>x.forEach(a,c=>{J(c.userId===s.userId);let l=Js(this.serializer,c);return F1(e,s.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new Se(o),l=function(f){return[0,tn(f)]}(c);s.push(n.get(l).next(d=>d?x.resolve():(f=>n.put({targetId:0,path:tn(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>x.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:$3});let r=n.store("collectionParents"),i=new Wl,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:tn(c)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Se(o);return s(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,c],l)=>{let d=Tr(a);return s(d.popLast())}))}ri(e){let n=e.store("targets");return n.J((r,i)=>{let s=Al(i),o=P1(this.serializer,s);return n.put(o)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=n.store("remoteDocumentsV14"),c=function(f){return f.document?new H(Se.fromString(f.document.name).popFirst(5)):f.noDocument?H.fromSegments(f.noDocument.path):f.unknownDocument?H.fromSegments(f.unknownDocument.path):K()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>x.waitFor(i))}si(e,n){let r=n.store("mutations"),i=j1(this.serializer),s=new _g(wg.Hr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:he();Js(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),x.forEach(a,(c,l)=>{let d=new gt(l),f=hg.lt(this.serializer,d),g=s.getIndexManager(d),y=mg.lt(d,this.serializer,g,s.referenceDelegate);return new vg(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Fl(n,Dn.oe),c).next()})})}};function EP(t){t.createObjectStore("targetDocuments",{keyPath:U3}).createIndex("documentTargetsIndex",B3,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",j3,{unique:!0}),t.createObjectStore("targetGlobal")}var yE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",SI=class t{constructor(e,n,r,i,s,o,a,c,l,d,f=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=d,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=g=>Promise.resolve(),!t.D())throw new P(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gI(this,i),this.Ti=n+"main",this.serializer=new lg(c),this.Ei=new es(this.Ti,this.ui,new TI(this.serializer)),this.Qr=new dI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=j1(this.serializer),this.$r=new nI,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&ct("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,yE);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Dn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>N(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>N(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ls(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Tl(e).get("owner").next(n=>x.resolve(this.Si(n)))}bi(e){return Bp(e).delete(this.clientId)}Di(){return N(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Tt(n,"clientMetadata");return r.U().next(i=>{let s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return x.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?x.resolve(!0):Tl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,yE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bp(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&O("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return N(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Fl(e,Dn.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Bp(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return mg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lI(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){O("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===16?Z3:c===15?zP:c===14?GP:c===13?HP:c===12?Y3:c===11?qP:void K()}(this.ui),o;return this.Ei.runTransaction(e,i,s,a=>(o=new Fl(a,this.kr?this.kr.next():Dn.oe),n==="readwrite-primary"?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new P(R.FAILED_PRECONDITION,jP);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Tl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new P(R.FAILED_PRECONDITION,yE)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tl(e).put("owner",n)}static D(){return es.D()}yi(e){let n=Tl(e);return n.get("owner").next(r=>this.Si(r)?(O("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):x.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(ct(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;by()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ct("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ct("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Tl(t){return Tt(t,"owner")}function Bp(t){return Tt(t,"clientMetadata")}function A0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var AI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=he(),i=he();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var xI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Eg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return by()?8:UP(su())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new xI;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Ba()<=Rn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",$a(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),x.resolve()):(Ba()<=Rn.DEBUG&&O("QueryEngine","Query:",$a(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ba()<=Rn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",$a(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(n))):x.resolve())}ji(e,n){if(KN(n))return x.resolve(null);let r=nn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=og(n,null,"F"),r=nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=he(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,og(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return KN(n)||i.isEqual(te.min())?x.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?x.resolve(null):(Ba()<=Rn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$a(n)),this.es(e,o,n,VP(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ue(s1(e));return n.forEach((i,s)=>{sd(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Ba()<=Rn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",$a(n)),this.zi.getDocumentsMatchingQuery(e,n,Ln.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var MI=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new We(le),this.rs=new Pr(s=>oo(s),rd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function U1(t,e,n,r){return new MI(t,e,n,r)}function B1(t,e){return N(this,null,function*(){let n=G(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=he();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function M9(t,e){let n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),y=x.resolve();return g.forEach(E=>{y=y.next(()=>d.getEntry(c,E)).next(D=>{let S=l.docVersions.get(E);J(S!==null),D.version.compareTo(S)<0&&(f.applyToRemoteDocument(D,l),D.isValidDocument()&&(D.setReadTime(l.commitVersion),d.addEntry(D)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function $1(t){let e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function R9(t,e){let n=G(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,f)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(bt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(D,S,k){return D.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,y,d)&&a.push(n.Qr.updateTargetData(s,y))});let c=dn(),l=he();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(q1(s,o,e.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!r.isEqual(te.min())){let d=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=i,s))}function q1(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=dn();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function N9(t,e){let n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sc(t,e){let n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new rc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function oc(t,e,n){return N(this,null,function*(){let r=G(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ls(o))throw o;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Ig(t,e,n){let r=G(t),i=te.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=G(c),g=f.rs.get(d);return g!==void 0?x.resolve(f.ns.get(g)):f.Qr.getTargetData(l,d)}(r,o,nn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:he())).next(a=>(z1(r,i1(e),a),{documents:a,hs:s})))}function H1(t,e){let n=G(t),r=G(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function G1(t,e){let n=G(t),r=n.ss.get(e)||te.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,VP(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(z1(n,e,i),i))}function z1(t,e,n){let r=t.ss.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}function P9(t,e,n,r){return N(this,null,function*(){let i=G(t),s=he(),o=dn();for(let l of n){let d=e.Ps(l.metadata.name);l.document&&(s=s.add(d));let f=e.Is(l);f.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(d,f)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield sc(i,function(d){return nn(pc(Se.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>q1(l,a,o).next(d=>(a.apply(l),d)).next(d=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.cs,d.ls)).next(()=>d.cs)))})}function k9(r,i){return N(this,arguments,function*(t,e,n=he()){let s=yield sc(t,nn(T0(e.bundledQuery))),o=G(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=lt(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.$r.saveNamedQuery(a,e);let l=s.withResumeToken(bt.EMPTY_BYTE_STRING,c);return o.ns=o.ns.insert(l.targetId,l),o.Qr.updateTargetData(a,l).next(()=>o.Qr.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Qr.addMatchingKeys(a,n,s.targetId)).next(()=>o.$r.saveNamedQuery(a,e))})})}function IP(t,e){return`firestore_clients_${t}_${e}`}function CP(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function vE(t,e){return`firestore_targets_${t}_${e}`}var Cg=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new P(i.error.code,i.error.message))),o?new t(e,n,i.state,s):(ct("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Nl=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new P(r.error.code,r.error.message))),s?new t(e,r.state,i):(ct("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Dg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=D0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=BP(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(ct("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},RI=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(ct("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ql=class{constructor(){this.activeTargetIds=D0()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Pl=class{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new We(le),this.started=!1,this.ys=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=IP(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Ql),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(IP(this.persistenceKey,r));if(i){let s=Dg.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(vE(this.persistenceKey,e));if(r){let i=Nl.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(vE(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return O("SharedClientState","READ",e,n),n}setItem(e,n){O("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(O("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(s){let o=Dn.oe;if(s!=null)try{let a=JSON.parse(s);J(typeof a=="number"),o=a}catch(a){ct("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Dn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let i=new Cg(this.currentUser,e,n,r),s=CP(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){let n=CP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=vE(this.persistenceKey,e),s=new Nl(e,n,r);this.setItem(i,s.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return Dg.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Cg.Es(new gt(s),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return Nl.Es(i,n)}xs(e){return RI.Es(e)}Js(e){return JSON.parse(e)}zs(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=D0();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},bg=class{constructor(){this.no=new Ql,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Ql,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var NI=class{io(e){}shutdown(){}};var Tg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var $p=null;function _E(){return $p===null?$p=function(){return 268435456+Math.round(2147483648*Math.random())}():$p++,"0x"+$p.toString(16)}var O9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var PI=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Ht="WebChannelConnection",kI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let a=_E(),c=this.vo(n,r.toUriEncodedString());O("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,c,l,i).then(d=>(O("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Vn("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=O9[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=_E();return new Promise((o,a)=>{let c=new lE;c.setWithCredentials(!0),c.listenOnce(hE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Il.NO_ERROR:let d=c.getResponseJson();O(Ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Il.TIMEOUT:O(Ht,`RPC '${e}' ${s} timed out`),a(new P(R.DEADLINE_EXCEEDED,"Request time out"));break;case Il.HTTP_ERROR:let f=c.getStatus();if(O(Ht,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let E=function(S){let k=S.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(k)>=0?k:R.UNKNOWN}(y.status);a(new P(E,y.message))}else a(new P(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(R.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{O(Ht,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);O(Ht,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=_E(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gE(),a=pE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new dE({})),this.Fo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");O(Ht,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,y=!1,E=new PI({lo:S=>{y?O(Ht,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(O(Ht,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),O(Ht,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},ho:()=>f.close()}),D=(S,k,$)=>{S.listen(k,F=>{try{$(F)}catch(Y){setTimeout(()=>{throw Y},0)}})};return D(f,Fa.EventType.OPEN,()=>{y||(O(Ht,`RPC '${e}' stream ${i} transport opened.`),E.mo())}),D(f,Fa.EventType.CLOSE,()=>{y||(y=!0,O(Ht,`RPC '${e}' stream ${i} transport closed`),E.po())}),D(f,Fa.EventType.ERROR,S=>{y||(y=!0,Vn(Ht,`RPC '${e}' stream ${i} transport errored:`,S),E.po(new P(R.UNAVAILABLE,"The operation could not be completed")))}),D(f,Fa.EventType.MESSAGE,S=>{var k;if(!y){let $=S.data[0];J(!!$);let F=$,Y=F.error||((k=F[0])===null||k===void 0?void 0:k.error);if(Y){O(Ht,`RPC '${e}' stream ${i} received error:`,Y);let ie=Y.status,ne=function(w){let C=ft[w];if(C!==void 0)return _1(C)}(ie),I=Y.message;ne===void 0&&(ne=R.INTERNAL,I="Unknown error status: "+ie+" with message "+Y.message),y=!0,E.po(new P(ne,I)),f.close()}else O(Ht,`RPC '${e}' stream ${i} received:`,$),E.yo($)}}),D(a,fE.STAT_EVENT,S=>{S.stat===Lp.PROXY?O(Ht,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Lp.NOPROXY&&O(Ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}};function W1(){return typeof window<"u"?window:null}function Wp(){return typeof document<"u"?document:null}function od(t){return new ZE(t,!0)}var Yl=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Sg=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Yl(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return N(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return N(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return N(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(ct(n.toString()),ct("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new P(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>N(this,null,function*(){this.state=0,this.start()}))}c_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},OI=class extends Sg{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=_9(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?lt(o.readTime):te.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=eI(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=ig(c)?{documents:S1(s,c)}:{query:A1(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=E1(s,o.resumeToken);let l=JE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=nc(s,o.snapshotVersion.toTimestamp());let l=JE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=E9(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=eI(this.serializer),n.removeTarget=e,this.i_(n)}},FI=class extends Sg{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(J(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=w9(e.writeResults,e.commitTime),r=lt(e.commitTime);return this.listener.A_(r,n)}return J(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=eI(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>zl(this.serializer,r))};this.i_(n)}};var VI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,XE(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(R.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,XE(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(R.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},LI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(ct(n),this.y_=!1):O("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var jI=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>N(this,null,function*(){ds(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(c){return N(this,null,function*(){let l=G(c);l.M_.add(4),yield gc(l),l.N_.set("Unknown"),l.M_.delete(4),yield ad(l)})}(this))}))}),this.N_=new LI(r,i)}};function ad(t){return N(this,null,function*(){if(ds(t))for(let e of t.x_)yield e(!0)})}function gc(t){return N(this,null,function*(){for(let e of t.x_)yield e(!1)})}function zg(t,e){let n=G(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),R0(n)?M0(n):yc(n).Xo()&&x0(n,e))}function ac(t,e){let n=G(t),r=yc(n);n.F_.delete(e),r.Xo()&&K1(n,e),n.F_.size===0&&(r.Xo()?r.n_():ds(n)&&n.N_.set("Unknown"))}function x0(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yc(t).P_(e)}function K1(t,e){t.L_.xe(e),yc(t).I_(e)}function M0(t){t.L_=new YE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),yc(t).start(),t.N_.w_()}function R0(t){return ds(t)&&!yc(t).Zo()&&t.F_.size>0}function ds(t){return G(t).M_.size===0}function Q1(t){t.L_=void 0}function F9(t){return N(this,null,function*(){t.N_.set("Online")})}function V9(t){return N(this,null,function*(){t.F_.forEach((e,n)=>{x0(t,e)})})}function L9(t,e){return N(this,null,function*(){Q1(t),R0(t)?(t.N_.D_(e),M0(t)):t.N_.set("Unknown")})}function j9(t,e,n){return N(this,null,function*(){if(t.N_.set("Online"),e instanceof cg&&e.state===2&&e.cause)try{yield function(i,s){return N(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ag(t,r)}else if(e instanceof Qa?t.L_.Ke(e):e instanceof ag?t.L_.He(e):t.L_.We(e),!n.isEqual(te.min()))try{let r=yield $1(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.F_.get(l);d&&s.F_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.F_.get(c);if(!d)return;s.F_.set(c,d.withResumeToken(bt.EMPTY_BYTE_STRING,d.snapshotVersion)),K1(s,c);let f=new rc(d.target,c,l,d.sequenceNumber);x0(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Ag(t,r)}})}function Ag(t,e,n){return N(this,null,function*(){if(!ls(e))throw e;t.M_.add(1),yield gc(t),t.N_.set("Offline"),n||(n=()=>$1(t.localStore)),t.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield ad(t)}))})}function Y1(t,e){return e().catch(n=>Ag(t,n,e))}function mc(t){return N(this,null,function*(){let e=G(t),n=cs(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;U9(e);)try{let i=yield N9(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,B9(e,i)}catch(i){yield Ag(e,i)}Z1(e)&&J1(e)})}function U9(t){return ds(t)&&t.v_.length<10}function B9(t,e){t.v_.push(e);let n=cs(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function Z1(t){return ds(t)&&!cs(t).Zo()&&t.v_.length>0}function J1(t){cs(t).start()}function $9(t){return N(this,null,function*(){cs(t).V_()})}function q9(t){return N(this,null,function*(){let e=cs(t);for(let n of t.v_)e.d_(n.mutations)})}function H9(t,e,n){return N(this,null,function*(){let r=t.v_.shift(),i=WE.from(r,e,n);yield Y1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield mc(t)})}function G9(t,e){return N(this,null,function*(){e&&cs(t).E_&&(yield function(r,i){return N(this,null,function*(){if(function(o){return v1(o)&&o!==R.ABORTED}(i.code)){let s=r.v_.shift();cs(r).t_(),yield Y1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield mc(r)}})}(t,e)),Z1(t)&&J1(t)})}function DP(t,e){return N(this,null,function*(){let n=G(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=ds(n);n.M_.add(3),yield gc(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield ad(n)})}function UI(t,e){return N(this,null,function*(){let n=G(t);e?(n.M_.delete(2),yield ad(n)):e||(n.M_.add(2),yield gc(n),n.N_.set("Unknown"))})}function yc(t){return t.B_||(t.B_=function(n,r,i){let s=G(n);return s.f_(),new OI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:F9.bind(null,t),To:V9.bind(null,t),Ao:L9.bind(null,t),h_:j9.bind(null,t)}),t.x_.push(e=>N(this,null,function*(){e?(t.B_.t_(),R0(t)?M0(t):t.N_.set("Unknown")):(yield t.B_.stop(),Q1(t))}))),t.B_}function cs(t){return t.k_||(t.k_=function(n,r,i){let s=G(n);return s.f_(),new FI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:$9.bind(null,t),Ao:G9.bind(null,t),R_:q9.bind(null,t),A_:H9.bind(null,t)}),t.x_.push(e=>N(this,null,function*(){e?(t.k_.t_(),yield mc(t)):(yield t.k_.stop(),t.v_.length>0&&(O("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var BI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function vc(t,e){if(ct("AsyncQueue",`${e}: ${t}`),ls(t))return new P(R.UNAVAILABLE,`${e}: ${t}`);throw t}var xg=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Sl(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Mg=class{constructor(){this.q_=new We(H.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):K():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},cc=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,xg.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var $I=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},qI=class{constructor(){this.queries=new Pr(e=>r1(e),id),this.onlineState="Unknown",this.z_=new Set}};function N0(t,e){return N(this,null,function*(){let n=G(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new $I,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=vc(o,`Initialization of query '${$a(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&k0(n)})}function P0(t,e){return N(this,null,function*(){let n=G(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function z9(t,e){let n=G(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&k0(n)}function W9(t,e,n){let r=G(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function k0(t){t.z_.forEach(e=>{e.next()})}var HI,bP;(bP=HI||(HI={})).J_="default",bP.Cache="cache";var Zl=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new cc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=cc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==HI.Cache}};var GI=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var Rg=class{constructor(e){this.serializer=e}Ps(e){return xr(this.serializer,e)}Is(e){return e.metadata.exists?T1(this.serializer,e.document,!1):yt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return lt(e)}},zI=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=X1(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=Se.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new Rg(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Ps(i.metadata.name);for(let o of i.metadata.queries){let a=(n.get(o)||he()).add(s);n.set(o,a)}}return n}complete(){return N(this,null,function*(){let e=yield P9(this.localStore,new Rg(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield k9(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function X1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Ng=class{constructor(e){this.key=e}},Pg=class{constructor(e){this.key=e}},kg=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=he(),this.mutatedKeys=he(),this.Ia=s1(e),this.Ta=new xg(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Mg,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=sd(this.query,f)?f:null,E=!!g&&this.mutatedKeys.has(g.key),D=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),S=!1;g&&y?g.data.isEqual(y.data)?E!==D&&(r.track({type:3,doc:y}),S=!0):this.Ra(g,y)||(r.track({type:2,doc:y}),S=!0,(c&&this.Ia(y,c)>0||l&&this.Ia(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),S=!0):g&&!y&&(r.track({type:1,doc:g}),S=!0,(c||l)&&(a=!0)),S&&(y?(o=o.add(y),s=D?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((d,f)=>function(y,E){let D=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return D(y)-D(E)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,o.length!==0||l?{snapshot:new cc(this.query,e.Ta,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Mg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=he(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Pg(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Ng(r))}),n}pa(e){this.la=e.hs,this.Pa=he();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return cc.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},WI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},KI=class{constructor(e){this.key=e,this.wa=!1}},QI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Pr(a=>r1(a),id),this.Da=new Map,this.Ca=new Set,this.va=new We(H.comparator),this.Fa=new Map,this.Ma=new Kl,this.xa={},this.Oa=new Map,this.Na=ic.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function K9(t,e,n=!0){return N(this,null,function*(){let r=Wg(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield ek(r,e,n,!0),i})}function Q9(t,e){return N(this,null,function*(){let n=Wg(t);yield ek(n,e,!0,!1)})}function ek(t,e,n,r){return N(this,null,function*(){let i=yield sc(t.localStore,nn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield O0(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&zg(t.remoteStore,i),a})}function O0(t,e,n,r,i){return N(this,null,function*(){t.Ba=(f,g,y)=>function(D,S,k,$){return N(this,null,function*(){let F=S.view.da(k);F.Xi&&(F=yield Ig(D.localStore,S.query,!1).then(({documents:I})=>S.view.da(I,F)));let Y=$&&$.targetChanges.get(S.targetId),ie=$&&$.targetMismatches.get(S.targetId)!=null,ne=S.view.applyChanges(F,D.isPrimaryClient,Y,ie);return YI(D,S.targetId,ne.fa),ne.snapshot})}(t,f,g,y);let s=yield Ig(t.localStore,e,!0),o=new kg(e,s.hs),a=o.da(s.documents),c=Hl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);YI(t,n,l.fa);let d=new WI(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function Y9(t,e,n){return N(this,null,function*(){let r=G(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!id(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield oc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ac(r.remoteStore,i.targetId),uc(r,i.targetId)}).catch(us))):(uc(r,i.targetId),yield oc(r.localStore,i.targetId,!0))})}function Z9(t,e){return N(this,null,function*(){let n=G(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ac(n.remoteStore,r.targetId))})}function J9(t,e,n){return N(this,null,function*(){let r=j0(t);try{let i=yield function(o,a){let c=G(o),l=Je.now(),d=a.reduce((y,E)=>y.add(E.key),he()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=dn(),D=he();return c.os.getEntries(y,d).next(S=>{E=S,E.forEach((k,$)=>{$.isValidDocument()||(D=D.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,E)).next(S=>{f=S;let k=[];for(let $ of a){let F=h9($,f.get($.key).overlayedDocument);F!=null&&k.push(new rr($.key,F,YP(F.value.mapValue),rt.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,k,a)}).next(S=>{g=S;let k=S.applyToLocalDocumentSet(f,D);return c.documentOverlayCache.saveOverlays(y,S.batchId,k)})}).then(()=>({batchId:g.batchId,changes:a1(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.xa[o.currentUser.toKey()];l||(l=new We(le)),l=l.insert(a,c),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield hi(r,i.changes),yield mc(r.remoteStore)}catch(i){let s=vc(i,"Failed to persist write");n.reject(s)}})}function tk(t,e){return N(this,null,function*(){let n=G(t);try{let r=yield R9(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?J(o.wa):i.removedDocuments.size>0&&(J(o.wa),o.wa=!1))}),yield hi(n,r,e)}catch(r){yield us(r)}})}function TP(t,e,n){let r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=G(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.U_)g.j_(a)&&(l=!0)}),l&&k0(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function X9(t,e,n){return N(this,null,function*(){let r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new We(H.comparator);o=o.insert(s,yt.newNoDocument(s,te.min()));let a=he().add(s),c=new ql(te.min(),new Map,new We(le),o,a);yield tk(r,c),r.va=r.va.remove(s),r.Fa.delete(e),L0(r)}else yield oc(r.localStore,e,!1).then(()=>uc(r,e,n)).catch(us)})}function ez(t,e){return N(this,null,function*(){let n=G(t),r=e.batch.batchId;try{let i=yield M9(n.localStore,e);V0(n,r,null),F0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield hi(n,i)}catch(i){yield us(i)}})}function tz(t,e,n){return N(this,null,function*(){let r=G(t);try{let i=yield function(o,a){let c=G(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(J(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);V0(r,e,n),F0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield hi(r,i)}catch(i){yield us(i)}})}function nz(t,e){return N(this,null,function*(){let n=G(t);ds(n.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=G(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){let i=vc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function F0(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function V0(t,e,n){let r=G(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function uc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||nk(t,r)})}function nk(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(ac(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),L0(t))}function YI(t,e,n){for(let r of n)r instanceof Ng?(t.Ma.addReference(r.key,e),rz(t,r)):r instanceof Pg?(O("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||nk(t,r.key)):K()}function rz(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(O("SyncEngine","New document in limbo: "+n),t.Ca.add(r),L0(t))}function L0(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new H(Se.fromString(e)),r=t.Na.next();t.Fa.set(r,new KI(n)),t.va=t.va.insert(n,r),zg(t.remoteStore,new rc(nn(pc(n.path)),r,"TargetPurposeLimboResolution",Dn.oe))}}function hi(t,e,n){return N(this,null,function*(){let r=G(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let d=l&&!l.fromCache;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);let d=AI.Ki(c.targetId,l);s.push(d)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(c,l){return N(this,null,function*(){let d=G(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>x.forEach(l,g=>x.forEach(g.qi,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>x.forEach(g.Qi,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!ls(f))throw f;O("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.ns.get(g),E=y.snapshotVersion,D=y.withLastLimboFreeSnapshotVersion(E);d.ns=d.ns.insert(g,D)}}})}(r.localStore,s))})}function iz(t,e){return N(this,null,function*(){let n=G(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield B1(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new P(R.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hi(n,r.us)}})}function sz(t,e){let n=G(t),r=n.Fa.get(e);if(r&&r.wa)return he().add(r.key);{let i=he(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function oz(t,e){return N(this,null,function*(){let n=G(t),r=yield Ig(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&YI(n,e.targetId,i.fa),i})}function az(t,e){return N(this,null,function*(){let n=G(t);return G1(n.localStore,e).then(r=>hi(n,r))})}function cz(t,e,n,r){return N(this,null,function*(){let i=G(t),s=yield function(a,c){let l=G(a),d=G(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.vn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):x.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?yield mc(i.remoteStore):n==="acknowledged"||n==="rejected"?(V0(i,e,r||null),F0(i,e),function(a,c){G(G(a).mutationQueue).Mn(c)}(i.localStore,e)):K(),yield hi(i,s)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function uz(t,e){return N(this,null,function*(){let n=G(t);if(Wg(n),j0(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield SP(n,r.toArray());n.La=!0,yield UI(n.remoteStore,!0);for(let s of i)zg(n.remoteStore,s)}else if(e===!1&&n.La!==!1){let r=[],i=Promise.resolve();n.Da.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(uc(n,o),oc(n.localStore,o,!0))),ac(n.remoteStore,o)}),yield i,yield SP(n,r),function(o){let a=G(o);a.Fa.forEach((c,l)=>{ac(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new We(H.comparator)}(n),n.La=!1,yield UI(n.remoteStore,!1)}})}function SP(t,e,n){return N(this,null,function*(){let r=G(t),i=[],s=[];for(let o of e){let a,c=r.Da.get(o);if(c&&c.length!==0){a=yield sc(r.localStore,nn(c[0]));for(let l of c){let d=r.ba.get(l),f=yield oz(r,d);f.snapshot&&s.push(f.snapshot)}}else{let l=yield H1(r.localStore,o);a=yield sc(r.localStore,l),yield O0(r,rk(l),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})}function rk(t){return n1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function lz(t){return function(n){return G(G(n).persistence).Bi()}(G(t).localStore)}function dz(t,e,n,r){return N(this,null,function*(){let i=G(t);if(i.La)return void O("SyncEngine","Ignoring unexpected query state notification.");let s=i.Da.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield G1(i.localStore,i1(s[0])),a=ql.createSynthesizedRemoteEventForCurrentChange(e,n==="current",bt.EMPTY_BYTE_STRING);yield hi(i,o,a);break}case"rejected":yield oc(i.localStore,e,!0),uc(i,e,r);break;default:K()}})}function hz(t,e,n){return N(this,null,function*(){let r=Wg(t);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let s=yield H1(r.localStore,i),o=yield sc(r.localStore,s);yield O0(r,rk(s),o.targetId,!1,o.resumeToken),zg(r.remoteStore,o)}for(let i of n)r.Da.has(i)&&(yield oc(r.localStore,i,!1).then(()=>{ac(r.remoteStore,i),uc(r,i)}).catch(us))}})}function Wg(t){let e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=X9.bind(null,e),e.Sa.h_=z9.bind(null,e.eventManager),e.Sa.ka=W9.bind(null,e.eventManager),e}function j0(t){let e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ez.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tz.bind(null,e),e}function fz(t,e,n){let r=G(t);(function(s,o,a){return N(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(y,E){let D=G(y),S=lt(E.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",k=>D.$r.getBundleMetadata(k,E.id)).then(k=>!!k&&k.createTime.compareTo(S)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(X1(c));let l=new zI(c,s.localStore,o.serializer),d=yield o.qa();for(;d;){let g=yield l._a(d);g&&a._updateProgress(g),d=yield o.qa()}let f=yield l.complete();return yield hi(s,f.ca,void 0),yield function(y,E){let D=G(y);return D.persistence.runTransaction("Save bundle","readwrite",S=>D.$r.saveBundleMetadata(S,E))}(s.localStore,c),a._completeWith(f.progress),Promise.resolve(f.ua)}catch(c){return Vn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Jl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=od(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return U1(this.persistence,new Eg,e.initialUser,this.serializer)}createPersistence(e){return new _g(wg.Hr,this.serializer)}createSharedClientState(e){return new bg}terminate(){return N(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Og=class t extends Jl{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Cy(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield j0(this.Qa.syncEngine),yield mc(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return U1(this.persistence,new Eg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new fI(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new RE(n,this.persistence);return new ME(e.asyncQueue,r)}createPersistence(e){let n=A0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new SI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,W1(),Wp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new bg}},ZI=class t extends Og{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Cy(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof Pl&&(this.sharedClientState.syncEngine={Zs:cz.bind(null,n),Xs:dz.bind(null,n),eo:hz.bind(null,n),Bi:lz.bind(null,n),Ys:az.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>N(this,null,function*(){yield uz(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=W1();if(!Pl.D(n))throw new P(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=A0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pl(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Xl=class{initialize(e,n){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>TP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iz.bind(null,this.syncEngine),yield UI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new qI}()}createDatastore(e){let n=od(e.databaseInfo.databaseId),r=function(s){return new kI(s)}(e.databaseInfo);return function(s,o,a,c){return new VI(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new jI(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>TP(this.syncEngine,n,0),function(){return Tg.D()?new Tg:new NI}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,d){let f=new QI(i,s,o,a,c,l);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return N(this,null,function*(){var e;yield function(r){return N(this,null,function*(){let i=G(r);O("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield gc(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function AP(t,e=10240){let n=0;return{read(){return N(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var lc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):ct("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var JI=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new mt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}qa(){return N(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return N(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let i=yield this.Ha(r);return new GI(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return N(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return N(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var XI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,s){return N(this,null,function*(){let o=G(i),a={documents:s.map(f=>Gl(o.serializer,f))},c=yield o.xo("BatchGetDocuments",o.serializer.databaseId,Se.emptyPath(),a,s.length),l=new Map;c.forEach(f=>{let g=v9(o.serializer,f);l.set(g.key.toString(),g)});let d=[];return s.forEach(f=>{let g=l.get(f.toString());J(!!g),d.push(g)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new as(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=H.fromPath(r);this.mutations.push(new Ul(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let s=G(r),o={writes:i.map(a=>zl(s.serializer,a))};yield s.Co("Commit",s.serializer.databaseId,Se.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw K();n=te.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new P(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(te.min())?rt.exists(!1):rt.updateTime(n):rt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(te.min()))throw new P(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rt.updateTime(n)}return rt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var e0=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new Yl(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>N(this,null,function*(){let e=new XI(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!nd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!v1(n)}return!1}};var t0=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=Yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>N(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=vc(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Kp(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield B1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function n0(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield U0(t);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>DP(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>DP(e.remoteStore,i)),t._onlineComponents=e})}function ik(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function U0(t){return N(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kp(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!ik(n))throw n;Vn("Error using user provided cache. Falling back to memory cache: "+n),yield Kp(t,new Jl)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Kp(t,new Jl);return t._offlineComponents})}function Kg(t){return N(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield n0(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield n0(t,new Xl))),t._onlineComponents})}function sk(t){return U0(t).then(e=>e.persistence)}function B0(t){return U0(t).then(e=>e.localStore)}function ok(t){return Kg(t).then(e=>e.remoteStore)}function $0(t){return Kg(t).then(e=>e.syncEngine)}function pz(t){return Kg(t).then(e=>e.datastore)}function dc(t){return N(this,null,function*(){let e=yield Kg(t),n=e.eventManager;return n.onListen=K9.bind(null,e.syncEngine),n.onUnlisten=Y9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Q9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Z9.bind(null,e.syncEngine),n})}function gz(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield sk(t),n=yield ok(t);return e.setNetworkEnabled(!0),function(i){let s=G(i);return s.M_.delete(0),ad(s)}(n)}))}function mz(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield sk(t),n=yield ok(t);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let s=G(i);s.M_.add(0),yield gc(s),s.N_.set("Offline")})}(n)}))}function yz(t,e){let n=new mt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s,o){return N(this,null,function*(){try{let a=yield function(l,d){let f=G(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new P(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=vc(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield B0(t),e,n)})),n.promise}function ak(t,e,n={}){let r=new mt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,c,l){let d=new lc({next:g=>{o.enqueueAndForget(()=>P0(s,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new P(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new P(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Zl(pc(a.path),d,{includeMetadataChanges:!0,ra:!0});return N0(s,f)}(yield dc(t),t.asyncQueue,e,n,r)})),r.promise}function vz(t,e){let n=new mt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s,o){return N(this,null,function*(){try{let a=yield Ig(i,s,!0),c=new kg(s,a.hs),l=c.da(a.documents),d=c.applyChanges(l,!1);o.resolve(d.snapshot)}catch(a){let c=vc(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield B0(t),e,n)})),n.promise}function ck(t,e,n={}){let r=new mt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,c,l){let d=new lc({next:g=>{o.enqueueAndForget(()=>P0(s,f)),g.fromCache&&c.source==="server"?l.reject(new P(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Zl(a,d,{includeMetadataChanges:!0,ra:!0});return N0(s,f)}(yield dc(t),t.asyncQueue,e,n,r)})),r.promise}function _z(t,e){let n=new lc(e);return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s){G(i).z_.add(s),s.next()}(yield dc(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s){G(i).z_.delete(s)}(yield dc(t),n)}))}}function wz(t,e,n,r){let i=function(o,a){let c;return c=typeof o=="string"?w1().encode(o):o,function(d,f){return new JI(d,f)}(function(d,f){if(d instanceof Uint8Array)return AP(d,f);if(d instanceof ArrayBuffer)return AP(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,od(e));t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){fz(yield $0(t),i,r)}))}function Ez(t,e){return t.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let s=G(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield B0(t),e)}))}function uk(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var xP=new Map;function q0(t,e,n){if(!n)throw new P(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function H0(t,e,n,r){if(e===!0&&r===!0)throw new P(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function MP(t){if(!H.isDocumentKey(t))throw new P(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function RP(t){if(H.isDocumentKey(t))throw new P(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function Ae(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new P(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Qg(t);throw new P(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function lk(t,e){if(e<=0)throw new P(R.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Fg=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wE;switch(r.type){case"firstParty":return new DE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=xP.get(n);r&&(O("ComponentProvider","Removing Datastore"),xP.delete(n),r.terminate())}(this),Promise.resolve()}};function dk(t,e,n,r={}){var i;let s=(t=Ae(t,lo))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Vn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=gt.MOCK_USER;else{a=uh(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new gt(l)}t._authCredentials=new EE(new Qp(a,c))}}var Ft=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},qe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Mr=class t extends Ft{constructor(e,n,r){super(e,n,pc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function G0(t,e,...n){if(t=Ee(t),q0("collection","path",e),t instanceof lo){let r=Se.fromString(e,...n);return RP(r),new Mr(t,null,r)}{if(!(t instanceof qe||t instanceof Mr))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return RP(r),new Mr(t.firestore,null,r)}}function hk(t,e){if(t=Ae(t,lo),q0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ft(t,null,function(r){return new nr(Se.emptyPath(),r)}(e))}function cd(t,e,...n){if(t=Ee(t),arguments.length===1&&(e=Yp.newId()),q0("doc","path",e),t instanceof lo){let r=Se.fromString(e,...n);return MP(r),new qe(t,null,new H(r))}{if(!(t instanceof qe||t instanceof Mr))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return MP(r),new qe(t.firestore,t instanceof Mr?t.converter:null,new H(r))}}function z0(t,e){return t=Ee(t),e=Ee(e),(t instanceof qe||t instanceof Mr)&&(e instanceof qe||e instanceof Mr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function W0(t,e){return t=Ee(t),e=Ee(e),t instanceof Ft&&e instanceof Ft&&t.firestore===e.firestore&&id(t._query,e._query)&&t.converter===e.converter}var r0=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Yl(this,"async_queue_retry"),this.hu=()=>{let n=Wp();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Wp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Wp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new mt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return N(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ls(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ct("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=BI.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&K()}verifyOperationInProgress(){}du(){return N(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function i0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var s0=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new mt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var fk=-1,Ye=class extends lo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new r0}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||pk(this),this._firestoreClient.terminate()}};function wt(t){return t._firestoreClient||pk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function pk(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new NE(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,uk(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new t0(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function gk(t,e){Dk(t=Ae(t,Ye));let n=wt(t);if(n._uninitializedComponentsProvider)throw new P(R.FAILED_PRECONDITION,"SDK cache is already specified.");Vn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Xl;return yk(n,i,new Og(i,r.cacheSizeBytes,e?.forceOwnership))}function mk(t){Dk(t=Ae(t,Ye));let e=wt(t);if(e._uninitializedComponentsProvider)throw new P(R.FAILED_PRECONDITION,"SDK cache is already specified.");Vn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Xl;return yk(e,r,new ZI(r,n.cacheSizeBytes))}function yk(t,e,n){let r=new mt;return t.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield Kp(t,n),yield n0(t,e),r.resolve()}catch(i){let s=i;if(!ik(s))throw s;Vn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function vk(t){if(t._initialized&&!t._terminated)throw new P(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new mt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!es.D())return Promise.resolve();let i=r+"main";yield es.delete(i)})}(A0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function _k(t){return function(n){let r=new mt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return nz(yield $0(n),r)})),r.promise}(wt(t=Ae(t,Ye)))}function wk(t){return gz(wt(t=Ae(t,Ye)))}function Ek(t){return mz(wt(t=Ae(t,Ye)))}function Ik(t,e){let n=wt(t=Ae(t,Ye)),r=new s0;return wz(n,t._databaseId,e,r),r}function Ck(t,e){return Ez(wt(t=Ae(t,Ye)),e).then(n=>n?new Ft(t,null,n.query):null)}function Dk(t){if(t._initialized||t._terminated)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var kr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(bt.fromBase64String(e))}catch(n){throw new P(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ir=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new P(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var li=class{constructor(e){this._methodName=e}};var ho=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new P(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new P(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}};var Iz=/^__.*__$/,o0=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new os(e,this.data,n,this.fieldTransforms)}},Vg=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function bk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var Lg=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return jg(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(bk(this.fu)&&Iz.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},a0=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||od(e)}Fu(e,n,r,i=!1){return new Lg({fu:e,methodName:n,vu:r,path:ut.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function mo(t){let e=t._freezeSettings(),n=od(t._databaseId);return new a0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Yg(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Y0("Data must be an object, but it was:",o,r);let a=Ak(r,o),c,l;if(s.merge)c=new bn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=h0(e,f,n);if(!o.contains(g))throw new P(R.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Mk(d,g)||d.push(g)}c=new bn(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new o0(new Gt(a),c,l)}var ed=class t extends li{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Tk(t,e,n){return new Lg({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var c0=class t extends li{_toFieldTransform(e){return new ao(e.path,new is)}isEqual(e){return e instanceof t}},u0=class t extends li{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=Tk(this,e,!0),r=this.Mu.map(s=>yo(s,n)),i=new ci(r);return new ao(e.path,i)}isEqual(e){return e instanceof t&&Ty(this.Mu,e.Mu)}},l0=class t extends li{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=Tk(this,e,!0),r=this.Mu.map(s=>yo(s,n)),i=new ui(r);return new ao(e.path,i)}isEqual(e){return e instanceof t&&Ty(this.Mu,e.Mu)}},d0=class t extends li{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new ss(e.serializer,d1(e.serializer,this.xu));return new ao(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function K0(t,e,n,r){let i=t.Fu(1,e,n);Y0("Data must be an object, but it was:",i,r);let s=[],o=Gt.empty();go(r,(c,l)=>{let d=Z0(e,c,n);l=Ee(l);let f=i.Su(d);if(l instanceof ed)s.push(d);else{let g=yo(l,f);g!=null&&(s.push(d),o.set(d,g))}});let a=new bn(s);return new Vg(o,a,i.fieldTransforms)}function Q0(t,e,n,r,i,s){let o=t.Fu(1,e,n),a=[h0(e,r,n)],c=[i];if(s.length%2!=0)throw new P(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(h0(e,s[g])),c.push(s[g+1]);let l=[],d=Gt.empty();for(let g=a.length-1;g>=0;--g)if(!Mk(l,a[g])){let y=a[g],E=c[g];E=Ee(E);let D=o.Su(y);if(E instanceof ed)l.push(y);else{let S=yo(E,D);S!=null&&(l.push(y),d.set(y,S))}}let f=new bn(l);return new Vg(d,f,o.fieldTransforms)}function Sk(t,e,n,r=!1){return yo(n,t.Fu(r?4:3,e))}function yo(t,e){if(xk(t=Ee(t)))return Y0("Unsupported field value:",e,t),Ak(t,e);if(t instanceof li)return function(r,i){if(!bk(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=yo(a,i.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ee(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return d1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Je.fromDate(r);return{timestampValue:nc(i.serializer,s)}}if(r instanceof Je){let s=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nc(i.serializer,s)}}if(r instanceof ho)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kr)return{bytesValue:E1(i.serializer,r._byteString)};if(r instanceof qe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:b0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Qg(r)}`)}(t,e)}function Ak(t,e){let n={};return WP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,(r,i)=>{let s=yo(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function xk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof ho||t instanceof kr||t instanceof qe||t instanceof li)}function Y0(t,e,n){if(!xk(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Qg(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function h0(t,e,n){if((e=Ee(e))instanceof ir)return e._internalPath;if(typeof e=="string")return Z0(t,e);throw jg("Field path arguments must be of type string or ",t,!1,void 0,n)}var Cz=new RegExp("[~\\*/\\[\\]]");function Z0(t,e,n){if(e.search(Cz)>=0)throw jg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ir(...e.split("."))._internalPath}catch{throw jg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jg(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new P(R.INVALID_ARGUMENT,a+t+c)}function Mk(t,e){return t.some(n=>n.isEqual(e))}var fo=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new f0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Zg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},f0=class extends fo{data(){return super.data()}};function Zg(t,e){return typeof e=="string"?Z0(t,e):e instanceof ir?e._internalPath:e._delegate._internalPath}function Rk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new P(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var td=class{},po=class extends td{};function fi(t,e,...n){let r=[];e instanceof td&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof p0).length,a=s.filter(c=>c instanceof Ug).length;if(o>1||o>0&&a>0)throw new P(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Ug=class t extends po{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return Bk(e._query,n),new Ft(e.firestore,e.converter,GE(e._query,n))}_parse(e){let n=mo(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new P(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){PP(f,d);let y=[];for(let E of f)y.push(NP(c,s,E));g={arrayValue:{values:y}}}else g=NP(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||PP(f,d),g=Sk(a,o,f,d==="in"||d==="not-in");return Ce.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Nk(t,e,n){let r=e,i=Zg("where",t);return Ug._create(i,r,n)}var p0=class t extends td{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fe.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)Bk(o,c),o=GE(o,c)}(e._query,n),new Ft(e.firestore,e.converter,GE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var g0=class t extends po{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new so(s,o)}(e._query,this._field,this._direction);return new Ft(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new nr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function Pk(t,e="asc"){let n=e,r=Zg("orderBy",t);return g0._create(r,n)}var Bg=class t extends po{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Ft(e.firestore,e.converter,og(e._query,this._limit,this._limitType))}};function kk(t){return lk("limit",t),Bg._create("limit",t,"F")}function Ok(t){return lk("limitToLast",t),Bg._create("limitToLast",t,"L")}var $g=class t extends po{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=Uk(e,this.type,this._docOrFields,this._inclusive);return new Ft(e.firestore,e.converter,function(i,s){return new nr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}};function Fk(...t){return $g._create("startAt",t,!0)}function Vk(...t){return $g._create("startAfter",t,!1)}var qg=class t extends po{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=Uk(e,this.type,this._docOrFields,this._inclusive);return new Ft(e.firestore,e.converter,function(i,s){return new nr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}};function Lk(...t){return qg._create("endBefore",t,!1)}function jk(...t){return qg._create("endAt",t,!0)}function Uk(t,e,n,r){if(n[0]=Ee(n[0]),n[0]instanceof fo)return function(s,o,a,c,l){if(!c)throw new P(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Ka(s))if(f.field.isKeyField())d.push(io(o,c.key));else{let g=c.data.field(f.field);if(Gg(g))throw new P(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new P(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new Nr(d,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=mo(t.firestore);return function(o,a,c,l,d,f){let g=o.explicitOrderBy;if(d.length>g.length)throw new P(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let E=0;E<d.length;E++){let D=d[E];if(g[E].field.isKeyField()){if(typeof D!="string")throw new P(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof D}`);if(!C0(o)&&D.indexOf("/")!==-1)throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${D}' contains a slash.`);let S=o.path.child(Se.fromString(D));if(!H.isDocumentKey(S))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);let k=new H(S);y.push(io(a,k))}else{let S=Sk(c,l,D);y.push(S)}}return new Nr(y,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function NP(t,e,n){if(typeof(n=Ee(n))=="string"){if(n==="")throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C0(e)&&n.indexOf("/")!==-1)throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Se.fromString(n));if(!H.isDocumentKey(r))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return io(t,new H(r))}if(n instanceof qe)return io(t,n._key);throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qg(n)}.`)}function PP(t,e){if(!Array.isArray(t)||t.length===0)throw new P(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bk(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var hc=class{convertValue(e,n="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return go(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new ho(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=E0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vl(e));default:return null}}convertTimestamp(e){let n=ai(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Se.fromString(e);J(N1(r));let i=new ns(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||ct(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Jg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var m0=class extends hc{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}};var oi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},jn=class extends fo{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ji(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Zg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ji=class extends jn{data(e={}){return super.data(e)}},sr=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new oi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ji(this._firestore,this._userDataWriter,r.key,r,new oi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new P(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ji(i._firestore,i._userDataWriter,a.doc.key,a.doc,new oi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ji(i._firestore,i._userDataWriter,a.doc.key,a.doc,new oi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:Dz(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Dz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function J0(t,e){return t instanceof jn&&e instanceof jn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof sr&&e instanceof sr&&t._firestore===e._firestore&&W0(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function $k(t){t=Ae(t,qe);let e=Ae(t.firestore,Ye);return ak(wt(e),t._key).then(n=>nC(e,t,n))}var di=class extends hc{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}};function qk(t){t=Ae(t,qe);let e=Ae(t.firestore,Ye),n=wt(e),r=new di(e);return yz(n,t._key).then(i=>new jn(e,r,t._key,i,new oi(i!==null&&i.hasLocalMutations,!0),t.converter))}function Hk(t){t=Ae(t,qe);let e=Ae(t.firestore,Ye);return ak(wt(e),t._key,{source:"server"}).then(n=>nC(e,t,n))}function Gk(t){t=Ae(t,Ft);let e=Ae(t.firestore,Ye),n=wt(e),r=new di(e);return Rk(t._query),ck(n,t._query).then(i=>new sr(e,r,t,i))}function zk(t){t=Ae(t,Ft);let e=Ae(t.firestore,Ye),n=wt(e),r=new di(e);return vz(n,t._query).then(i=>new sr(e,r,t,i))}function Wk(t){t=Ae(t,Ft);let e=Ae(t.firestore,Ye),n=wt(e),r=new di(e);return ck(n,t._query,{source:"server"}).then(i=>new sr(e,r,t,i))}function X0(t,e,n){t=Ae(t,qe);let r=Ae(t.firestore,Ye),i=Jg(t.converter,e,n);return _c(r,[Yg(mo(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,rt.none())])}function eC(t,e,n,...r){t=Ae(t,qe);let i=Ae(t.firestore,Ye),s=mo(i),o;return o=typeof(e=Ee(e))=="string"||e instanceof ir?Q0(s,"updateDoc",t._key,e,n,r):K0(s,"updateDoc",t._key,e),_c(i,[o.toMutation(t._key,rt.exists(!0))])}function Kk(t){return _c(Ae(t.firestore,Ye),[new as(t._key,rt.none())])}function Qk(t,e){let n=Ae(t.firestore,Ye),r=cd(t),i=Jg(t.converter,e);return _c(n,[Yg(mo(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,rt.exists(!1))]).then(()=>r)}function tC(t,...e){var n,r,i;t=Ee(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||i0(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(i0(e[o])){let f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(t instanceof qe)l=Ae(t.firestore,Ye),d=pc(t._key.path),c={next:f=>{e[o]&&e[o](nC(l,t,f))},error:e[o+1],complete:e[o+2]};else{let f=Ae(t,Ft);l=Ae(f.firestore,Ye),d=f._query;let g=new di(l);c={next:y=>{e[o]&&e[o](new sr(l,g,f,y))},error:e[o+1],complete:e[o+2]},Rk(t._query)}return function(g,y,E,D){let S=new lc(D),k=new Zl(y,S,E);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return N0(yield dc(g),k)})),()=>{S.$a(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return P0(yield dc(g),k)}))}}(wt(l),d,a,c)}function Yk(t,e){return _z(wt(t=Ae(t,Ye)),i0(e)?e:{next:e})}function _c(t,e){return function(r,i){let s=new mt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return J9(yield $0(r),i,s)})),s.promise}(wt(t),e)}function nC(t,e,n){let r=n.docs.get(e._key),i=new di(t);return new jn(t,i,e._key,r,new oi(n.hasPendingWrites,n.fromCache),e.converter)}var bz={maxAttempts:5};var Hg=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=mo(e)}set(e,n,r){this._verifyNotCommitted();let i=Yi(e,this._firestore),s=Jg(i.converter,n,r),o=Yg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,rt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=Yi(e,this._firestore),o;return o=typeof(n=Ee(n))=="string"||n instanceof ir?Q0(this._dataReader,"WriteBatch.update",s._key,n,r,i):K0(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,rt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Yi(e,this._firestore);return this._mutations=this._mutations.concat(new as(n._key,rt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Yi(t,e){if((t=Ee(t)).firestore!==e)throw new P(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var y0=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=mo(n)}get(n){let r=Yi(n,this._firestore),i=new m0(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return K();let o=s[0];if(o.isFoundDocument())return new fo(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new fo(this._firestore,i,r._key,null,r.converter);throw K()})}set(n,r,i){let s=Yi(n,this._firestore),o=Jg(s.converter,r,i),a=Yg(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){let o=Yi(n,this._firestore),a;return a=typeof(r=Ee(r))=="string"||r instanceof ir?Q0(this._dataReader,"Transaction.update",o._key,r,i,s):K0(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){let r=Yi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Yi(e,this._firestore),r=new di(this._firestore);return super.get(e).then(i=>new jn(this._firestore,r,n._key,i._document,new oi(!1,!1),n.converter))}};function Zk(t,e,n){t=Ae(t,Ye);let r=Object.assign(Object.assign({},bz),n);return function(s){if(s.maxAttempts<1)throw new P(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new mt;return s.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield pz(s);new e0(s.asyncQueue,l,a,o,c).Xa()})),c.promise}(wt(t),i=>e(new y0(t,i)),r)}function Jk(){return new ed("deleteField")}function Xk(){return new c0("serverTimestamp")}function eO(...t){return new u0("arrayUnion",t)}function tO(...t){return new l0("arrayRemove",t)}function nO(t){return new d0("increment",t)}(function(e,n=!0){(function(i){fc=i})(ph),bs(new fn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ye(new IE(r.getProvider("auth-internal")),new TE(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ns(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Hn(kN,"4.6.3",e),Hn(kN,"4.6.3","esm2017")})();var Tz="@firebase/firestore-compat",Sz="0.3.32";function cC(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function rO(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function iO(){if(!KP())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Xg=class t{constructor(e){this._delegate=e}static fromBase64String(e){return iO(),new t(kr.fromBase64String(e))}static fromUint8Array(e){return rO(),new t(kr.fromUint8Array(e))}toBase64(){return iO(),this._delegate.toBase64()}toUint8Array(){return rO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function rC(t){return Az(t,["next","error","complete"])}function Az(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var iC=class{enableIndexedDbPersistence(e,n){return gk(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return mk(e._delegate)}clearIndexedDbPersistence(e){return vk(e._delegate)}},em=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ns||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Vn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){dk(this._delegate,e,n,r)}enableNetwork(){return wk(this._delegate)}disableNetwork(){return Ek(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,H0("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return _k(this._delegate)}onSnapshotsInSync(e){return Yk(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ic(this,G0(this._delegate,e))}catch(n){throw rn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Or(this,cd(this._delegate,e))}catch(n){throw rn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Eo(this,hk(this._delegate,e))}catch(n){throw rn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Zk(this._delegate,n=>e(new tm(this,n)))}batch(){return wt(this._delegate),new nm(new Hg(this._delegate,e=>_c(this._delegate,e)))}loadBundle(e){return Ik(this._delegate,e)}namedQuery(e){return Ck(this._delegate,e).then(n=>n?new Eo(this,n):null)}},wc=class extends hc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xg(new kr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Or.forKey(n,this.firestore,null)}};function xz(t){kP(t)}var tm=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new wc(e)}get(e){let n=vo(e);return this._delegate.get(n).then(r=>new _o(this._firestore,new jn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=vo(e);return r?(cC("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=vo(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=vo(e);return this._delegate.delete(n),this}},nm=class{constructor(e){this._delegate=e}set(e,n,r){let i=vo(e);return r?(cC("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=vo(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=vo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Ec=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Ji(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wo(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new t(e,new wc(e),n),i.set(n,s)),s}};Ec.INSTANCES=new WeakMap;var Or=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new wc(e)}static forPath(e,n,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new qe(n._delegate,r,new H(e)))}static forKey(e,n,r){return new t(n,new qe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ic(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ic(this.firestore,G0(this._delegate,e))}catch(n){throw rn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ee(e),e instanceof qe?z0(this._delegate,e):!1}set(e,n){n=cC("DocumentReference.set",n);try{return n?X0(this._delegate,e,n):X0(this._delegate,e)}catch(r){throw rn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?eC(this._delegate,e):eC(this._delegate,e,n,...r)}catch(i){throw rn(i,"updateDoc()","DocumentReference.update()")}}delete(){return Kk(this._delegate)}onSnapshot(...e){let n=sO(e),r=oO(e,i=>new _o(this.firestore,new jn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return tC(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=qk(this._delegate):e?.source==="server"?n=Hk(this._delegate):n=$k(this._delegate),n.then(r=>new _o(this.firestore,new jn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ec.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function rn(t,e,n){return t.message=t.message.replace(e,n),t}function sO(t){for(let e of t)if(typeof e=="object"&&!rC(e))return e;return{}}function oO(t,e){var n,r;let i;return rC(t[0])?i=t[0]:rC(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var _o=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Or(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return J0(this._delegate,e._delegate)}},wo=class extends _o{data(e){let n=this._delegate.data(e);return this._delegate._converter||OP(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Eo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new wc(e)}where(e,n,r){try{return new t(this.firestore,fi(this._delegate,Nk(e,n,r)))}catch(i){throw rn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,fi(this._delegate,Pk(e,n)))}catch(r){throw rn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,fi(this._delegate,kk(e)))}catch(n){throw rn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,fi(this._delegate,Ok(e)))}catch(n){throw rn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,fi(this._delegate,Fk(...e)))}catch(n){throw rn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,fi(this._delegate,Vk(...e)))}catch(n){throw rn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,fi(this._delegate,Lk(...e)))}catch(n){throw rn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,fi(this._delegate,jk(...e)))}catch(n){throw rn(n,"endAt()","Query.endAt()")}}isEqual(e){return W0(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=zk(this._delegate):e?.source==="server"?n=Wk(this._delegate):n=Gk(this._delegate),n.then(r=>new ud(this.firestore,new sr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=sO(e),r=oO(e,i=>new ud(this.firestore,new sr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return tC(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ec.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},sC=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new wo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},ud=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new sC(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new wo(this._firestore,r))})}isEqual(e){return J0(this._delegate,e._delegate)}},Ic=class t extends Eo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Or(this.firestore,e):null}doc(e){try{return e===void 0?new Or(this.firestore,cd(this._delegate)):new Or(this.firestore,cd(this._delegate,e))}catch(n){throw rn(n,"doc()","CollectionReference.doc()")}}add(e){return Qk(this._delegate,e).then(n=>new Or(this.firestore,n))}isEqual(e){return z0(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ec.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function vo(t){return Ae(t,qe)}var oC=class t{constructor(...e){this._delegate=new ir(...e)}static documentId(){return new t(ut.keyField().canonicalString())}isEqual(e){return e=Ee(e),e instanceof ir?this._delegate._internalPath.isEqual(e._internalPath):!1}};var aC=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=Xk();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=Jk();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=eO(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=tO(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=nO(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Mz={Firestore:em,GeoPoint:ho,Timestamp:Je,Blob:Xg,Transaction:tm,WriteBatch:nm,DocumentReference:Or,DocumentSnapshot:_o,Query:Eo,QueryDocumentSnapshot:wo,QuerySnapshot:ud,CollectionReference:Ic,FieldPath:oC,FieldValue:aC,setLogLevel:xz,CACHE_SIZE_UNLIMITED:fk};function Rz(t,e){t.INTERNAL.registerComponent(new fn("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Mz)))}function Nz(t){Rz(t,(e,n)=>new em(e,n,new iC)),t.registerVersion(Tz,Sz)}Nz(It);function Pz(t,e=Ms){return new pe(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function aO(t,e){return Pz(t,e)}function kz(t,e){return aO(t,e).pipe(Rs(void 0),hu(),Z(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function dC(t,e){return aO(t,e).pipe(Z(n=>({payload:n,type:"query"})))}var rm=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:s}=hO(r,n);return new sm(i,s,this.afs)}snapshotChanges(){return kz(this.ref,this.afs.schedulers.outsideAngular).pipe(at)}valueChanges(e={}){return this.snapshotChanges().pipe(Z(({payload:n})=>e.idField?xe(z({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return De(this.ref.get(e)).pipe(at)}};function im(t,e){return dC(t,e).pipe(Rs(void 0),hu(),Z(n=>{let[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=s.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function cO(t,e,n){return im(t,n).pipe(lr((r,i)=>Oz(r,i.map(s=>s.payload),e),[]),du(),Z(r=>r.map(i=>({type:i.type,payload:i}))))}function Oz(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=Fz(t,r))}),t}function uC(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function Fz(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return uC(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return uC(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return uC(t,e.oldIndex,1);break}return t}function uO(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var sm=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=im(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Z(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Rs(void 0),hu(),Ct(([r,i])=>i.length>0||!r),Z(([,r])=>r),at)}auditTrail(e){return this.stateChanges(e).pipe(lr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=uO(e);return cO(this.query,n,this.afs.schedulers.outsideAngular).pipe(at)}valueChanges(e={}){return dC(this.query,this.afs.schedulers.outsideAngular).pipe(Z(n=>n.payload.docs.map(r=>e.idField?xe(z({},r.data()),{[e.idField]:r.id}):r.data())),at)}get(e){return De(this.query.get(e)).pipe(at)}add(e){return this.ref.add(e)}doc(e){return new rm(this.ref.doc(e),this.afs)}},lC=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?im(this.query,this.afs.schedulers.outsideAngular).pipe(at):im(this.query,this.afs.schedulers.outsideAngular).pipe(Z(n=>n.filter(r=>e.indexOf(r.type)>-1)),Ct(n=>n.length>0),at)}auditTrail(e){return this.stateChanges(e).pipe(lr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=uO(e);return cO(this.query,n,this.afs.schedulers.outsideAngular).pipe(at)}valueChanges(e={}){return dC(this.query,this.afs.schedulers.outsideAngular).pipe(Z(r=>r.payload.docs.map(i=>e.idField?z({[e.idField]:i.id},i.data()):i.data())),at)}get(e){return De(this.query.get(e)).pipe(at)}},lO=new W("angularfire2.enableFirestorePersistence"),dO=new W("angularfire2.firestore.persistenceSettings"),Vz=new W("angularfire2.firestore.settings"),Lz=new W("angularfire2.firestore.use-emulator");function hO(t,e=n=>n){return{query:e(t),ref:t}}var hC=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,c,l,d,f,g,y,E,D,S,k,$){this.schedulers=c;let F=Ks(n,a,r),Y=d;f&&El(F,a,g,E,D,S,y,k),[this.firestore,this.persistenceEnabled$]=Oa(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ie=a.runOutsideAngular(()=>F.firestore());if(s&&ie.settings(s),Y&&ie.useEmulator(...Y),i&&!ni(o)){let ne=()=>{try{return De(ie.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),X(!1)}};return[ie,a.runOutsideAngular(ne)]}else return[ie,X(!1)]},[s,Y,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:s,query:o}=hO(i,r),a=this.schedulers.ngZone.run(()=>s);return new sm(a,o,this)}collectionGroup(n,r){let i=r||(o=>o),s=this.firestore.collectionGroup(n);return new lC(i(s),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new rm(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(V(Hi),V(Gi,8),V(lO,8),V(Vz,8),V(st),V(be),V(ka),V(dO,8),V(Lz,8),V(Fp,8),V(gl,8),V(ml,8),V(yl,8),V(vl,8),V(_l,8),V(wl,8),V(ri,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),fO=(()=>{class t{constructor(){It.registerVersion("angularfire",$i.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:lO,useValue:!0},{provide:dO,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Xt({type:t});static \u0275inj=Jt({providers:[hC]})}return t})();var pO=(()=>{let e=class e{constructor(r){this.db=r}insertData(r){try{return this.db.collection("emailData").add(xe(z({},r),{createdDate:new Date().toISOString()}))}catch{return Promise.reject({error:"An error occurred while trying to insert data"})}}};e.\u0275fac=function(i){return new(i||e)(V(hC))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Bz(t,e){t&1&&(L(0,"div",32)(1,"small",33),Q(2," Please fill in the form below and I will get back to you as soon as possible. "),B()())}function $z(t,e){t&1&&(L(0,"div",34)(1,"small",35),Q(2," Valid email address is required. "),B()())}function qz(t,e){t&1&&(L(0,"span"),Q(1,"Send"),B())}function Hz(t,e){t&1&&(L(0,"span",36)(1,"div"),yr(),L(2,"svg",37),ke(3,"path",38)(4,"path",39),B(),vr(),L(5,"span",40),Q(6,"Loading..."),B()(),L(7,"span"),Q(8,"Sending email..."),B()())}function Gz(t,e){if(t&1){let n=Jx();L(0,"div",2)(1,"div",3),ke(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8)(7,"div",9),B(),L(8,"div",10)(9,"h1",11),Q(10,"Let's chat"),B(),L(11,"div",12),ma(12,Bz,3,0,"div",13),L(13,"form",14),Er("ngSubmit",function(){wA(n);let i=j_();return EA(i.onSubmit())}),L(14,"div",15)(15,"label",16),Q(16,"Name"),B(),L(17,"div",17),ke(18,"img",18),B(),ke(19,"input",19),B(),L(20,"div",15)(21,"label",20),Q(22,"Email"),B(),L(23,"div",17),yr(),L(24,"svg",21),ke(25,"path",22)(26,"path",23),B()(),vr(),ke(27,"input",24),ma(28,$z,3,0,"div",25),B(),L(29,"div",26)(30,"label",27),Q(31,"Message"),B(),ke(32,"textarea",28),B(),L(33,"div",29)(34,"button",30),ma(35,qz,2,0,"span",1)(36,Hz,9,0,"span",31),B()()()()()()}if(t&2){let n=j_();_t(12),ot("ngIf",!n.emailDataForm.valid&&n.submitted),_t(),ot("formGroup",n.emailDataForm),_t(15),ot("ngIf",(n.form==null||n.form.email==null?null:n.form.email.errors)&&n.submitted),_t(6),ot("disabled",n.loading),_t(),ot("ngIf",!n.loading),_t(),ot("ngIf",n.loading&&n.emailDataForm.valid)}}function zz(t,e){t&1&&(L(0,"div"),ke(1,"app-success"),B())}var gO=(()=>{let e=class e{constructor(r){this.db=r,this.submitted=!1,this.showSuccess=!1,this.loading=!1}ngOnInit(){this.initForm()}initForm(){this.emailDataForm=new Ap({name:new fl("",[Ws.required]),email:new fl("",[Ws.required,Ws.email]),message:new fl("",[Ws.required])})}onSubmit(){if(this.submitted=!0,this.loading=!0,this.emailDataForm.invalid){this.loading=!1;return}this.db.insertData(this.emailDataForm.value).then(r=>{this.showSuccess=!0,this.emailDataForm.reset()})}get form(){return this.emailDataForm.controls}};e.\u0275fac=function(i){return new(i||e)(_e(pO))},e.\u0275cmp=$t({type:e,selectors:[["app-contact"]],standalone:!0,features:[qt],decls:2,vars:2,consts:[["class","flex flex-col md:flex-row justify-center items-center max-w-6xl mt-10 p-4 mx-auto",4,"ngIf"],[4,"ngIf"],[1,"flex","flex-col","md:flex-row","justify-center","items-center","max-w-6xl","mt-10","p-4","mx-auto"],[1,"hidden","md:w-1/2","mb-8","md:mb-0","md:flex","justify-center","relative","items-center"],[1,"envelope","w-[16rem]","h-[10rem]","rounded-lg","overflow-hidden"],[1,"invisible","md:visible","bg-gray-200","px-10","py-5","rounded-full","absolute","top-[25rem]","z-10"],[1,"invisible","md:visible","bg-gray-200","px-10","py-2","rounded-full","absolute","top-[15rem]","left-[3rem]","z-10"],[1,"invisible","lg:visible","bg-green-200","px-2","py-2","absolute","top-[10rem]","left-[3rem]","z-10"],[1,"invisible","md:visible","bg-gray-200","px-[5rem]","py-5","rounded-full","absolute","top-[-10rem]","z-10"],[1,"invisible","md:visible","bg-red-200","px-2","py-2","rounded-full","absolute","right-[10rem]","top-[-5rem]","z-10"],[1,"md:w-1/2","p-6","md:p-0","w-full"],[1,"text-4xl","font-bold","text-center"],[1,"mt-10"],["class","py-3",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-6","relative"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-700"],[1,"absolute","inset-y-[3.25rem]","start-0","flex","justify-center","items-center","ps-3.5","pointer-events-none"],["src","../../assets/pers.png","alt","",1,"w-5","h-5"],["type","text","id","name","formControlName","name","placeholder","Homer Simpson",1,"bg-gray-50","border","text-sm","outline-none","rounded-lg","w-full","ps-10","p-4"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-700"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 16",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["d","m10.036 8.278 9.258-7.79A1.979 1.979 0 0 0 18 0H2A1.987 1.987 0 0 0 .641.541l9.395 7.737Z"],["d","M11.241 9.817c-.36.275-.801.425-1.255.427-.428 0-.845-.138-1.187-.395L0 2.6V14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2.5l-8.759 7.317Z"],["type","email","id","email","formControlName","email","placeholder","name@example.com",1,"bg-gray-50","border","text-sm","outline-none","rounded-lg","w-full","ps-10","p-4"],["class","my-2",4,"ngIf"],[1,"mb-4"],["for","message",1,"block","text-sm","font-medium","text-gray-700"],["id","message","name","message","formControlName","message","rows","6",1,"mt-1","bg-gray-50","block","w-full","px-4","py-3","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","sm:text-sm"],[1,"my-4"],["type","submit",1,"w-full","flex","bg-black","justify-center","py-3","px-10","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white",3,"disabled"],["class","flex justify-center items-center space-x-1",4,"ngIf"],[1,"py-3"],[1,"text-red-300"],[1,"my-2"],[1,"text-red-200"],[1,"flex","justify-center","items-center","space-x-1"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"w-4","h-4","me-2","text-gray-200","animate-spin","dark:text-gray-600","fill-blue-600"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"],[1,"sr-only"]],template:function(i,s){i&1&&ma(0,Gz,37,6,"div",0)(1,zz,2,0,"div",1),i&2&&(ot("ngIf",!s.showSuccess),_t(),ot("ngIf",s.showSuccess&&s.submitted))},dependencies:[fN,dN,Rp,sN,oN,Zw,Jw,ti,wM,pN],styles:['.envelope[_ngcontent-%COMP%]{height:200px;width:320px;background-color:#e1e1e1;position:relative;overflow:hidden;margin:0 auto}.envelope[_ngcontent-%COMP%]:before, .envelope[_ngcontent-%COMP%]:after{content:"";height:240px;width:240px;border:1px solid #e7dfce;position:absolute;border-radius:32px 32px 20px;background-color:#d6d6d6}.envelope[_ngcontent-%COMP%]:before{top:auto;bottom:0;left:50%;transform:translate(-50%,50%) rotate(45deg)}.envelope[_ngcontent-%COMP%]:after{left:50%;top:0;transform:translate(-50%,-50%) rotate(45deg);box-shadow:1px 1px 20px 1px #7c7b7a}']});let t=e;return t})();var mO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$t({type:e,selectors:[["app-work"]],standalone:!0,features:[qt],decls:60,vars:0,consts:[[1,"max-w-3xl","mt-10","p-4","mx-auto","px-10"],[1,"text-4xl","font-bold","text-center","mt-4","mb-[4rem]"],[1,"relative","border-s","px-2","border-gray-700"],[1,"mb-10","ms-6"],[1,"absolute","flex","items-center","justify-center","w-6","h-6","rounded-full","-start-3","ring-8","ring-gray-900","bg-blue-900"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"w-2.5","h-2.5","text-blue-300"],["d","M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"],[1,"flex","items-center","mb-1","text-lg","pb-3","font-semibold","text-gray-900"],[1,"block","mb-2","text-sm","font-normal","leading-none","text-gray-500"],[1,"mb-4","text-base","font-normal","pt-4","text-gray-500","dark:text-gray-400"],[1,"flex","flex-col","space-y-3"],[1,"flex","items-center","mb-1","pb-3","text-lg","font-semibold","text-gray-900"],[1,"mb-4","text-base","pt-4","font-normal","text-gray-500","dark:text-gray-400"]],template:function(i,s){i&1&&(L(0,"div",0)(1,"h1",1),Q(2,"Work history"),B(),L(3,"ol",2)(4,"li",3)(5,"span",4),yr(),L(6,"svg",5),ke(7,"path",6),B()(),vr(),L(8,"h3",7),Q(9," Software Developer at JOBJACK. "),B(),L(10,"time",8),Q(11,"2021 - Current"),B(),L(12,"div",9)(13,"ul",10)(14,"li"),Q(15," - Collaborate with product managers, designers, and other stakeholders to drive product growth and deliver innovative solutions. "),B(),L(16,"li"),Q(17," - Develop and optimize front-end and back-end components to enhance performance and user experience. "),B(),L(18,"li"),Q(19," - Conduct code reviews and provided constructive feedback to team members. "),B(),L(20,"li"),Q(21," - Integrate third-party APIs and services to extend application functionality. "),B(),L(22,"li"),Q(23," - Mentor and train junior developers, fostering a culture of continuous learning and improvement. "),B()()()(),L(24,"li",3)(25,"span",4),yr(),L(26,"svg",5),ke(27,"path",6),B()(),vr(),L(28,"h3",11),Q(29," Software Developer at ORACLE. "),B(),L(30,"time",8),Q(31,"2020 - 2021"),B(),L(32,"div",12)(33,"ul",10)(34,"li"),Q(35," - Implemented and updated application modules under the direction of Senior Developers. "),B(),L(36,"li"),Q(37," - Created and maintained technical documentation to support ongoing development and future enhancements. "),B(),L(38,"li"),Q(39," - Participated in agile development processes, including daily stand-ups, sprint planning, and retrospectives. "),B(),L(40,"li"),Q(41," - Participated in code reviews, providing feedback and suggestions to improve code quality and maintainability. "),B()()()(),L(42,"li",3)(43,"span",4),yr(),L(44,"svg",5),ke(45,"path",6),B()(),vr(),L(46,"h3",11),Q(47," Tutor at University of Limpopo. "),B(),L(48,"time",8),Q(49,"2017 - 2020"),B(),L(50,"div",12)(51,"ul",10)(52,"li"),Q(53," - Provided one-on-one and group tutoring sessions in programming languages such as C#, Java, C++ and Python. "),B(),L(54,"li"),Q(55," - Developed customized lesson plans to meet individual student needs and learning styles. "),B(),L(56,"li"),Q(57," - Assisted students with understanding fundamental programming concepts, debugging code, and completing assignments. "),B(),L(58,"li"),Q(59,"- Helped students prepare for exams."),B()()()()()())}});let t=e;return t})();var yO=[{path:"",component:PR},{path:"about",component:kR},{path:"contact",component:gO},{path:"work",component:mO},{path:"**",redirectTo:""}];var vO="@firebase/database",_O="1.0.5";var DD="";function bD(t){DD=t}var wC=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),dt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:dh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var EC=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Mn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var YO=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wC(e)}}catch{}return new EC},Co=YO("localStorage"),IC=YO("sessionStorage");var Tc=new Ei("@firebase/database"),ZO=function(){let t=1;return function(){return t++}}(),JO=function(t){let e=ET(t),n=new wT;n.update(e);let r=n.digest();return ch.encodeByteArray(r)},Pd=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Pd.apply(null,r):typeof r=="object"?e+=dt(r):e+=r,e+=" "}return e},Do=null,wO=!0,XO=function(t,e){j(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Tc.logLevel=Rn.VERBOSE,Do=Tc.log.bind(Tc),e&&IC.set("logging_enabled",!0)):typeof t=="function"?Do=t:(Do=null,IC.remove("logging_enabled"))},St=function(...t){if(wO===!0&&(wO=!1,Do===null&&IC.get("logging_enabled")===!0&&XO(!0)),Do){let e=Pd.apply(null,t);Do(e)}},kd=function(t){return function(...e){St(t,...e)}},CC=function(...t){let e="FIREBASE INTERNAL ERROR: "+Pd(...t);Tc.error(e)},Lr=function(...t){let e=`FIREBASE FATAL ERROR: ${Pd(...t)}`;throw Tc.error(e),new Error(e)},zt=function(...t){let e="FIREBASE WARNING: "+Pd(...t);Tc.warn(e)},Wz=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&zt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Pm=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Kz=function(t){if(cr()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},gs="[MIN_NAME]",pi="[MAX_NAME]",To=function(t,e){if(t===e)return 0;if(t===gs||e===pi)return-1;if(e===gs||t===pi)return 1;{let n=EO(t),r=EO(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Qz=function(t,e){return t===e?0:t<e?-1:1},ld=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+dt(e))},TD=function(t){if(typeof t!="object"||t===null)return dt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=dt(e[r]),n+=":",n+=TD(t[e[r]]);return n+="}",n},eF=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function At(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var tF=function(t){j(!Pm(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},Yz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Zz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Jz(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var Xz=new RegExp("^-?(0*)\\d{1,10}$"),e5=-2147483648,t5=2147483647,EO=function(t){if(Xz.test(t)){let e=Number(t);if(e>=e5&&e<=t5)return e}return null},Oc=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw zt("Exception was thrown by user callback.",n),e},Math.floor(0))}},n5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},pd=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var DC=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){zt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var bC=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(St("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zt(e)}},gd=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),am="5",nF="v",rF="s",iF="r",sF="f",oF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,aF="ls",cF="p",TC="ac",uF="websocket",lF="long_polling";var cm=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Co.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Co.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function r5(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dF(t,e,n){j(typeof e=="string","typeof type must == string"),j(typeof n=="object","typeof params must == object");let r;if(e===uF)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===lF)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);r5(t)&&(n.ns=t.namespace);let i=[];return At(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var SC=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Mn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return fT(this.counters_)}};var fC={},pC={};function SD(t){let e=t.toString();return fC[e]||(fC[e]=new SC),fC[e]}function i5(t,e){let n=t.toString();return pC[n]||(pC[n]=e()),pC[n]}var AC=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Oc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var IO="start",s5="close",o5="pLPCommand",a5="pRTLPCB",hF="id",fF="pw",pF="ser",c5="cb",u5="seg",l5="ts",d5="d",h5="dframe",gF=1870,mF=30,f5=gF-mF,p5=25e3,g5=3e4,_d=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kd(e),this.stats_=SD(n),this.urlFn=c=>(this.appCheckToken&&(c[TC]=this.appCheckToken),dF(n,lF,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new AC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(g5)),Kz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xC((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===IO)this.id=a,this.password=c;else if(o===s5)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[IO]="t",r[pF]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[c5]=this.scriptTagHolder.uniqueCallbackIdentifier),r[nF]=am,this.transportSessionId&&(r[rF]=this.transportSessionId),this.lastSessionId&&(r[aF]=this.lastSessionId),this.applicationId&&(r[cF]=this.applicationId),this.appCheckToken&&(r[TC]=this.appCheckToken),typeof location<"u"&&location.hostname&&oF.test(location.hostname)&&(r[iF]=sF);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return cr()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Yz()&&!Zz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=dt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=hT(n),i=eF(r,f5);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(cr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[h5]="t",r[hF]=e,r[fF]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=dt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},xC=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,cr())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ZO(),window[o5+this.uniqueCallbackIdentifier]=e,window[a5+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){St("frame writing exception"),a.stack&&St(a.stack),St(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||St("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[hF]=this.myID,e[fF]=this.myPW,e[pF]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+mF+r.length<=gF;){let o=this.pendingSegs.shift();r=r+"&"+u5+i+"="+o.seg+"&"+l5+i+"="+o.ts+"&"+d5+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(p5)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){cr()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{St("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var m5=16384,y5=45e3,um=null;typeof MozWebSocket<"u"?um=MozWebSocket:typeof WebSocket<"u"&&(um=WebSocket);var Dc=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kd(this.connId),this.stats_=SD(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[nF]=am,!cr()&&typeof location<"u"&&location.hostname&&oF.test(location.hostname)&&(a[iF]=sF),r&&(a[rF]=r),i&&(a[aF]=i),s&&(a[TC]=s),o&&(a[cF]=o),dF(n,uF,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Co.set("previous_websocket_failure",!0);try{let i;if(cr()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${am}/${DD}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new um(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&um!==null&&!t.forceDisallow_}static previouslyFailed(){return Co.isInMemoryStorage||Co.get("previous_websocket_failure")===!0}markConnectionHealthy(){Co.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=dh(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(j(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=dt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=eF(r,m5);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(y5))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),yF=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[_d,Dc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Dc&&Dc.isAvailable(),i=r&&!Dc.previouslyFailed();if(n.webSocketOnly&&(r||zt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Dc];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),v5=6e4,_5=5e3,w5=10*1024,E5=100*1024,gC="t",CO="d",I5="s",DO="r",C5="e",bO="o",TO="a",SO="n",AO="p",D5="h",MC=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kd("c:"+this.id+":"),this.transportManager_=new yF(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=pd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>E5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>w5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(gC in e){let n=e[gC];n===TO?this.upgradeIfSecondaryHealthy_():n===DO?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===bO&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=ld("t",e),r=ld("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:AO,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:TO,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:SO,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=ld("t",e),r=ld("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=ld(gC,e);if(CO in e){let r=e[CO];if(n===D5){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===SO){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===I5?this.onConnectionShutdown_(r):n===DO?this.onReset_(r):n===C5?CC("Server Error: "+r):n===bO?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):CC("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),am!==r&&zt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),pd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(v5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(_5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:AO,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Co.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var lm=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var dm=class{constructor(e){this.allowedEvents_=e,this.listeners_={},j(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){j(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var hm=class t extends dm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Dy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return j(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var xO=32,MO=768,Ne=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Re(){return new Ne("")}function me(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ms(t){return t.pieces_.length-t.pieceNum_}function Be(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ne(t.pieces_,e)}function AD(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function b5(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function wd(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function vF(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ne(e,0)}function Ze(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ne)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ne(n,0)}function ye(t){return t.pieceNum_>=t.pieces_.length}function sn(t,e){let n=me(t),r=me(e);if(n===null)return e;if(n===r)return sn(Be(t),Be(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function T5(t,e){let n=wd(t,0),r=wd(e,0);for(let i=0;i<n.length&&i<r.length;i++){let s=To(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function xD(t,e){if(ms(t)!==ms(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Un(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ms(t)>ms(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var RC=class{constructor(e,n){this.errorPrefix_=n,this.parts_=wd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=au(this.parts_[r]);_F(this)}};function S5(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=au(e),_F(t)}function A5(t){let e=t.parts_.pop();t.byteLength_-=au(e),t.parts_.length>0&&(t.byteLength_-=1)}function _F(t){if(t.byteLength_>MO)throw new Error(t.errorPrefix_+"has a key path longer than "+MO+" bytes ("+t.byteLength_+").");if(t.parts_.length>xO)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+xO+") or object contains a cycle "+Io(t))}function Io(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var NC=class t extends dm{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return j(e==="visible","Unknown event type: "+e),[this.visible_]}};var dd=1e3,x5=60*5*1e3,RO=30*1e3,M5=1.3,R5=3e4,N5="server_kill",NO=3,MD=(()=>{class t extends lm{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=kd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dd,this.maxReconnectDelay_=x5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!cr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");NC.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&hm.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(dt(o)),j(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Et,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),j(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),j(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Mn(n,"w")){let i=wi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();zt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||vT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RO)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=yT(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),j(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+dt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):CC("Unrecognized action received from server: "+dt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){j(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dd,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=dd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>R5&&(this.reconnectDelay_=dd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*M5)}this.onConnectStatus_(!1)}establishConnection_(){return N(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){j(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,y]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?St("getToken() completed but was canceled"):(St("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,c=new MC(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,E=>{zt(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(N5)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&zt(g),l())}}})}interrupt(n){St("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){St("Resuming connection for reason: "+n),delete this.interruptReasons_[n],hh(this.interruptReasons_)&&(this.reconnectDelay_=dd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>TD(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Ne(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){St("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=NO&&(this.reconnectDelay_=RO,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){St("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=NO&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";cr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+DD.replace(/\./g,"-")]=1,Dy()?n["framework.cordova"]=1:pT()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=hm.getInstance().currentlyOnline();return hh(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),we=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Sc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new we(gs,e),i=new we(gs,n);return this.compare(r,i)!==0}minPost(){return we.MIN}};var om,fm=class extends Sc{static get __EMPTY_NODE(){return om}static set __EMPTY_NODE(e){om=e}compare(e,n){return To(e.name,n.name)}isDefinedOn(e){throw Oo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return we.MIN}maxPost(){return new we(pi,om)}makePost(e,n){return j(typeof e=="string","KeyIndex indexValue must always be a string."),new we(e,om)}toString(){return".key"}},Vr=new fm;var bc=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},or=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Bn.EMPTY_NODE,this.right=o??Bn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Bn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),PC=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new or(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Bn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,or.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,or.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new bc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new bc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new bc(this.root_,null,this.comparator_,!0,e)}};Bn.EMPTY_NODE=new PC;function P5(t,e){return To(t.name,e.name)}function RD(t,e){return To(t,e)}var kC;function k5(t){kC=t}var wF=function(t){return typeof t=="number"?"number:"+tF(t):"string:"+t},EF=function(t){if(t.isLeafNode()){let e=t.val();j(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Mn(e,".sv"),"Priority must be a string or number.")}else j(t===kC||t.isEmpty(),"priority of unexpected type.");j(t===kC||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var PO,Ac=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,j(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),EF(this.priorityNode_)}static set __childrenNodeConstructor(n){PO=n}static get __childrenNodeConstructor(){return PO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ye(n)?this:me(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=me(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(j(i!==".priority"||ms(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Be(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+wF(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=tF(this.value_):n+=this.value_,this.lazyHash_=JO(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(j(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return j(s>=0,"Unknown leaf type: "+r),j(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),IF,CF;function O5(t){IF=t}function F5(t){CF=t}var OC=class extends Sc{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?To(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return we.MIN}maxPost(){return new we(pi,new Ac("[PRIORITY-POST]",CF))}makePost(e,n){let r=IF(e);return new we(n,new Ac("[PRIORITY-POST]",r))}toString(){return".priority"}},He=new OC;var V5=Math.log(2),FC=class{constructor(e){let n=s=>parseInt(Math.log(s)/V5,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},pm=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,f,g;if(d===0)return null;if(d===1)return f=t[c],g=n?n(f):f,new or(g,f.node,or.BLACK,null,null);{let y=parseInt(d/2,10)+c,E=i(c,y),D=i(y+1,l);return f=t[y],g=n?n(f):f,new or(g,f.node,or.BLACK,E,D)}},s=function(c){let l=null,d=null,f=t.length,g=function(E,D){let S=f-E,k=f;f-=E;let $=i(S+1,k),F=t[S],Y=n?n(F):F;y(new or(Y,F.node,D,null,$))},y=function(E){l?(l.left=E,l=E):(d=E,l=E)};for(let E=0;E<c.count;++E){let D=c.nextBitIsOne(),S=Math.pow(2,c.count-(E+1));D?g(S,or.BLACK):(g(S,or.BLACK),g(S,or.RED))}return d},o=new FC(t.length),a=s(o);return new Bn(r||e,a)};var mC,Cc={},xc=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return j(Cc&&He,"ChildrenNode.ts has not been loaded"),mC=mC||new t({".priority":Cc},{".priority":He}),mC}get(e){let n=wi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Bn?n:null}hasIndex(e){return Mn(this.indexSet_,e.toString())}addIndex(e,n){j(e!==Vr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(we.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=pm(r,e.getCompare()):a=Cc;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=ou(this.indexes_,(i,s)=>{let o=wi(this.indexSet_,s);if(j(o,"Missing index implementation for "+s),i===Cc)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(we.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),pm(a,o.getCompare())}else return Cc;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new we(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=ou(this.indexes_,i=>{if(i===Cc)return i;{let s=n.get(e.name);return s?i.remove(new we(e.name,s)):i}});return new t(r,this.indexSet_)}};var hd,de=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&EF(this.priorityNode_),this.children_.isEmpty()&&j(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return hd||(hd=new t(new Bn(RD),null,xc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hd}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?hd:r}}getChild(n){let r=me(n);return r===null?this:this.getImmediateChild(r).getChild(Be(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(j(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new we(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?hd:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=me(n);if(i===null)return r;{j(me(n)!==".priority"||ms(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Be(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(He,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+wF(this.getPriority().val())+":"),this.forEachChild(He,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":JO(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new we(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new we(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new we(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,we.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,we.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Od?-1:0}withIndex(n){if(n===Vr||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Vr||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(He),s=r.getIterator(He),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Vr?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),VC=class extends de{constructor(){super(new Bn(RD),de.EMPTY_NODE,xc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return de.EMPTY_NODE}isEmpty(){return!1}},Od=new VC;Object.defineProperties(we,{MIN:{value:new we(gs,de.EMPTY_NODE)},MAX:{value:new we(pi,Od)}});fm.__EMPTY_NODE=de.EMPTY_NODE;Ac.__childrenNodeConstructor=de;k5(Od);F5(Od);var L5=!0;function Xe(t,e=null){if(t===null)return de.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),j(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ac(n,Xe(e))}if(!(t instanceof Array)&&L5){let n=[],r=!1;if(At(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Xe(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new we(o,c)))}}),n.length===0)return de.EMPTY_NODE;let s=pm(n,P5,o=>o.name,RD);if(r){let o=pm(n,He.getCompare());return new de(s,Xe(e),new xc({".priority":o},{".priority":He}))}else return new de(s,Xe(e),xc.Default)}else{let n=de.EMPTY_NODE;return At(t,(r,i)=>{if(Mn(t,r)&&r.substring(0,1)!=="."){let s=Xe(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Xe(e))}}O5(Xe);var Ed=class extends Sc{constructor(e){super(),this.indexPath_=e,j(!ye(e)&&me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?To(e.name,n.name):s}makePost(e,n){let r=Xe(e),i=de.EMPTY_NODE.updateChild(this.indexPath_,r);return new we(n,i)}maxPost(){let e=de.EMPTY_NODE.updateChild(this.indexPath_,Od);return new we(pi,e)}toString(){return wd(this.indexPath_,0).join("/")}};var LC=class extends Sc{compare(e,n){let r=e.node.compareTo(n.node);return r===0?To(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return we.MIN}maxPost(){return we.MAX}makePost(e,n){let r=Xe(e);return new we(n,r)}toString(){return".value"}},ND=new LC;function DF(t){return{type:"value",snapshotNode:t}}function Mc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Id(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Cd(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function j5(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Dd=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){j(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Id(n,a)):j(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Mc(n,r)):o.trackChildChange(Cd(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(He,(i,s)=>{n.hasChild(i)||r.trackChildChange(Id(i,s))}),n.isLeafNode()||n.forEachChild(He,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Cd(i,s,o))}else r.trackChildChange(Mc(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?de.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var gm=class t{constructor(e){this.indexedFilter_=new Dd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new we(n,r))||(r=de.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=de.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(de.EMPTY_NODE);let s=this;return n.forEachChild(He,(o,a)=>{s.matches(new we(o,a))||(i=i.updateImmediateChild(o,de.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var jC=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new gm(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new we(n,r))||(r=de.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=de.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=de.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(de.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,de.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let f=this.index_.getCompare();o=(g,y)=>f(y,g)}else o=this.index_.getCompare();let a=e;j(a.numChildren()===this.limit_,"");let c=new we(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){let f=a.getImmediateChild(n),g=i.getChildAfterChild(this.index_,l,this.reverse_);for(;g!=null&&(g.name===n||a.hasChild(g.name));)g=i.getChildAfterChild(this.index_,g,this.reverse_);let y=g==null?1:o(g,c);if(d&&!r.isEmpty()&&y>=0)return s?.trackChildChange(Cd(n,r,f)),a.updateImmediateChild(n,r);{s?.trackChildChange(Id(n,f));let D=a.updateImmediateChild(n,de.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(s?.trackChildChange(Mc(g.name,g.node)),D.updateImmediateChild(g.name,g.node)):D}}else return r.isEmpty()?e:d&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Id(l.name,l.node)),s.trackChildChange(Mc(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,de.EMPTY_NODE)):e}};var bd=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=He}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return j(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return j(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gs}hasEnd(){return this.endSet_}getIndexEndValue(){return j(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return j(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return j(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===He}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function U5(t){return t.loadsAllData()?new Dd(t.getIndex()):t.hasLimit()?new jC(t):new gm(t)}function B5(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function $5(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function UC(t,e,n){let r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function q5(t,e,n){let r;return t.index_===Vr||n?r=UC(t,e,n):r=UC(t,e,pi),r.startAfterSet_=!0,r}function BC(t,e,n){let r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function H5(t,e,n){let r;return t.index_===Vr||n?r=BC(t,e,n):r=BC(t,e,gs),r.endBeforeSet_=!0,r}function km(t,e){let n=t.copy();return n.index_=e,n}function kO(t){let e={};if(t.isDefault())return e;let n;if(t.index_===He?n="$priority":t.index_===ND?n="$value":t.index_===Vr?n="$key":(j(t.index_ instanceof Ed,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=dt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=dt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+dt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=dt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+dt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function OO(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==He&&(e.i=t.index_.toString()),e}var $C=class t extends lm{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=kd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(j(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=kO(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),wi(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=kO(e._queryParams),r=e._path.toString(),i=new Et;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_T(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=dh(a.responseText)}catch{zt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&zt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var qC=class{constructor(){this.rootNode_=de.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function mm(){return{value:null,children:new Map}}function Fc(t,e,n){if(ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=me(e);t.children.has(r)||t.children.set(r,mm());let i=t.children.get(r);e=Be(e),Fc(i,e,n)}}function HC(t,e){if(ye(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{let n=t.value;return t.value=null,n.forEachChild(He,(r,i)=>{Fc(t,new Ne(r),i)}),HC(t,e)}}else if(t.children.size>0){let n=me(e);return e=Be(e),t.children.has(n)&&HC(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function GC(t,e,n){t.value!==null?n(e,t.value):G5(t,(r,i)=>{let s=new Ne(e.toString()+"/"+r);GC(i,s,n)})}function G5(t,e){t.children.forEach((n,r)=>{e(r,n)})}var zC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&At(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var FO=10*1e3,z5=30*1e3,W5=5*60*1e3,WC=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new zC(e);let r=FO+(z5-FO)*Math.random();pd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;At(e,(i,s)=>{s>0&&Mn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),pd(this.reportStats_.bind(this),Math.floor(Math.random()*2*W5))}};var Fr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Fr||{});function PD(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function kD(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function OD(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var KC=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Fr.ACK_USER_WRITE,this.source=PD()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return j(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Ne(e));return new t(Re(),n,this.revert)}}else return j(me(this.path)===e,"operationForChild called for unrelated child."),new t(Be(this.path),this.affectedTree,this.revert)}};var ym=class t{constructor(e,n){this.source=e,this.path=n,this.type=Fr.LISTEN_COMPLETE}operationForChild(e){return ye(this.path)?new t(this.source,Re()):new t(this.source,Be(this.path))}};var Rc=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Fr.OVERWRITE}operationForChild(e){return ye(this.path)?new t(this.source,Re(),this.snap.getImmediateChild(e)):new t(this.source,Be(this.path),this.snap)}};var Td=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Fr.MERGE}operationForChild(e){if(ye(this.path)){let n=this.children.subtree(new Ne(e));return n.isEmpty()?null:n.value?new Rc(this.source,Re(),n.value):new t(this.source,Re(),n)}else return j(me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Be(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var jr=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;let n=me(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var QC=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function K5(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(j5(o.childName,o.snapshotNode))}),fd(t,i,"child_removed",e,r,n),fd(t,i,"child_added",e,r,n),fd(t,i,"child_moved",s,r,n),fd(t,i,"child_changed",e,r,n),fd(t,i,"value",e,r,n),i}function fd(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>Y5(t,a,c)),o.forEach(a=>{let c=Q5(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Q5(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Y5(t,e,n){if(e.childName==null||n.childName==null)throw Oo("Should only compare child_ events.");let r=new we(e.childName,e.snapshotNode),i=new we(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Om(t,e){return{eventCache:t,serverCache:e}}function md(t,e,n,r){return Om(new jr(e,n,r),t.serverCache)}function bF(t,e,n,r){return Om(t.eventCache,new jr(e,n,r))}function vm(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function bo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var yC,Z5=()=>(yC||(yC=new Bn(Qz)),yC),on=class t{constructor(e,n=Z5()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return At(e,(r,i)=>{n=n.set(new Ne(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Re(),value:this.value};if(ye(e))return null;{let r=me(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Be(e),n);return s!=null?{path:Ze(new Ne(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{let n=me(e),r=this.children.get(n);return r!==null?r.subtree(Be(e)):new t(null)}}set(e,n){if(ye(e))return new t(n,this.children);{let r=me(e),s=(this.children.get(r)||new t(null)).set(Be(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(ye(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=me(e),r=this.children.get(n);if(r){let i=r.remove(Be(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(ye(e))return this.value;{let n=me(e),r=this.children.get(n);return r?r.get(Be(e)):null}}setTree(e,n){if(ye(e))return n;{let r=me(e),s=(this.children.get(r)||new t(null)).setTree(Be(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Re(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ze(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Re(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(ye(e))return null;{let s=me(e),o=this.children.get(s);return o?o.findOnPath_(Be(e),Ze(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Re(),n)}foreachOnPath_(e,n,r){if(ye(e))return this;{this.value&&r(n,this.value);let i=me(e),s=this.children.get(i);return s?s.foreachOnPath_(Be(e),Ze(n,i),r):new t(null)}}foreach(e){this.foreach_(Re(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ze(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var ar=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new on(null))}};function yd(t,e,n){if(ye(e))return new ar(new on(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=sn(i,e);return s=s.updateChild(o,n),new ar(t.writeTree_.set(i,s))}else{let i=new on(n),s=t.writeTree_.setTree(e,i);return new ar(s)}}}function YC(t,e,n){let r=t;return At(n,(i,s)=>{r=yd(r,Ze(e,i),s)}),r}function VO(t,e){if(ye(e))return ar.empty();{let n=t.writeTree_.setTree(e,new on(null));return new ar(n)}}function ZC(t,e){return So(t,e)!=null}function So(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(sn(n.path,e)):null}function LO(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(He,(r,i)=>{e.push(new we(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new we(r,i.value))}),e}function fs(t,e){if(ye(e))return t;{let n=So(t,e);return n!=null?new ar(new on(n)):new ar(t.writeTree_.subtree(e))}}function JC(t){return t.writeTree_.isEmpty()}function Nc(t,e){return TF(Re(),t.writeTree_,e)}function TF(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(j(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=TF(Ze(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ze(t,".priority"),r)),n}}function Fm(t,e){return MF(e,t)}function J5(t,e,n,r,i){j(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=yd(t.visibleWrites,e,n)),t.lastWriteId=r}function X5(t,e,n,r){j(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=YC(t.visibleWrites,e,n),t.lastWriteId=r}function e6(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function t6(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);j(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&n6(a,r.path)?i=!1:Un(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return r6(t),!0;if(r.snap)t.visibleWrites=VO(t.visibleWrites,r.path);else{let a=r.children;At(a,c=>{t.visibleWrites=VO(t.visibleWrites,Ze(r.path,c))})}return!0}else return!1}function n6(t,e){if(t.snap)return Un(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Un(Ze(t.path,n),e))return!0;return!1}function r6(t){t.visibleWrites=SF(t.allWrites,i6,Re()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function i6(t){return t.visible}function SF(t,e,n){let r=ar.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Un(n,o)?(a=sn(n,o),r=yd(r,a,s.snap)):Un(o,n)&&(a=sn(o,n),r=yd(r,Re(),s.snap.getChild(a)));else if(s.children){if(Un(n,o))a=sn(n,o),r=YC(r,a,s.children);else if(Un(o,n))if(a=sn(o,n),ye(a))r=YC(r,Re(),s.children);else{let c=wi(s.children,me(a));if(c){let l=c.getChild(Be(a));r=yd(r,Re(),l)}}}else throw Oo("WriteRecord should have .snap or .children")}}return r}function AF(t,e,n,r,i){if(!r&&!i){let s=So(t.visibleWrites,e);if(s!=null)return s;{let o=fs(t.visibleWrites,e);if(JC(o))return n;if(n==null&&!ZC(o,Re()))return null;{let a=n||de.EMPTY_NODE;return Nc(o,a)}}}else{let s=fs(t.visibleWrites,e);if(!i&&JC(s))return n;if(!i&&n==null&&!ZC(s,Re()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Un(l.path,e)||Un(e,l.path))},a=SF(t.allWrites,o,e),c=n||de.EMPTY_NODE;return Nc(a,c)}}}function s6(t,e,n){let r=de.EMPTY_NODE,i=So(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(He,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=fs(t.visibleWrites,e);return n.forEachChild(He,(o,a)=>{let c=Nc(fs(s,new Ne(o)),a);r=r.updateImmediateChild(o,c)}),LO(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=fs(t.visibleWrites,e);return LO(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function o6(t,e,n,r,i){j(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Ze(e,n);if(ZC(t.visibleWrites,s))return null;{let o=fs(t.visibleWrites,s);return JC(o)?i.getChild(n):Nc(o,i.getChild(n))}}function a6(t,e,n,r){let i=Ze(e,n),s=So(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=fs(t.visibleWrites,i);return Nc(o,r.getNode().getImmediateChild(n))}else return null}function c6(t,e){return So(t.visibleWrites,e)}function u6(t,e,n,r,i,s,o){let a,c=fs(t.visibleWrites,e),l=So(c,Re());if(l!=null)a=l;else if(n!=null)a=Nc(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),y=g.getNext();for(;y&&d.length<i;)f(y,r)!==0&&d.push(y),y=g.getNext();return d}else return[]}function l6(){return{visibleWrites:ar.empty(),allWrites:[],lastWriteId:-1}}function _m(t,e,n,r){return AF(t.writeTree,t.treePath,e,n,r)}function FD(t,e){return s6(t.writeTree,t.treePath,e)}function jO(t,e,n,r){return o6(t.writeTree,t.treePath,e,n,r)}function wm(t,e){return c6(t.writeTree,Ze(t.treePath,e))}function d6(t,e,n,r,i,s){return u6(t.writeTree,t.treePath,e,n,r,i,s)}function VD(t,e,n){return a6(t.writeTree,t.treePath,e,n)}function xF(t,e){return MF(Ze(t.treePath,e),t.writeTree)}function MF(t,e){return{treePath:t,writeTree:e}}var XC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;j(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),j(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Cd(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Id(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Mc(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Cd(r,e.snapshotNode,i.oldSnap));else throw Oo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var eD=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},RF=new eD,Sd=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new jr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return VD(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:bo(this.viewCache_),s=d6(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function h6(t){return{filter:t}}function f6(t,e){j(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),j(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function p6(t,e,n,r,i){let s=new XC,o,a;if(n.type===Fr.OVERWRITE){let l=n;l.source.fromUser?o=tD(t,e,l.path,l.snap,r,i,s):(j(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ye(l.path),o=Em(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Fr.MERGE){let l=n;l.source.fromUser?o=m6(t,e,l.path,l.children,r,i,s):(j(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=nD(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Fr.ACK_USER_WRITE){let l=n;l.revert?o=_6(t,e,l.path,r,i,s):o=y6(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Fr.LISTEN_COMPLETE)o=v6(t,e,n.path,r,s);else throw Oo("Unknown operation type: "+n.type);let c=s.getChanges();return g6(e,o,c),{viewCache:o,changes:c}}function g6(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=vm(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(DF(vm(e)))}}function NF(t,e,n,r,i,s){let o=e.eventCache;if(wm(r,n)!=null)return e;{let a,c;if(ye(n))if(j(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=bo(e),d=l instanceof de?l:de.EMPTY_NODE,f=FD(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=_m(r,bo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=me(n);if(l===".priority"){j(ms(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=jO(r,n,d,c);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{let d=Be(n),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=jO(r,n,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(d,g):f=o.getNode().getImmediateChild(l)}else f=VD(r,l,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return md(e,a,o.isFullyInitialized()||ye(n),t.filter.filtersNodes())}}function Em(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(ye(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let y=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),y,null)}else{let y=me(n);if(!c.isCompleteForPath(n)&&ms(n)>1)return e;let E=Be(n),S=c.getNode().getImmediateChild(y).updateChild(E,r);y===".priority"?l=d.updatePriority(c.getNode(),S):l=d.updateChild(c.getNode(),y,S,E,RF,null)}let f=bF(e,l,c.isFullyInitialized()||ye(n),d.filtersNodes()),g=new Sd(i,f,s);return NF(t,f,n,i,g,a)}function tD(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new Sd(i,e,s);if(ye(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=md(e,l,!0,t.filter.filtersNodes());else{let f=me(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=md(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=Be(n),y=a.getNode().getImmediateChild(f),E;if(ye(g))E=r;else{let D=d.getCompleteChild(f);D!=null?AD(g)===".priority"&&D.getChild(vF(g)).isEmpty()?E=D:E=D.updateChild(g,r):E=de.EMPTY_NODE}if(y.equals(E))c=e;else{let D=t.filter.updateChild(a.getNode(),f,E,g,d,o);c=md(e,D,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function UO(t,e){return t.eventCache.isCompleteForChild(e)}function m6(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=Ze(n,c);UO(e,me(d))&&(a=tD(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=Ze(n,c);UO(e,me(d))||(a=tD(t,a,d,l,i,s,o))}),a}function BO(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function nD(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ye(n)?l=r:l=new on(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let y=e.serverCache.getNode().getImmediateChild(f),E=BO(t,y,g);c=Em(t,c,new Ne(f),E,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let y=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!y){let E=e.serverCache.getNode().getImmediateChild(f),D=BO(t,E,g);c=Em(t,c,new Ne(f),D,i,s,o,a)}}),c}function y6(t,e,n,r,i,s,o){if(wm(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ye(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Em(t,e,n,c.getNode().getChild(n),i,s,a,o);if(ye(n)){let l=new on(null);return c.getNode().forEachChild(Vr,(d,f)=>{l=l.set(new Ne(d),f)}),nD(t,e,n,l,i,s,a,o)}else return e}else{let l=new on(null);return r.foreach((d,f)=>{let g=Ze(n,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),nD(t,e,n,l,i,s,a,o)}}function v6(t,e,n,r,i){let s=e.serverCache,o=bF(e,s.getNode(),s.isFullyInitialized()||ye(n),s.isFiltered());return NF(t,o,n,r,RF,i)}function _6(t,e,n,r,i,s){let o;if(wm(r,n)!=null)return e;{let a=new Sd(r,e,i),c=e.eventCache.getNode(),l;if(ye(n)||me(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=_m(r,bo(e));else{let f=e.serverCache.getNode();j(f instanceof de,"serverChildren would be complete if leaf node"),d=FD(r,f)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=me(n),f=VD(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=t.filter.updateChild(c,d,f,Be(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,de.EMPTY_NODE,Be(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=_m(r,bo(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||wm(r,Re())!=null,md(e,l,o,t.filter.filtersNodes())}}var rD=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Dd(r.getIndex()),s=U5(r);this.processor_=h6(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(de.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(de.EMPTY_NODE,a.getNode(),null),d=new jr(c,o.isFullyInitialized(),i.filtersNodes()),f=new jr(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Om(f,d),this.eventGenerator_=new QC(this.query_)}get query(){return this.query_}};function w6(t){return t.viewCache_.serverCache.getNode()}function E6(t){return vm(t.viewCache_)}function I6(t,e){let n=bo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ye(e)&&!n.getImmediateChild(me(e)).isEmpty())?n.getChild(e):null}function $O(t){return t.eventRegistrations_.length===0}function C6(t,e){t.eventRegistrations_.push(e)}function qO(t,e,n){let r=[];if(n){j(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function HO(t,e,n,r){e.type===Fr.MERGE&&e.source.queryId!==null&&(j(bo(t.viewCache_),"We should always have a full cache before handling merges"),j(vm(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=p6(t.processor_,i,e,n,r);return f6(t.processor_,s.viewCache),j(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,PF(t,s.changes,s.viewCache.eventCache.getNode(),null)}function D6(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(He,(s,o)=>{r.push(Mc(s,o))}),n.isFullyInitialized()&&r.push(DF(n.getNode())),PF(t,r,n.getNode(),e)}function PF(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return K5(t.eventGenerator_,e,n,i)}var Im,Cm=class{constructor(){this.views=new Map}};function b6(t){j(!Im,"__referenceConstructor has already been defined"),Im=t}function T6(){return j(Im,"Reference.ts has not been loaded"),Im}function S6(t){return t.views.size===0}function LD(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return j(s!=null,"SyncTree gave us an op for an invalid query."),HO(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(HO(o,e,n,r));return s}}function kF(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=_m(n,i?r:null),c=!1;a?c=!0:r instanceof de?(a=FD(n,r),c=!1):(a=de.EMPTY_NODE,c=!1);let l=Om(new jr(a,c,!1),new jr(r,i,!1));return new rD(e,l)}return o}function A6(t,e,n,r,i,s){let o=kF(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),C6(o,n),D6(o,n)}function x6(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=ys(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(qO(l,n,r)),$O(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(qO(c,n,r)),$O(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!ys(t)&&s.push(new(T6())(e._repo,e._path)),{removed:s,events:o}}function OF(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ps(t,e){let n=null;for(let r of t.views.values())n=n||I6(r,e);return n}function FF(t,e){if(e._queryParams.loadsAllData())return Vm(t);{let r=e._queryIdentifier;return t.views.get(r)}}function VF(t,e){return FF(t,e)!=null}function ys(t){return Vm(t)!=null}function Vm(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Dm;function M6(t){j(!Dm,"__referenceConstructor has already been defined"),Dm=t}function R6(){return j(Dm,"Reference.ts has not been loaded"),Dm}var N6=1,bm=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new on(null),this.pendingWriteTree_=l6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function jD(t,e,n,r,i){return J5(t.pendingWriteTree_,e,n,r,i),i?Vc(t,new Rc(PD(),e,n)):[]}function P6(t,e,n,r){X5(t.pendingWriteTree_,e,n,r);let i=on.fromObject(n);return Vc(t,new Td(PD(),e,i))}function hs(t,e,n=!1){let r=e6(t.pendingWriteTree_,e);if(t6(t.pendingWriteTree_,e)){let s=new on(null);return r.snap!=null?s=s.set(Re(),!0):At(r.children,o=>{s=s.set(new Ne(o),!0)}),Vc(t,new KC(r.path,s,n))}else return[]}function Fd(t,e,n){return Vc(t,new Rc(kD(),e,n))}function k6(t,e,n){let r=on.fromObject(n);return Vc(t,new Td(kD(),e,r))}function O6(t,e){return Vc(t,new ym(kD(),e))}function F6(t,e,n){let r=UD(t,n);if(r){let i=BD(r),s=i.path,o=i.queryId,a=sn(s,e),c=new ym(OD(o),a);return $D(t,s,c)}else return[]}function Tm(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||VF(o,e))){let c=x6(o,e,n,r);S6(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let d=l.findIndex(g=>g._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(s,(g,y)=>ys(y));if(d&&!f){let g=t.syncPointTree_.subtree(s);if(!g.isEmpty()){let y=j6(g);for(let E=0;E<y.length;++E){let D=y[E],S=D.query,k=BF(t,D);t.listenProvider_.startListening(vd(S),Ad(t,S),k.hashFn,k.onComplete)}}}!f&&l.length>0&&!r&&(d?t.listenProvider_.stopListening(vd(e),null):l.forEach(g=>{let y=t.queryToTagMap.get(jm(g));t.listenProvider_.stopListening(vd(g),y)}))}U6(t,l)}return a}function LF(t,e,n,r){let i=UD(t,r);if(i!=null){let s=BD(i),o=s.path,a=s.queryId,c=sn(o,e),l=new Rc(OD(a),c,n);return $D(t,o,l)}else return[]}function V6(t,e,n,r){let i=UD(t,r);if(i){let s=BD(i),o=s.path,a=s.queryId,c=sn(o,e),l=on.fromObject(n),d=new Td(OD(a),c,l);return $D(t,o,d)}else return[]}function iD(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(g,y)=>{let E=sn(g,i);s=s||ps(y,E),o=o||ys(y)});let a=t.syncPointTree_.get(i);a?(o=o||ys(a),s=s||ps(a,Re())):(a=new Cm,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=de.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,E)=>{let D=ps(E,Re());D&&(s=s.updateImmediateChild(y,D))}));let l=VF(a,e);if(!l&&!e._queryParams.loadsAllData()){let g=jm(e);j(!t.queryToTagMap.has(g),"View does not exist, but we have a tag");let y=B6();t.queryToTagMap.set(g,y),t.tagToQueryMap.set(y,g)}let d=Fm(t.pendingWriteTree_,i),f=A6(a,e,n,d,s,c);if(!l&&!o&&!r){let g=FF(a,e);f=f.concat($6(t,e,g))}return f}function Lm(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=sn(o,e),l=ps(a,c);if(l)return l});return AF(i,e,s,n,!0)}function L6(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,d)=>{let f=sn(l,n);r=r||ps(d,f)});let i=t.syncPointTree_.get(n);i?r=r||ps(i,Re()):(i=new Cm,t.syncPointTree_=t.syncPointTree_.set(n,i));let s=r!=null,o=s?new jr(r,!0,!1):null,a=Fm(t.pendingWriteTree_,e._path),c=kF(i,e,a,s?o.getNode():de.EMPTY_NODE,s);return E6(c)}function Vc(t,e){return jF(e,t.syncPointTree_,null,Fm(t.pendingWriteTree_,Re()))}function jF(t,e,n,r){if(ye(t.path))return UF(t,e,n,r);{let i=e.get(Re());n==null&&i!=null&&(n=ps(i,Re()));let s=[],o=me(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=xF(r,o);s=s.concat(jF(a,c,l,d))}return i&&(s=s.concat(LD(i,t,r,n))),s}}function UF(t,e,n,r){let i=e.get(Re());n==null&&i!=null&&(n=ps(i,Re()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=xF(r,o),d=t.operationForChild(o);d&&(s=s.concat(UF(d,a,c,l)))}),i&&(s=s.concat(LD(i,t,r,n))),s}function BF(t,e){let n=e.query,r=Ad(t,n);return{hashFn:()=>(w6(e)||de.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?F6(t,n._path,r):O6(t,n._path);{let s=Jz(i,n);return Tm(t,n,null,s)}}}}function Ad(t,e){let n=jm(e);return t.queryToTagMap.get(n)}function jm(t){return t._path.toString()+"$"+t._queryIdentifier}function UD(t,e){return t.tagToQueryMap.get(e)}function BD(t){let e=t.indexOf("$");return j(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ne(t.substr(0,e))}}function $D(t,e,n){let r=t.syncPointTree_.get(e);j(r,"Missing sync point for query tag that we're tracking");let i=Fm(t.pendingWriteTree_,e);return LD(r,n,i,null)}function j6(t){return t.fold((e,n,r)=>{if(n&&ys(n))return[Vm(n)];{let i=[];return n&&(i=OF(n)),At(r,(s,o)=>{i=i.concat(o)}),i}})}function vd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(R6())(t._repo,t._path):t}function U6(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=jm(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function B6(){return N6++}function $6(t,e,n){let r=e._path,i=Ad(t,e),s=BF(t,n),o=t.listenProvider_.startListening(vd(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)j(!ys(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,d,f)=>{if(!ye(l)&&d&&ys(d))return[Vm(d).query];{let g=[];return d&&(g=g.concat(OF(d).map(y=>y.query))),At(f,(y,E)=>{g=g.concat(E)}),g}});for(let l=0;l<c.length;++l){let d=c[l];t.listenProvider_.stopListening(vd(d),Ad(t,d))}}return o}var sD=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},oD=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Ze(this.path_,e);return new t(this.syncTree_,n)}node(){return Lm(this.syncTree_,this.path_)}},q6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},GO=function(t,e,n){if(!t||typeof t!="object")return t;if(j(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return H6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return G6(t[".sv"],e);j(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},H6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:j(!1,"Unexpected server value: "+t)}},G6=function(t,e,n){t.hasOwnProperty("increment")||j(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&j(!1,"Unexpected increment value: "+r);let i=e.node();if(j(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},$F=function(t,e,n,r){return HD(e,new oD(n,t),r)},qD=function(t,e,n){return HD(t,new sD(e),n)};function HD(t,e,n){let r=t.getPriority().val(),i=GO(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=GO(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ac(a,Xe(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ac(i))),o.forEachChild(He,(a,c)=>{let l=HD(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var xd=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Um(t,e){let n=e instanceof Ne?e:new Ne(e),r=t,i=me(n);for(;i!==null;){let s=wi(r.node.children,i)||{children:{},childCount:0};r=new xd(i,r,s),n=Be(n),i=me(n)}return r}function Ao(t){return t.node.value}function GD(t,e){t.node.value=e,aD(t)}function qF(t){return t.node.childCount>0}function z6(t){return Ao(t)===void 0&&!qF(t)}function Bm(t,e){At(t.node.children,(n,r)=>{e(new xd(n,t,r))})}function HF(t,e,n,r){n&&!r&&e(t),Bm(t,i=>{HF(i,e,!0,r)}),n&&r&&e(t)}function W6(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Vd(t){return new Ne(t.parent===null?t.name:Vd(t.parent)+"/"+t.name)}function aD(t){t.parent!==null&&K6(t.parent,t.name,t)}function K6(t,e,n){let r=z6(n),i=Mn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,aD(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,aD(t))}var Q6=/[\[\].#$\/\u0000-\u001F\u007F]/,Y6=/[\[\].#$\u0000-\u001F\u007F]/,vC=10*1024*1024,$m=function(t){return typeof t=="string"&&t.length!==0&&!Q6.test(t)},GF=function(t){return typeof t=="string"&&t.length!==0&&!Y6.test(t)},Z6=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),GF(t)},Md=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Pm(t)||t&&typeof t=="object"&&Mn(t,".sv")},Ur=function(t,e,n,r){r&&e===void 0||Ld(cn(t,"value"),e,n)},Ld=function(t,e,n){let r=n instanceof Ne?new RC(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Io(r));if(typeof e=="function")throw new Error(t+"contains a function "+Io(r)+" with contents = "+e.toString());if(Pm(e))throw new Error(t+"contains "+e.toString()+" "+Io(r));if(typeof e=="string"&&e.length>vC/3&&au(e)>vC)throw new Error(t+"contains a string greater than "+vC+" utf8 bytes "+Io(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(At(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!$m(o)))throw new Error(t+" contains an invalid key ("+o+") "+Io(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);S5(r,o),Ld(t,a,r),A5(r)}),i&&s)throw new Error(t+' contains ".value" child '+Io(r)+" in addition to actual children.")}},J6=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];let s=wd(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!$m(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(T5);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Un(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},zF=function(t,e,n,r){if(r&&e===void 0)return;let i=cn(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let s=[];At(e,(o,a)=>{let c=new Ne(o);if(Ld(i,a,Ze(n,c)),AD(c)===".priority"&&!Md(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),J6(i,s)},zD=function(t,e,n){if(!(n&&e===void 0)){if(Pm(e))throw new Error(cn(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Md(e))throw new Error(cn(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},jd=function(t,e,n,r){if(!(r&&n===void 0)&&!$m(n))throw new Error(cn(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Lc=function(t,e,n,r){if(!(r&&n===void 0)&&!GF(n))throw new Error(cn(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},X6=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Lc(t,e,n,r)},Tn=function(t,e){if(me(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},WF=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!$m(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Z6(n))throw new Error(cn(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var cD=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function qm(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!xD(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function KF(t,e,n){qm(t,n),QF(t,r=>xD(r,e))}function Sn(t,e,n){qm(t,n),QF(t,r=>Un(r,e)||Un(e,r))}function QF(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(e8(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function e8(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Do&&St("event: "+n.toString()),Oc(r)}}}var YF="repo_interrupt",t8=25,uD=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mm(),this.transactionQueueTree_=new xd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function n8(t,e,n){if(t.stats_=SD(t.repoInfo_),t.forceRestClient_||n5())t.server_=new $C(t.repoInfo_,(r,i,s,o)=>{zO(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>WO(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{dt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new MD(t.repoInfo_,e,(r,i,s,o)=>{zO(t,r,i,s,o)},r=>{WO(t,r)},r=>{r8(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=i5(t.repoInfo_,()=>new WC(t.stats_,t.server_)),t.infoData_=new qC,t.infoSyncTree_=new bm({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Fd(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),WD(t,"connected",!1),t.serverSyncTree_=new bm({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Sn(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function ZF(t){let n=t.infoData_.getNode(new Ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ud(t){return q6({timestamp:ZF(t)})}function zO(t,e,n,r,i){t.dataUpdateCount++;let s=new Ne(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=ou(n,l=>Xe(l));o=V6(t.serverSyncTree_,s,c,i)}else{let c=Xe(n);o=LF(t.serverSyncTree_,s,c,i)}else if(r){let c=ou(n,l=>Xe(l));o=k6(t.serverSyncTree_,s,c)}else{let c=Xe(n);o=Fd(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Pc(t,s)),Sn(t.eventQueue_,a,o)}function WO(t,e){WD(t,"connected",e),e===!1&&o8(t)}function r8(t,e){At(e,(n,r)=>{WD(t,n,r)})}function WD(t,e,n){let r=new Ne("/.info/"+e),i=Xe(n);t.infoData_.updateSnapshot(r,i);let s=Fd(t.infoSyncTree_,r,i);Sn(t.eventQueue_,r,s)}function Hm(t){return t.nextWriteId_++}function i8(t,e,n){let r=L6(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let s=Xe(i).withIndex(e._queryParams.getIndex());iD(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Fd(t.serverSyncTree_,e._path,s);else{let a=Ad(t.serverSyncTree_,e);o=LF(t.serverSyncTree_,e._path,s,a)}return Sn(t.eventQueue_,e._path,o),Tm(t.serverSyncTree_,e,n,null,!0),s},i=>(jc(t,"get for query "+dt(e)+" failed: "+i),Promise.reject(new Error(i))))}function KD(t,e,n,r,i){jc(t,"set",{path:e.toString(),value:n,priority:r});let s=Ud(t),o=Xe(n,r),a=Lm(t.serverSyncTree_,e),c=qD(o,a,s),l=Hm(t),d=jD(t.serverSyncTree_,e,c,l,!0);qm(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(g,y)=>{let E=g==="ok";E||zt("set at "+e+" failed: "+g);let D=hs(t.serverSyncTree_,l,!E);Sn(t.eventQueue_,e,D),vs(t,i,g,y)});let f=YD(t,e);Pc(t,f),Sn(t.eventQueue_,f,[])}function s8(t,e,n,r){jc(t,"update",{path:e.toString(),value:n});let i=!0,s=Ud(t),o={};if(At(n,(a,c)=>{i=!1,o[a]=$F(Ze(e,a),Xe(c),t.serverSyncTree_,s)}),i)St("update() called with empty data.  Don't do anything."),vs(t,r,"ok",void 0);else{let a=Hm(t),c=P6(t.serverSyncTree_,e,o,a);qm(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,d)=>{let f=l==="ok";f||zt("update at "+e+" failed: "+l);let g=hs(t.serverSyncTree_,a,!f),y=g.length>0?Pc(t,e):e;Sn(t.eventQueue_,y,g),vs(t,r,l,d)}),At(n,l=>{let d=YD(t,Ze(e,l));Pc(t,d)}),Sn(t.eventQueue_,e,[])}}function o8(t){jc(t,"onDisconnectEvents");let e=Ud(t),n=mm();GC(t.onDisconnect_,Re(),(i,s)=>{let o=$F(i,s,t.serverSyncTree_,e);Fc(n,i,o)});let r=[];GC(n,Re(),(i,s)=>{r=r.concat(Fd(t.serverSyncTree_,i,s));let o=YD(t,i);Pc(t,o)}),t.onDisconnect_=mm(),Sn(t.eventQueue_,Re(),r)}function a8(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&HC(t.onDisconnect_,e),vs(t,n,r,i)})}function KO(t,e,n,r){let i=Xe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Fc(t.onDisconnect_,e,i),vs(t,r,s,o)})}function c8(t,e,n,r,i){let s=Xe(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Fc(t.onDisconnect_,e,s),vs(t,i,o,a)})}function u8(t,e,n,r){if(hh(n)){St("onDisconnect().update() called with empty data.  Don't do anything."),vs(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&At(n,(o,a)=>{let c=Xe(a);Fc(t.onDisconnect_,Ze(e,o),c)}),vs(t,r,i,s)})}function l8(t,e,n){let r;me(e._path)===".info"?r=iD(t.infoSyncTree_,e,n):r=iD(t.serverSyncTree_,e,n),KF(t.eventQueue_,e._path,r)}function lD(t,e,n){let r;me(e._path)===".info"?r=Tm(t.infoSyncTree_,e,n):r=Tm(t.serverSyncTree_,e,n),KF(t.eventQueue_,e._path,r)}function JF(t){t.persistentConnection_&&t.persistentConnection_.interrupt(YF)}function d8(t){t.persistentConnection_&&t.persistentConnection_.resume(YF)}function jc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),St(n,...e)}function vs(t,e,n,r){e&&Oc(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function h8(t,e,n,r,i,s){jc(t,"transaction on "+e);let o={path:e,update:n,onComplete:r,status:null,order:ZO(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=QD(t,e,void 0);o.currentInputSnapshot=a;let c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Ld("transaction failed: Data returned ",c,o.path),o.status=0;let l=Um(t.transactionQueueTree_,e),d=Ao(l)||[];d.push(o),GD(l,d);let f;typeof c=="object"&&c!==null&&Mn(c,".priority")?(f=wi(c,".priority"),j(Md(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(Lm(t.serverSyncTree_,e)||de.EMPTY_NODE).getPriority().val();let g=Ud(t),y=Xe(c,f),E=qD(y,a,g);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=E,o.currentWriteId=Hm(t);let D=jD(t.serverSyncTree_,e,E,o.currentWriteId,o.applyLocally);Sn(t.eventQueue_,e,D),Gm(t,t.transactionQueueTree_)}}function QD(t,e,n){return Lm(t.serverSyncTree_,e,n)||de.EMPTY_NODE}function Gm(t,e=t.transactionQueueTree_){if(e||zm(t,e),Ao(e)){let n=eV(t,e);j(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&f8(t,Vd(e),n)}else qF(e)&&Bm(e,n=>{Gm(t,n)})}function f8(t,e,n){let r=n.map(l=>l.currentWriteId),i=QD(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];j(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=sn(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{jc(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let g=0;g<n.length;g++)n[g].status=2,d=d.concat(hs(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&f.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();zm(t,Um(t.transactionQueueTree_,e)),Gm(t,t.transactionQueueTree_),Sn(t.eventQueue_,e,d);for(let g=0;g<f.length;g++)Oc(f[g])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{zt("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}Pc(t,e)}},o)}function Pc(t,e){let n=XF(t,e),r=Vd(n),i=eV(t,n);return p8(t,i,r),r}function p8(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=sn(n,c.path),d=!1,f;if(j(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(hs(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=t8)d=!0,f="maxretry",i=i.concat(hs(t.serverSyncTree_,c.currentWriteId,!0));else{let g=QD(t,c.path,o);c.currentInputSnapshot=g;let y=e[a].update(g.val());if(y!==void 0){Ld("transaction failed: Data returned ",y,c.path);let E=Xe(y);typeof y=="object"&&y!=null&&Mn(y,".priority")||(E=E.updatePriority(g.getPriority()));let S=c.currentWriteId,k=Ud(t),$=qD(E,g,k);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=$,c.currentWriteId=Hm(t),o.splice(o.indexOf(S),1),i=i.concat(jD(t.serverSyncTree_,c.path,$,c.currentWriteId,c.applyLocally)),i=i.concat(hs(t.serverSyncTree_,S,!0))}else d=!0,f="nodata",i=i.concat(hs(t.serverSyncTree_,c.currentWriteId,!0))}Sn(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}zm(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Oc(r[a]);Gm(t,t.transactionQueueTree_)}function XF(t,e){let n,r=t.transactionQueueTree_;for(n=me(e);n!==null&&Ao(r)===void 0;)r=Um(r,n),e=Be(e),n=me(e);return r}function eV(t,e){let n=[];return tV(t,e,n),n.sort((r,i)=>r.order-i.order),n}function tV(t,e,n){let r=Ao(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Bm(e,i=>{tV(t,i,n)})}function zm(t,e){let n=Ao(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,GD(e,n.length>0?n:void 0)}Bm(e,r=>{zm(t,r)})}function YD(t,e){let n=Vd(XF(t,e)),r=Um(t.transactionQueueTree_,e);return W6(r,i=>{_C(t,i)}),_C(t,r),HF(r,i=>{_C(t,i)}),n}function _C(t,e){let n=Ao(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(j(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(j(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(hs(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?GD(e,void 0):n.length=s+1,Sn(t.eventQueue_,Vd(e),i);for(let o=0;o<r.length;o++)Oc(r[o])}}function g8(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function m8(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):zt(`Invalid query segment '${n}' in query '${t}'`)}return e}var dD=function(t,e){let n=y8(t),r=n.namespace;n.domain==="firebase.com"&&Lr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Lr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Wz();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new cm(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ne(n.pathString)}},y8=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=g8(t.substring(d,f)));let g=m8(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let y=e.slice(0,l);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{let E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),n=e.substring(E+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var QO="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",v8=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=QO.charAt(n%64),n=Math.floor(n/64);j(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=QO.charAt(e[i]);return j(o.length===20,"nextPushId: Length should be 20."),o}}();var Sm=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+dt(this.snapshot.exportVal())}},Am=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Rd=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return j(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var xm=class{constructor(e,n){this._repo=e,this._path=n}cancel(){let e=new Et;return a8(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Tn("OnDisconnect.remove",this._path);let e=new Et;return KO(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Tn("OnDisconnect.set",this._path),Ur("OnDisconnect.set",e,this._path,!1);let n=new Et;return KO(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Tn("OnDisconnect.setWithPriority",this._path),Ur("OnDisconnect.setWithPriority",e,this._path,!1),zD("OnDisconnect.setWithPriority",n,!1);let r=new Et;return c8(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Tn("OnDisconnect.update",this._path),zF("OnDisconnect.update",e,this._path,!1);let n=new Et;return u8(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};var an=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ye(this._path)?null:AD(this._path)}get ref(){return new An(this._repo,this._path)}get _queryIdentifier(){let e=OO(this._queryParams),n=TD(e);return n==="{}"?"default":n}get _queryObject(){return OO(this._queryParams)}isEqual(e){if(e=Ee(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=xD(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+b5(this._path)}};function Wm(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function ws(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Vr){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==gs)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==pi)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===He){if(e!=null&&!Md(e)||n!=null&&!Md(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(j(t.getIndex()instanceof Ed||t.getIndex()===ND,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Km(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var An=class t extends an{constructor(e,n){super(e,n,new bd,!1)}get parent(){let e=vF(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},kc=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new Ne(e),r=_s(this.ref,e);return new t(this._node.getChild(n),r,He)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,_s(this.ref,r),He)))}hasChild(e){let n=new Ne(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function ZD(t,e){return t=Ee(t),t._checkNotDeleted("ref"),e!==void 0?_s(t._root,e):t._root}function JD(t,e){t=Ee(t),t._checkNotDeleted("refFromURL");let n=dD(e,t._repo.repoInfo_.nodeAdmin);WF("refFromURL",n);let r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Lr("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),ZD(t,n.path.toString())}function _s(t,e){return t=Ee(t),me(t._path)===null?X6("child","path",e,!1):Lc("child","path",e,!1),new An(t._repo,Ze(t._path,e))}function nV(t,e){t=Ee(t),Tn("push",t._path),Ur("push",e,t._path,!0);let n=ZF(t._repo),r=v8(n),i=_s(t,r),s=_s(t,r),o;return e!=null?o=Qm(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function rV(t){return Tn("remove",t._path),Qm(t,null)}function Qm(t,e){t=Ee(t),Tn("set",t._path),Ur("set",e,t._path,!1);let n=new Et;return KD(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function iV(t,e){t=Ee(t),Tn("setPriority",t._path),zD("setPriority",e,!1);let n=new Et;return KD(t._repo,Ze(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function sV(t,e,n){if(Tn("setWithPriority",t._path),Ur("setWithPriority",e,t._path,!1),zD("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";let r=new Et;return KD(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function oV(t,e){zF("update",e,t._path,!1);let n=new Et;return s8(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function aV(t){t=Ee(t);let e=new Rd(()=>{}),n=new Nd(e);return i8(t._repo,t,n).then(r=>new kc(r,new An(t._repo,t._path),t._queryParams.getIndex()))}var Nd=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Sm("value",this,new kc(e.snapshotNode,new An(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Am(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Mm=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Am(this,e,n):null}createEvent(e,n){j(e.childName!=null,"Child events should have a childName.");let r=_s(new An(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Sm(e.type,this,new kc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Bd(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(d,f)=>{lD(t._repo,t,a),c(d,f)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new Rd(n,s||void 0),a=e==="value"?new Nd(o):new Mm(e,o);return l8(t._repo,t,a),()=>lD(t._repo,t,a)}function Ym(t,e,n,r){return Bd(t,"value",e,n,r)}function XD(t,e,n,r){return Bd(t,"child_added",e,n,r)}function eb(t,e,n,r){return Bd(t,"child_changed",e,n,r)}function tb(t,e,n,r){return Bd(t,"child_moved",e,n,r)}function nb(t,e,n,r){return Bd(t,"child_removed",e,n,r)}function rb(t,e,n){let r=null,i=n?new Rd(n):null;e==="value"?r=new Nd(i):e&&(r=new Mm(e,i)),lD(t._repo,t,r)}var xn=class{},Rm=class extends xn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Ur("endAt",this._value,e._path,!0);let n=BC(e._queryParams,this._value,this._key);if(Km(n),ws(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new an(e._repo,e._path,n,e._orderByCalled)}};function cV(t,e){return jd("endAt","key",e,!0),new Rm(t,e)}var hD=class extends xn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Ur("endBefore",this._value,e._path,!1);let n=H5(e._queryParams,this._value,this._key);if(Km(n),ws(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new an(e._repo,e._path,n,e._orderByCalled)}};function uV(t,e){return jd("endBefore","key",e,!0),new hD(t,e)}var Nm=class extends xn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Ur("startAt",this._value,e._path,!0);let n=UC(e._queryParams,this._value,this._key);if(Km(n),ws(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new an(e._repo,e._path,n,e._orderByCalled)}};function lV(t=null,e){return jd("startAt","key",e,!0),new Nm(t,e)}var fD=class extends xn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Ur("startAfter",this._value,e._path,!1);let n=q5(e._queryParams,this._value,this._key);if(Km(n),ws(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new an(e._repo,e._path,n,e._orderByCalled)}};function dV(t,e){return jd("startAfter","key",e,!0),new fD(t,e)}var pD=class extends xn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new an(e._repo,e._path,B5(e._queryParams,this._limit),e._orderByCalled)}};function hV(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new pD(t)}var gD=class extends xn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new an(e._repo,e._path,$5(e._queryParams,this._limit),e._orderByCalled)}};function fV(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new gD(t)}var mD=class extends xn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Wm(e,"orderByChild");let n=new Ne(this._path);if(ye(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new Ed(n),i=km(e._queryParams,r);return ws(i),new an(e._repo,e._path,i,!0)}};function pV(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Lc("orderByChild","path",t,!1),new mD(t)}var yD=class extends xn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Wm(e,"orderByKey");let n=km(e._queryParams,Vr);return ws(n),new an(e._repo,e._path,n,!0)}};function gV(){return new yD}var vD=class extends xn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Wm(e,"orderByPriority");let n=km(e._queryParams,He);return ws(n),new an(e._repo,e._path,n,!0)}};function mV(){return new vD}var _D=class extends xn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Wm(e,"orderByValue");let n=km(e._queryParams,ND);return ws(n),new an(e._repo,e._path,n,!0)}};function yV(){return new _D}var wD=class extends xn{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Ur("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Rm(this._value,this._key)._apply(new Nm(this._value,this._key)._apply(e))}};function vV(t,e){return jd("equalTo","key",e,!0),new wD(t,e)}function $n(t,...e){let n=Ee(t);for(let r of e)n=r._apply(n);return n}b6(An);M6(An);var _8="FIREBASE_DATABASE_EMULATOR_HOST",ED={},w8=!1;function E8(t,e,n,r){t.repoInfo_=new cm(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function ib(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Lr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),St("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=dD(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[_8]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=dD(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new gd(gd.OWNER):new bC(t.name,t.options,e);WF("Invalid Firebase Database URL",o),ye(o.path)||Lr("Database URL must point to the root of a Firebase Database (not including a child path).");let f=C8(a,t,d,new DC(t.name,n));return new ID(f,t)}function I8(t,e){let n=ED[e];(!n||n[t.key]!==t)&&Lr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),JF(t),delete n[t.key]}function C8(t,e,n,r){let i=ED[e.name];i||(i={},ED[e.name]=i);let s=i[t.toURLString()];return s&&Lr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new uD(t,w8,n,r),i[t.toURLString()]=s,s}var ID=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(n8(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new An(this._repo,Re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(I8(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Lr("Cannot call "+e+" on a deleted database.")}};function _V(){yF.IS_TRANSPORT_INITIALIZED&&zt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function wV(){_V(),_d.forceDisallow()}function EV(){_V(),Dc.forceDisallow(),_d.forceAllow()}function IV(t,e,n,r={}){t=Ee(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Lr("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Lr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new gd(gd.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:uh(r.mockUserToken,t.app.options.projectId);s=new gd(o)}E8(i,e,n,s)}function CV(t){t=Ee(t),t._checkNotDeleted("goOffline"),JF(t._repo)}function DV(t){t=Ee(t),t._checkNotDeleted("goOnline"),d8(t._repo)}function bV(t,e){XO(t,e)}function D8(t){bD(ph),bs(new fn("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return ib(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Hn(vO,_O,t),Hn(vO,_O,"esm2017")}var b8={".sv":"timestamp"};function TV(){return b8}function SV(t){return{".sv":{increment:t}}}var CD=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function AV(t,e,n){var r;if(t=Ee(t),Tn("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let i=(r=n?.applyLocally)!==null&&r!==void 0?r:!0,s=new Et,o=(c,l,d)=>{let f=null;c?s.reject(c):(f=new kc(d,new An(t._repo,t._path),He),s.resolve(new CD(l,f)))},a=Ym(t,()=>{});return h8(t._repo,t._path,e,o,a,i),s.promise}MD.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};MD.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};D8();var T8="@firebase/database-compat",S8="1.0.5";var A8=new Ei("@firebase/database-compat"),xV=function(t){let e="FIREBASE WARNING: "+t;A8.warn(e)};var x8=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(cn(t,e)+"must be a boolean.")},M8=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(cn(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var sb=class{constructor(e){this._delegate=e}cancel(e){se("OnDisconnect.cancel",0,1,arguments.length),vt("OnDisconnect.cancel","onComplete",e,!0);let n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){se("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove","onComplete",e,!0);let n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){se("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set","onComplete",n,!0);let r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){se("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(se("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,xV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vt("OnDisconnect.update","onComplete",n,!0);let r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}};var ob=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return se("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var xo=class t{constructor(e,n){this._database=e,this._delegate=n}val(){return se("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return se("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return se("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return se("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return se("DataSnapshot.child",0,1,arguments.length),e=String(e),Lc("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}hasChild(e){return se("DataSnapshot.hasChild",1,1,arguments.length),Lc("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return se("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return se("DataSnapshot.forEach",1,1,arguments.length),vt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new t(this._database,n)))}hasChildren(){return se("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return se("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return se("DataSnapshot.ref",0,0,arguments.length),new gi(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Zm=class t{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;se("Query.on",2,4,arguments.length),vt("Query.on","callback",n,!1);let o=t.getCancelAndContextArgs_("Query.on",r,i),a=(l,d)=>{n.call(o.context,new xo(this.database,l),d)};a.userCallback=n,a.context=o.context;let c=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return Ym(this._delegate,a,c),n;case"child_added":return XD(this._delegate,a,c),n;case"child_removed":return nb(this._delegate,a,c),n;case"child_changed":return eb(this._delegate,a,c),n;case"child_moved":return tb(this._delegate,a,c),n;default:throw new Error(cn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(se("Query.off",0,3,arguments.length),M8("Query.off",e,!0),vt("Query.off","callback",n,!0),Sy("Query.off","context",r,!0),n){let i=()=>{};i.userCallback=n,i.context=r,rb(this._delegate,e,i)}else rb(this._delegate,e)}get(){return aV(this._delegate).then(e=>new xo(this.database,e))}once(e,n,r,i){se("Query.once",1,4,arguments.length),vt("Query.once","callback",n,!0);let s=t.getCancelAndContextArgs_("Query.once",r,i),o=new Et,a=(l,d)=>{let f=new xo(this.database,l);n&&n.call(s.context,f,d),o.resolve(f)};a.userCallback=n,a.context=s.context;let c=l=>{s.cancel&&s.cancel.call(s.context,l),o.reject(l)};switch(e){case"value":Ym(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":XD(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":nb(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":eb(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":tb(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(cn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return se("Query.limitToFirst",1,1,arguments.length),new t(this.database,$n(this._delegate,hV(e)))}limitToLast(e){return se("Query.limitToLast",1,1,arguments.length),new t(this.database,$n(this._delegate,fV(e)))}orderByChild(e){return se("Query.orderByChild",1,1,arguments.length),new t(this.database,$n(this._delegate,pV(e)))}orderByKey(){return se("Query.orderByKey",0,0,arguments.length),new t(this.database,$n(this._delegate,gV()))}orderByPriority(){return se("Query.orderByPriority",0,0,arguments.length),new t(this.database,$n(this._delegate,mV()))}orderByValue(){return se("Query.orderByValue",0,0,arguments.length),new t(this.database,$n(this._delegate,yV()))}startAt(e=null,n){return se("Query.startAt",0,2,arguments.length),new t(this.database,$n(this._delegate,lV(e,n)))}startAfter(e=null,n){return se("Query.startAfter",0,2,arguments.length),new t(this.database,$n(this._delegate,dV(e,n)))}endAt(e=null,n){return se("Query.endAt",0,2,arguments.length),new t(this.database,$n(this._delegate,cV(e,n)))}endBefore(e=null,n){return se("Query.endBefore",0,2,arguments.length),new t(this.database,$n(this._delegate,uV(e,n)))}equalTo(e,n){return se("Query.equalTo",1,2,arguments.length),new t(this.database,$n(this._delegate,vV(e,n)))}toString(){return se("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return se("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(se("Query.isEqual",1,1,arguments.length),!(e instanceof t)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){let i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,vt(e,"cancel",i.cancel,!0),i.context=r,Sy(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(cn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new gi(this.database,new An(this._delegate._repo,this._delegate._path))}},gi=class t extends Zm{constructor(e,n){super(e,new an(n._repo,n._path,new bd,!1)),this.database=e,this._delegate=n}getKey(){return se("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return se("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new t(this.database,_s(this._delegate,e))}getParent(){se("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new t(this.database,e):null}getRoot(){return se("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)}set(e,n){se("Reference.set",1,2,arguments.length),vt("Reference.set","onComplete",n,!0);let r=Qm(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(se("Reference.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,xV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Tn("Reference.update",this._delegate._path),vt("Reference.update","onComplete",n,!0);let r=oV(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){se("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority","onComplete",r,!0);let i=sV(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){se("Reference.remove",0,1,arguments.length),vt("Reference.remove","onComplete",e,!0);let n=rV(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){se("Reference.transaction",1,3,arguments.length),vt("Reference.transaction","transactionUpdate",e,!1),vt("Reference.transaction","onComplete",n,!0),x8("Reference.transaction","applyLocally",r,!0);let i=AV(this._delegate,e,{applyLocally:r}).then(s=>new ob(s.committed,new xo(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){se("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority","onComplete",n,!0);let r=iV(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){se("Reference.push",0,2,arguments.length),vt("Reference.push","onComplete",n,!0);let r=nV(this._delegate,e),i=r.then(o=>new t(this.database,o));n&&i.then(()=>n(null),o=>n(o));let s=new t(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Tn("Reference.onDisconnect",this._delegate._path),new sb(new xm(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Mo=class{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:wV,forceLongPolling:EV}}useEmulator(e,n,r={}){IV(this._delegate,e,n,r)}ref(e){if(se("database.ref",0,1,arguments.length),e instanceof gi){let n=JD(this._delegate,e.toString());return new gi(this,n)}else{let n=ZD(this._delegate,e);return new gi(this,n)}}refFromURL(e){se("database.refFromURL",1,1,arguments.length);let r=JD(this._delegate,e);return new gi(this,r)}goOffline(){return se("database.goOffline",0,0,arguments.length),CV(this._delegate)}goOnline(){return se("database.goOnline",0,0,arguments.length),DV(this._delegate)}};Mo.ServerValue={TIMESTAMP:TV(),increment:t=>SV(t)};function R8({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){bD(n);let a=new Ay("database-standalone"),c=new fh("auth-internal",a);c.setComponent(new fn("auth-internal",()=>r,"PRIVATE"));let l;return i&&(l=new fh("app-check-internal",a),l.setComponent(new fn("app-check-internal",()=>i,"PRIVATE"))),{instance:new Mo(ib(t,c,l,e,o),t),namespace:s}}var N8=Object.freeze({__proto__:null,initStandalone:R8});var P8=Mo.ServerValue;function k8(t){t.INTERNAL.registerComponent(new fn("database-compat",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Mo(i,r)},"PUBLIC").setServiceProps({Reference:gi,Query:Zm,Database:Mo,DataSnapshot:xo,enableLogging:bV,INTERNAL:N8,ServerValue:P8}).setMultipleInstances(!0)),t.registerVersion(T8,S8)}k8(It);function $d(t,e,n="on",r=Ms){return new pe(i=>{let s=null;return s=t[n](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),n==="once"&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),n==="on"?{unsubscribe(){s!=null&&t.off(e,s)}}:{unsubscribe(){}}}).pipe(Z(i=>{let{snapshot:s,prevKey:o}=i,a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),fu())}function O8(t){return typeof t=="string"}function F8(t){return typeof t.exportVal=="function"}function kV(t){return t==null}function OV(t){return typeof t.set=="function"}function MV(t,e){return OV(e)?e:t.ref(e)}function FV(t,e){if(O8(t))return e.stringCase();if(OV(t))return e.firebaseCase();if(F8(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function VV(t){return(kV(t)||t.length===0)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function LV(t,e,n){e=VV(e);let r=e.map(i=>$d(t,i,"on",n));return Ko(...r)}function V8(t,e,n){let r=LV(t,e).pipe(lr((i,s)=>[...i,s],[]));return j8(t,r,n)}function L8(t,e){return $d(t,"value","on",e).pipe(Z(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}function j8(t,e,n){return L8(t,n).pipe(Yy(e),Z(([i,s])=>{let o=i.lastKeyToLoad,a=s.map(c=>c.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),Qy(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),Z(i=>i.actions))}function RV(t,e){return function(r,i){return FV(r,{stringCase:()=>t.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function U8(t){return function(n){return n?FV(n,{stringCase:()=>t.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):t.remove()}}function B8(t,e,n){return $d(t,"value","once",n).pipe(ze(r=>{let i=[X(r)];return e.forEach(s=>i.push($d(t,s,"on",n))),Ko(...i).pipe(lr(q8,[]))}),du())}function jV(t,e){let n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function $8(t,e){if(kV(e))return 0;{let n=jV(t,e);return n===-1?t.length:n+1}}function q8(t,e){let{payload:n,prevKey:r,key:i}=e,s=jV(t,i),o=$8(t,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(c=>{let l={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,t=[...t,l],!1})}return t;case"child_added":if(s>-1)(t[s-1]?.key||null)!==r&&(t=t.filter(c=>c.payload.key!==n.key),t.splice(o,0,e));else{if(r==null)return[e,...t];t=t.slice(),t.splice(o,0,e)}return t;case"child_removed":return t.filter(a=>a.payload.key!==n.key);case"child_changed":return t.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){let a=t.splice(s,1)[0];return t=t.slice(),t.splice(o,0,a),t}return t;default:return t}}function NV(t,e,n){return e=VV(e),B8(t,e,n)}function H8(t,e){let n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:RV(r,"update"),set:RV(r,"set"),push:i=>r.push(i),remove:U8(r),snapshotChanges(i){return NV(t,i,n).pipe(at)},stateChanges(i){return LV(t,i,n).pipe(at)},auditTrail(i){return V8(t,i,n).pipe(at)},valueChanges(i,s){return NV(t,i,n).pipe(Z(a=>a.map(c=>s&&s.idField?xe(z({},c.payload.val()),{[s.idField]:c.key}):c.payload.val())),at)}}}function PV(t,e){return function(){return $d(t,"value","on",e)}}function G8(t,e){return{query:t,snapshotChanges(){return PV(t,e.schedulers.outsideAngular)().pipe(at)},update(n){return t.ref.update(n)},set(n){return t.ref.set(n)},remove(){return t.ref.remove()},valueChanges(){return PV(t,e.schedulers.outsideAngular)().pipe(at,Z(r=>r.payload.exists()?r.payload.val():null))}}}var z8=new W("angularfire2.realtimeDatabaseURL"),W8=new W("angularfire2.database.use-emulator"),K8=(()=>{class t{schedulers;database;constructor(n,r,i,s,o,a,c,l,d,f,g,y,E,D,S){this.schedulers=a;let k=c,$=Ks(n,o,r);l&&El($,o,d,g,y,E,f,D),this.database=Oa(`${$.name}.database.${i}`,"AngularFireDatabase",$.name,()=>{let F=o.runOutsideAngular(()=>$.database(i||void 0));return k&&F.useEmulator(...k),F},[k])}list(n,r){let i=this.schedulers.ngZone.runOutsideAngular(()=>MV(this.database,n)),s=i;return r&&(s=r(i)),H8(s,this)}object(n){let r=this.schedulers.ngZone.runOutsideAngular(()=>MV(this.database,n));return G8(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||t)(V(Hi),V(Gi,8),V(z8,8),V(st),V(be),V(ka),V(W8,8),V(Fp,8),V(gl,8),V(ml,8),V(yl,8),V(vl,8),V(_l,8),V(wl,8),V(ri,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),UV=(()=>{class t{constructor(){It.registerVersion("angularfire",$i.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Xt({type:t});static \u0275inj=Jt({providers:[K8]})}return t})();var BV={production:!0,firebase:{apiKey:"AIzaSyB-h2U4AtHj4xOoH_ORbN2JKvUI682FRp8",authDomain:"unknown-ae7c8.firebaseapp.com",projectId:"unknown-ae7c8",storageBucket:"unknown-ae7c8.appspot.com",messagingSenderId:"551768107392",appId:"1:551768107392:web:ecb22aed5b6700e3a53965",measurementId:"G-B64T6TBSBR"}};var $V={providers:[AR(yO),BM(),r_([MN.initializeApp(BV.firebase),UV,fO])]};var qV=()=>["/"],qd=t=>({"font-bold":t}),Q8=()=>["/about"],Y8=()=>["/work"],Z8=()=>["/contact"],HV=(()=>{let e=class e{constructor(r,i,s){this.document=r,this.platformId=i,this.router=s,this.$unsubscribe=new Ke,this.activeRoute="",this.isBrowser=!1}ngOnInit(){this.isBrowser=J_(this.platformId),this.router.events.pipe(Zo(this.$unsubscribe),$e(r=>this.activeRoute=r?.url),$e(()=>{let r=this.document.querySelector(".navigation-menu"),i=this.document.querySelector(".mobile-menu-cross"),s=this.document.querySelector(".mobile-menu-button");r?.classList.add("hidden"),i?.classList.add("hidden"),s?.classList.remove("hidden")}),$e(()=>{this.isBrowser&&window.scrollTo(0,0)})).subscribe()}toggleNav(){let r=this.document.querySelector(".mobile-menu-cross"),i=this.document.querySelector(".mobile-menu-button"),s=this.document.querySelector(".navigation-menu");i?.classList.toggle("hidden"),s?.classList.toggle("hidden"),r?.classList.toggle("hidden")}ngOnDestroy(){this.$unsubscribe.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)(_e(Ot),_e(st),_e(Cn))},e.\u0275cmp=$t({type:e,selectors:[["app-navbar"]],standalone:!0,features:[qt],decls:28,vars:25,consts:[[1,"bg-[#fff]","z-[30]","px-3","p-3","text-gray-700","border-b","sticky","top-0"],[1,"container","mx-auto","px-4","md:flex","md:","justify-between","items-center","gap-6"],[1,"flex","items-center","justify-between","md:w-auto","w-full"],["href","javascript:void(0)",1,"flex","items-center","py-5","px-2","text-gray-700","flex-1",3,"routerLink"],[1,"font-semibold","text-xl","lg:text-2xl"],[1,"text-orange-600"],[1,"md:hidden","flex","items-center"],[3,"click"],[1,"mobile-menu-button"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","none"],["d","M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"mobile-menu-cross","hidden"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 50 50","width","23","height","23"],["d","M 7.71875 6.28125 L 6.28125 7.71875 L 23.5625 25 L 6.28125 42.28125 L 7.71875 43.71875 L 25 26.4375 L 42.28125 43.71875 L 43.71875 42.28125 L 26.4375 25 L 43.71875 7.71875 L 42.28125 6.28125 L 25 23.5625 Z"],[1,"hidden","md:flex","md:flex-row","flex-col","items-start","justify-center","md:space-x-1","navigation-menu","pb-3","md:pb-0","navigation-menu"],["href","javascript:void(0)",1,"py-2","px-3","block","hover:text-gray-500",3,"routerLink","ngClass"],["href","https://thedeepend.vercel.app","target","_blank",1,"py-2","px-3","block","hover:text-gray-500",3,"ngClass"]],template:function(i,s){i&1&&(L(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"span",4)(5,"span",5),Q(6,"Stranger."),B(),Q(7," Mushwana"),B()(),L(8,"div",6)(9,"button",7),Er("click",function(){return s.toggleNav()}),L(10,"div",8),yr(),L(11,"svg",9)(12,"g",10),ke(13,"path",11),B()()(),vr(),L(14,"div",12),yr(),L(15,"svg",13),ke(16,"path",14),B()()()()(),vr(),L(17,"div",15)(18,"a",16),Q(19,"Home"),B(),L(20,"a",16),Q(21,"About"),B(),L(22,"a",16),Q(23,"Work"),B(),L(24,"a",17),Q(25,"Blog"),B(),L(26,"a",16),Q(27,"Contact"),B()()()()),i&2&&(_t(3),ot("routerLink",Ir(10,qV)),_t(15),ot("routerLink",Ir(11,qV))("ngClass",ya(12,qd,s.activeRoute==="/")),_t(2),ot("routerLink",Ir(14,Q8))("ngClass",ya(15,qd,s.activeRoute==="/about")),_t(2),ot("routerLink",Ir(17,Y8))("ngClass",ya(18,qd,s.activeRoute==="/work")),_t(2),ot("ngClass",ya(20,qd,s.activeRoute==="/blog")),_t(2),ot("routerLink",Ir(22,Z8))("ngClass",ya(23,qd,s.activeRoute==="/contact")))},dependencies:[Ra,Ma,ti,_M]});let t=e;return t})();var GV=(()=>{let e=class e{constructor(r){this.router=r}};e.\u0275fac=function(i){return new(i||e)(_e(Cn))},e.\u0275cmp=$t({type:e,selectors:[["app-root"]],standalone:!0,features:[qt],decls:11,vars:0,consts:[[1,"bg-gray-600"],[1,"flex","flex-col","justify-end","text-white","py-3","space-y-1","md:flex-row","md:space-y-0","md:space-x-2"],[1,"flex","items-center","mx-auto","space-x-4"],["href","https://github.com/strangermushwana","target","_blank"],["src","../../assets/github.svg","alt","Github link",1,"w-8","cursor-pointer"],["href","https://www.linkedin.com/in/strangermushwana","target","_blank"],["src","../../assets/linkedin.svg","alt","LinkedIn link",1,"w-8","cursor-pointer"],["href","https://www.credly.com/users/stranger/badges","target","_blank"],["src","../../assets/credly.svg","alt","Twitter link",1,"w-8","cursor-pointer"]],template:function(i,s){i&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),ke(4,"img",4),B(),L(5,"a",5),ke(6,"img",6),B(),L(7,"a",7),ke(8,"img",8),B()()()(),ke(9,"app-navbar")(10,"router-outlet"))},dependencies:[Bw,ti,HV]});let t=e;return t})();jM(GV,$V).catch(t=>console.error(t));
